"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _toConsumableArray(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function Socket(a,b,c,d,e){this.Session=e,this.user=this.Session.read("adminUserinfo"),this.auth=this.Session.read("adminOauth");var f={disconnectOnUnload:!0,"sync disconnect on unload":!0};this.user&&(f.query="userId="+this.user.id+"&access_token="+this.auth.access_token);var g=io(d.ENGAGE,f),h=c({ioSocket:g});return{socket:h,syncUpdates:function(a,b,c){h.on(a.slice(1),function(a){b[c?"push":"unshift"](a)})},emit:function(a,b){h.emit(a,b)},unsyncUpdates:function(a){h.removeAllListeners(a+":save"),h.removeAllListeners(a+":remove")}}}Socket.$inject=["$rootScope","$http","socketFactory","URLS","Session"],angular.module("qui.components",[]),angular.module("qui.core",["qui.components","http-auth-interceptor"]).constant("MODULE_VERSION","0.0.1"),angular.module("uiGenApp",["qui.core","ngAnimate","ui.router","ui.bootstrap","ngFileUpload","angular-loading-bar","scrollable-table","naif.base64","rzModule","toaster","ngclipboard","isteven-multi-select","dndLists","ngSanitize","btford.socket-io","ngIntlTelInput","ngRaven"]).config(["$urlRouterProvider","$locationProvider","ngIntlTelInputProvider",function(a,b,c){c.set({initialCountry:"us",autoHideDialCode:!0,nationalMode:!1,utilsScript:"/bower_components/intl-tel-input/build/js/utils.js"}),a.when("/","/packages"),a.otherwise(function(a){return a.get("$state").go("access.404")}),b.html5Mode(!0)}]).constant("ADDRESS",{name:"Indian shoppre LLP,",line1:"#182, 1st Floor, 2nd Cross Rd,",line2:"7th Main, 1st Block Koramangala,",line3:"Bengaluru, Karnataka,560034",phone:"+91 9148351414"}).constant("ONESIGNAL",{development:"91cbfcb8-6ad5-4128-a0f6-a653eeeaac4c",staging:"98049cea-88e2-49b5-b2a3-d6c5fe0d6dbf",production:"d0bf3fb3-1bd7-4ad8-9ba0-85ca0eb1273f"});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),FourOFourController=function(){function a(b,c){_classCallCheck(this,a),this.$onInit()}return a.$inject=["$http","$state"],_createClass(a,[{key:"$onInit",value:function(){console.log("oninti")}},{key:"upload",value:function(a){console.log("upload>>>>>>>>>>>>>>")}}]),a}();angular.module("uiGenApp").controller("FourOFourController",FourOFourController),function(a,b){a.module("uiGenApp.constants",[]).constant("appConfig",{2:{PACKAGE_STATES:["READY_TO_SEND","IN_REVIEW","ACTION_REQUIRED","MY_ORDERS","ALL"],SHIPMENT_STATE_IDS:{PACKAGING_REQUESTED:16,SCANNING_COMPLETED:17,PAYMENT_REQUESTED:18,PAYMENT_INITIATED:19,PAYMENT_COMPLETED:20,PAYMENT_FAILED:21,PAYMENT_CONFIRMED:22,UPSTREAM_SHIPMENT_REQUEST_CREATED:23,SHIPMENT_HANDED:24,SHIPMENT_IN_TRANSIT:25,SHIPMENT_MANUAL_FOLLOW_UP:26,SHIPMENT_LOST:27,CUSTOM_ON_HOLD:28,WRONG_ADDRESS:29,SHIPMENT_REJECTED_BY_CUSTOMER:30,RTO_REQUESTED:31,RAISE_SHIPMENT_LOST_CLAIM:32,PENALTY_PAYMENT_REQUESTED:33,RETURN_TO_ORIGIN:34,AMOUNT_RECEIVED_FROM_UPSTREAM:35,PENALTY_PAYMENT_DONE:36,WRONG_ADDRESS_FOLLOW_UP:37,CLAIM_PROCESSED_TO_CUSTOMER:38,CUSTOMER_ACKNOWLEDGEMENT_RECEIVED:39,SHIPMENT_DELIVERED:40,SHIPMENT_CANCELLED:41,SHIPMENT_DELETED:55,CUSTOMER_DOCUMENT_RESOLVED:60,SHIPMENT_ABANDON:61,PAYMENT_DELAY_EXCEEDED:1e3,PAYMENT_DELAY:1001,SHIPMENT_IN_ACTIVE:72,RETURNED_AND_SENT_TO_DOMESTIC:74,PAYMENT_AUTHORISED:79,INVOICE_UPLOAD_PENDING:100,INVOICE_UPLOAD_COMPLETED:101},PAYMENT_GATEWAY:{WIRE:1,CASH:2,CARD:3,PAYTM:4,PAYPAL:5,WALLET:6,RAZOR:7},PACKAGE_STATE_IDS:{PS_RETURN_REQUESTED:9,PS_REFUND_RECIEVED:10,PACKAGE_ITEMS_UPLOAD_PENDING:1,AWAITING_VERIFICATION:2,CUSTOMER_INPUT:3,IN_REVIEW:4,READY_TO_SHIP:5,DAMAGED:6,RETURN_REQUESTED_BY_CUSTOMER:7,RETURN_COMPLETED:8,SPLIT_PACKAGE_REQUESTED_BY_CUSTOMER:11,READY_FOR_SPLIT_INTERNALLY:12,DISCARD_COMPLETED:13,ADDED_SHIPMENT:14,CUSTOMER_REQUESTED_FOR_DISCARD:15,STANDARD_PHOTO_REQUEST:52,ADVANCED_PHOTO_REQUEST:53,UPLOAD_INVOICE_REQUESTED:54,INCOMING_PACKAGE:59,PACKAGE_STORAGE:1002,PACKAGE_STORAGE_EXCEEDED:1003,INACTIVE_LOCKER:71,PACKAGE_DELETED:73,EXCHANGE_REQUEST:75,EXCHANGE_DONE:76,PICKUP_NOT_DONE:78,READY_FOR_DISCARD_INTERNALLY:89,READY_FOR_RETURN_INTERNALLY:90,SPLIT_PACKAGE_COMPLETED:95},ORDER_STATE_IDS:{ORDER_CREATED:42,ORDER_CANCELLED:43,PAYMENT_INITIATED:44,PAYMENT_FAILED:45,PAYMENT_COMPLETED:46,AWAITING_PACKAGE:47,ORDER_PLACED:48,OUT_OF_STOCK:49,REFUNDED_TO_WALLET:50,REFUNDED_TO_BANK_ACCOUNT:51,ORDER_DELETED:62,PAYMENT_CONFIRMED:63,ORDER_PROCEED:64,PRICE_CHANGED:65,IN_TRANSIT:66,AWAITING_FOR_STOCK:67,ORDER_COMPLETED:68,OTHER_ITEMS_PROCEED:69,AWAITING_FOR_ORDER:70,ORDER_CANCELLED_BY_SELLER:77,PAYMENT_AUTHORISED:80,CUSTOMER_INPUT:81},PACKAGE_ITEM_STATE_IDS:{CUSTOMER_REQUESTED_FOR_DISCARD:82,READY_TO_DISCARD_INTERNALLY:83,ITEM_SOLD:84,REMOVED_FROM_WAREHOUSE:85,RETURN_REQUESTED_BY_CUSTOMER:86,RETURN_COMPLETED:87,READY_FOR_RETURN_INTERNALLY:88,ADVANCED_PHOTO_REQUESTED:91,ADVANCED_PHOTO_COMPLETED:92,CUSTOMER_CANCELLED_DISCARD:93,CUSTOMER_CANCELLED_RETURN:94,CUSTOMER_REQUESTED_FOR_SPLIT:96,READY_TO_SPLIT_INTERNALLY:97,SPLIT_COMPLETED:98,PICKUP_NOT_DONE:99}}})}(angular);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),AddFollowerController=function(){function a(b,c,d){_classCallCheck(this,a),this.$uibModalInstance=b,this.FollowerData=c,this.ApplicantId=d,this.newEmails=[]}return a.$inject=["$uibModalInstance","FollowerData","ApplicantId"],_createClass(a,[{key:"ok",value:function(){var a=this;this.$http.post("/applicants/"+this.ApplicantId+"/followers",this.newEmails).then(function(){return a.$uibModalInstance.close(!0)})}},{key:"cancel",value:function(){this.$uibModalInstance.dismiss("cancel")}},{key:"addNewFollower",value:function(){var a=this.emailTobeAdded,b=this.FollowerData.some(function(b){return b.email_id===a}),c=this.newEmails.some(function(b){return b===a});b&&c||this.newEmails.push(a)}}]),a}();angular.module("uiGenApp").controller("AddFollowerController",AddFollowerController);var AnnouncementModalController=function a(b,c){_classCallCheck(this,a),this.$uibModalInstance=b,this.data=c};AnnouncementModalController.$inject=["$uibModalInstance","announcement"],angular.module("uiGenApp").controller("AnnouncementModalController",AnnouncementModalController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CampaignController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.URLS=b,this.$window=c,this.Session=d,this.$http=e,this.Auth=f,this.$onInIt()}return a.$inject=["URLS","$window","Session","$http","Auth"],_createClass(a,[{key:"$onInIt",value:function(){this.user=this.Session.read("adminUserinfo")}},{key:"accessApp",value:function(a){this.authorise(a)}},{key:"authorise",value:function(a){var b=this,c={campaign:10,pay:14,peacock:16}[a],d={grant_type:"loginAs",username:this.user.email,app_id:c},e="post";return this.$http[e]("~~/api/authorise",d).then(function(a){var c=a.data;b.$window.open(c,"_blank")})}}]),a}();angular.module("uiGenApp").controller("CampaignController",CampaignController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ChangeItemStateController=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.pkgItem=d,this.Session=e,this.stateId=f,this.moment=g,this.toaster=i,this.customerId=h}return a.$inject=["$uibModalInstance","$http","pkgItem","Session","stateId","moment","customerId","toaster"],_createClass(a,[{key:"$onInit",value:function(){var a=this;switch(this.user=this.Session.read("userinfo"),this.states=this.Session.read("adminItem-states"),this.today=new Date,this.ui={checking:!1},this.submitting=!1,this.exData={scheduled_on_time:this.moment().startOf("day").set("hour",10)},this.preChecksDone=!0,this.stateId){case 2:this.preChecksDone=!1,this.$http.get("/packages/"+this.pkg.id+"/items").then(function(b){var c=b.data;a.packageItems=c});break;default:return}}},{key:"ok",value:function(){var a=this;this.submitting||(this.submitting=!0,this.$http.put("/packageItems/"+this.pkgItem.id+"/state",this.data).then(function(){return a.$uibModalInstance.close(a.data),a.submitting=!1,location.reload(!0)})["catch"](function(b){a.submitting=!1,a.changeStateError=b.error,a.toaster.pop("error",b.data.message)}))}}]),a}(),ChangeItemStateService=function(){function a(b,c){_classCallCheck(this,a),this.$uibModal=b,this.Session=c}return a.$inject=["$uibModal","Session"],_createClass(a,[{key:"$onInit",value:function(){this.states=this.Session.read("adminItem-states")}},{key:"open",value:function(a,b,c){var d=this,e=this.$uibModal.open({templateUrl:"app/directives/change-item-state/change-item-state.html",controller:ChangeItemStateController,controllerAs:"$ctrl",bindToController:"true",size:"md",resolve:{pkgItem:function(){return a},stateId:function(){return b},customerId:function(){return c}}});e.result.then(function(a){d.pkgItem.state_id=a.state_id,d.pkgItem.state_name=d.states[a.state_id].action})}}]),a}();angular.module("uiGenApp").service("ChangeItemState",ChangeItemStateService).factory("StateChange",["ChangeState","ChangeShipmentState",function(a,b){return{"package":a,shipment:b}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ChangeOrderStateController=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.order=d,this.Session=e,this.stateId=f,this.moment=g,this.toaster=i,this.customerId=h}return a.$inject=["$uibModalInstance","$http","order","Session","stateId","moment","customerId","toaster"],_createClass(a,[{key:"$onInit",value:function(){var a=this;switch(this.states=this.Session.read("adminOrder-states"),this.today=new Date,this.ui={checking:!1},this.submitting=!1,this.exData={scheduled_on_time:this.moment().startOf("day").set("hour",10)},this.paymentGateways={wire:1,cash:2},this.order.transaction_id&&this.$http.get("$/transactions/"+this.order.transaction_id+"/transaction").then(function(b){a.transactions=b.data}),this.preChecksDone=!0,this.stateId){case 2:this.preChecksDone=!1,this.$http.get("/orders/"+this.order.id+"/items").then(function(b){var c=b.data;a.orderItems=c});break;default:return}}},{key:"ok",value:function(){var a=this;if(!this.submitting){var b=63,c=45;if([b,c].includes(this.stateId))return this.toaster.pop("error","Please confirm using Pay admin");this.submitting=!0,this.data.state_id===b&&Number(this.transactions.payment_gateway_id)===this.paymentGateways.wire,this.error=null,this.$http.put("/orders/"+this.order.id,this.data).then(function(){a.$uibModalInstance.close(a.data),a.submitting=!1})["catch"](function(b){a.submitting=!1,a.changeStateError=b.error,a.toaster.pop("error",b.data.message)}),this.$http.put("/orders/"+this.order.id+"/state",this.data).then(function(){return a.$uibModalInstance.close(a.data),a.data.state_id===b&&a.$http.put("$/transactions/"+a.order.transaction_id+"?status=success"),a.submitting=!1,location.reload(!0)})["catch"](function(b){a.submitting=!1,a.changeStateError=b.error,a.toaster.pop("error",b.data.message)})}}}]),a}(),ChangeOrderStateService=function(){function a(b,c){_classCallCheck(this,a),this.$uibModal=b,this.Session=c}return a.$inject=["$uibModal","Session"],_createClass(a,[{key:"$onInit",value:function(){this.states=this.Session.read("adminOrder-states")}},{key:"open",value:function(a,b,c){var d=this,e=this.$uibModal.open({templateUrl:"app/directives/change-order-state/change-order-state.html",controller:ChangeOrderStateController,controllerAs:"$ctrl",bindToController:"true",size:"md",resolve:{order:function(){return a},stateId:function(){return b},customerId:function(){return c}}});e.result.then(function(a){d.order.state_id=a.state_id,d.order.state_name=d.states[a.state_id].action})}}]),a}();angular.module("uiGenApp").service("ChangeOrderState",ChangeOrderStateService);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ChangeShipmentStateController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.shipment=d,this.Session=e,this.toaster=i,this.stateId=f,this.moment=g,this.customerId=h,this.URLS=j,this.a=new AudioContext}return a.$inject=["$uibModalInstance","$http","shipment","Session","stateId","moment","customerId","toaster","URLS"],_createClass(a,[{key:"buzzer",value:function(a){var b=_slicedToArray({beep:[999,520,25],boop:[999,220,300],noise:[999,210,800]}[a],3),c=b[0],d=b[1],e=b[2],f=this.a,g=f.createOscillator(),h=f.createGain();g.connect(h),g.frequency.value=d,g.type="square",h.connect(f.destination),h.gain.value=.01*c,g.start(f.currentTime),g.stop(f.currentTime+.001*e)}},{key:"$onInit",value:function(){var a=this;switch(this.scanCompletedCount=0,this.errors={allPackageItemsScanned:"Please scan barcode of all the items"},this.validations={17:{allPackageItemsScanned:!1}},this.states=this.Session.read("adminShipment-states"),this.today=new Date,this.ui={checking:!1},this.submitting=!1,this.exData={scheduled_on_time:this.moment().startOf("day").set("hour",10)},this.preChecksDone=!0,this.paymentGateways={wire:1,cash:2},17===this.stateId&&this.getPackageItemsForValidation(),this.stateId){case 2:this.preChecksDone=!1,this.$http.get("/shipments/"+this.shipment.id+"/items").then(function(b){var c=b.data;a.packageItems=c});break;default:return}}},{key:"scan",value:function(a){this.error=null;var b=this.package_item_id;if(13===a.keyCode){var c=this.packageItems.findIndex(function(a){return a.id===Number(b)});c===-1||this.packageItems[c].scanned?(this.buzzer("boop"),this.error="You scanned #"+b+".Item not belongs to this ship request"):(this.buzzer("beep"),this.packageItems[c].scanned=!0,this.scanCompletedCount++,this.viewPhoto(this.packageItems[c].object)),this.package_item_id=""}this.validations[this.stateId].allPackageItemsScanned=this.packageItems.every(function(a){return a.scanned}),this.validations[this.stateId].allPackageItemsScanned&&this.buzzer("noise")}},{key:"getPackageItemsForValidation",value:function(){var a=this;this.$http.get("/shipments/"+this.shipment.id+"/validate").then(function(b){var c=b.data;a.packageItems=c})}},{key:"viewPhoto",value:function(a){var b=this;this.$http.get("/minio/viewObject",{params:{object:a}}).then(function(a){var c=a.data.url;b.scannedImage=c})}},{key:"viewItemPhoto",value:function(a){this.scannedImage=a}},{key:"ok",value:function(){var a=this;if(!this.submitting){var b=22,c=21,d=18;if(d===this.stateId){var e=this.shipment.Packages.every(function(a){return a.is_full_invoice_received});if(!e)return void this.toaster.pop("error","Package invoice not found")}if([b,c].includes(this.stateId))return this.toaster.pop("error","Please confirm using Pay admin");this.submitting=!0;var f=this.validations[this.stateId];this.error=null;var g=void 0,h=Object.keys(f||{}).every(function(a){return g=a,f[a]});return h?void this.$http.put("/shipments/"+this.shipment.id+"/state",this.data).then(function(){return a.$uibModalInstance.close(a.data),a.data.state_id===b&&a.$http.put("$/transactions/"+a.shipment.transaction_id+"?status=success"),a.submitting=!1,location.reload(!0)})["catch"](function(b){a.submitting=!1,a.changeStateError=b.error,a.toaster.pop("error",b.data.message)}):(this.error=this.errors[g],void(this.submitting=!1))}}}]),a}(),ChangeShipmentStateService=function(){function a(b,c){_classCallCheck(this,a),this.$uibModal=b,this.Session=c}return a.$inject=["$uibModal","Session"],_createClass(a,[{key:"$onInit",value:function(){this.states=this.Session.read("adminShipment-states")}},{key:"open",value:function(a,b,c){var d=this,e=this.$uibModal.open({templateUrl:"app/directives/change-shipment-state/change-shipment-state.html",controller:ChangeShipmentStateController,controllerAs:"$ctrl",bindToController:"true",size:"md",resolve:{shipment:function(){return a},stateId:function(){return b},customerId:function(){return c}}});e.result.then(function(a){d.shipment.state_id=a.state_id,d.shipment.state_name=d.states[a.state_id].action})}}]),a}();angular.module("uiGenApp").service("ChangeShipmentState",ChangeShipmentStateService);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ChangeStateController=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.pkg=d,this.Session=e,this.stateId=f,this.moment=g,this.toaster=i,this.customerId=h}return a.$inject=["$uibModalInstance","$http","pkg","Session","stateId","moment","customerId","toaster"],_createClass(a,[{key:"$onInit",value:function(){var a=this;switch(this.states=this.Session.read("adminStates"),this.today=new Date,this.ui={checking:!1},this.submitting=!1,this.exData={scheduled_on_time:this.moment().startOf("day").set("hour",10)},this.errors={upload_type:"Please Select Upload Type"},this.validations={54:{upload_type:!1}},this.preChecksDone=!0,this.stateId){case 2:this.preChecksDone=!1,this.$http.get("/packages/"+this.pkg.id+"/items").then(function(b){var c=b.data;a.packageItems=c});break;default:return}}},{key:"ok",value:function(){var a=this;if(!this.submitting){this.submitting=!0;var b=54,c=5;if(this.data.state_id===b&&(this.validations[this.stateId].upload_type=!!this.data.upload_type),this.data.state_id===c&&0===this.pkg.price_amount)return this.toaster.pop("error","Package amount is zero");var d=this.validations[this.stateId];this.error=null;var e=void 0,f=Object.keys(d||{}).every(function(a){return e=a,d[a]});if(!f)return this.error=this.errors[e],void(this.submitting=!1);this.$http.put("/packages/"+this.pkg.id,this.data).then(function(){a.$uibModalInstance.close(a.data),a.submitting=!1})["catch"](function(b){a.submitting=!1,a.changeStateError=b.error,a.toaster.pop("error",b.data.message)}),this.$http.put("/packages/"+this.pkg.id+"/state",this.data).then(function(){return a.$uibModalInstance.close(a.data),a.data.state_id===b&&a.$http.put("/packages/"+a.pkg.id),a.submitting=!1,location.reload(!0)})["catch"](function(b){a.submitting=!1,a.changeStateError=b.error,a.toaster.pop("error",b.data.message)})}}}]),a}(),ChangeStateService=function(){function a(b,c){_classCallCheck(this,a),this.$uibModal=b,this.Session=c}return a.$inject=["$uibModal","Session"],_createClass(a,[{key:"$onInit",value:function(){this.states=this.Session.read("adminStates")}},{key:"open",value:function(a,b,c){var d=this,e=this.$uibModal.open({templateUrl:"app/directives/change-state/change-state.html",controller:ChangeStateController,controllerAs:"$ctrl",bindToController:"true",size:"md",resolve:{pkg:function(){return a},stateId:function(){return b},customerId:function(){return c}}});e.result.then(function(a){d.pkg.state_id=a.state_id,d.pkg.state_name=d.states[a.state_id].action})}}]),a}();angular.module("uiGenApp").service("ChangeState",ChangeStateService).factory("StateChange",["ChangeState","ChangeShipmentState",function(a,b){return{"package":a,shipment:b}}]);var ClickToCopyController=function b(a,c,d){_classCallCheck(this,b),this.job=d,this.trustAsHtml=a.trustAsHtml,this.ok=function(){},this.cancel=function(){c.dismiss("cancel")}};ClickToCopyController.$inject=["$sce","$uibModalInstance","job"],angular.module("uiGenApp").controller("ClickToCopyController",ClickToCopyController),angular.module("uiGenApp").directive("tableOffset",function(){return{link:function(){$(".scrollableContainer").height($(window).height()-($(".scrollableContainer").position().top+85))}}});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ConfirmDialogController=["$uibModalInstance","title","description",function c(a,b,d){_classCallCheck(this,c),this.$uibModalInstance=a,this.title=b,this.description=d}],ConfirmDialogService=function(){function a(b){_classCallCheck(this,a),this.$uibModal=b}return a.$inject=["$uibModal"],_createClass(a,[{key:"open",value:function(a){var b=a.title,c=a.description,d=a.size,e=void 0===d?"sm":d;return this.$uibModal.open({size:e,animation:!0,templateUrl:"app/directives/confirm-dialog/confirm-dialog.html",controller:ConfirmDialogController,controllerAs:"$ctrl",resolve:{title:function(){return b},description:function(){return c}}}).result}}]),a}();angular.module("uiGenApp").service("ConfirmDialog",ConfirmDialogService);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),AccessCourierController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.URLS=b,this.$window=c,this.Session=d,this.$http=e,this.Auth=f,this.$onInIt()}return a.$inject=["URLS","$window","Session","$http","Auth"],_createClass(a,[{key:"$onInIt",value:function(){this.user=this.Session.read("adminUserinfo")}},{key:"accessCourier",value:function(){var a=this,b="get";return this.$http[b]("/users/"+this.user.id).then(function(b){var c=b.data;1===Number(c.is_courier_migrated)?a.signup():2===Number(c.is_courier_migrated)&&a.authorise()})}},{key:"signup",value:function(){var a=this,b=["id","salutation","first_name","last_name","email","phone","group_id","country_id"],c="post";
return this.$http[c]("&/users/register",_.pick(this.user,b)).then(function(){var b="put",c={is_courier_migrated:2};return a.$http[b]("/users/"+a.user.id,c).then(function(){a.authorise()})})}},{key:"authorise",value:function(){var a=5,b={grant_type:"loginAs",username:this.user.email,app_id:a},c="post";return this.$http[c]("~~/api/authorise",b).then(function(a){var b=a.data,c=window.open();c.location.href=b})}}]),a}();angular.module("uiGenApp").controller("AccessCourierController",AccessCourierController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),createCategoryController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.$stateParams=e,this.Session=d,this.PackageItemCategory=[],this.toaster=f}return a.$inject=["$uibModalInstance","$http","Session","$stateParams","toaster"],_createClass(a,[{key:"$onInit",value:function(){}},{key:"create",value:function(){var a=this;this.PackageItemCategory.name&&(this.$http.post("/packageItemCategories",{name:this.PackageItemCategory.name}).then(function(b){var c=b.data.message;a.toaster.pop("success",c)}),this.$uibModalInstance.close())}}]),a}(),createCategory=function(){function a(b,c){_classCallCheck(this,a),this.$uibModal=b,this.Session=c}return a.$inject=["$uibModal","Session"],_createClass(a,[{key:"open",value:function(){return this.$uibModal.open({templateUrl:"app/directives/createCategory/createCategory.html",controller:createCategoryController,controllerAs:"$ctrl",bindToController:"true",size:"md"})}}]),a}();angular.module("uiGenApp").service("createCategory",createCategory);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),createStoreController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.$stateParams=e,this.Session=d,this.data=[],this.toaster=f}return a.$inject=["$uibModalInstance","$http","Session","$stateParams","toaster"],_createClass(a,[{key:"create",value:function(){var a=this;this.data.name&&(this.$http.post("/stores",{name:this.data.name}).then(function(b){var c=b.data.name;a.toaster.pop("success",c+" Store created successfully","")}),this.$uibModalInstance.close())}}]),a}(),createStore=function(){function a(b,c){_classCallCheck(this,a),this.$uibModal=b,this.Session=c}return a.$inject=["$uibModal","Session"],_createClass(a,[{key:"open",value:function(){return this.$uibModal.open({templateUrl:"app/directives/createStore/createStore.html",controller:createStoreController,controllerAs:"$ctrl",bindToController:"true",size:"md"})}}]),a}();angular.module("uiGenApp").service("createStore",createStore),angular.module("uiGenApp").directive("directiveHeader",["ListModal",function(a){return{templateUrl:"app/directives/directive-header/directive-header.html",scope:{options:"=",app:"=",buttons:"=",page:"=",ui:"="},restrict:"EA",link:function(b){return Object.assign(b,{ListModal:a})}}}]);var DownloadResumeCtrl=function d(a,b,c,e,f){if(_classCallCheck(this,d),this.concat="true",angular.isArray(b)){var g=f.getAccessToken();1===b.length&&(this.downloadUrl=c.API+"/applicants/"+b[0]+"/download?access_token="+g),b.length>1&&(this.downloadUrl=c.API+"/applicants/download?access_token="+g+"&id="+b.join(",")),this.ok=function(){a.close(this.concat)},this.cancel=function(){a.dismiss("cancel")}}};DownloadResumeCtrl.$inject=["$uibModalInstance","ApplicantIds","URLS","$window","Session"],angular.module("uiGenApp").controller("DownloadResumeController",DownloadResumeCtrl);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),EmailCandidateController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.$http=b,this.$state=c,this.$stateParams=e,this.$uibModalInstance=d,this.toaster=f,this.candidateId=j,this.candidateName=h,this.candidateEmail=i,this.URLS=g,this.$onInit()}return a.$inject=["$http","$state","$uibModalInstance","$stateParams","toaster","URLS","candidateName","candidateEmail","candidateId"],_createClass(a,[{key:"$onInit",value:function(){this.email={},this.email.to=this.candidateEmail,this.email.name=this.candidateName,this.email.replyTo=JSON.parse(localStorage.getItem("adminUserinfo")).email_id}},{key:"cancel",value:function(){this.$uibModalInstance.dismiss("cancel")}},{key:"emailCandidate",value:function(){var a=this;return this.$http({url:this.URLS.CRUX_API+"/candidates/"+this.candidateId+"/email?source="+this.$stateParams.source,method:"POST",data:this.email}).then(function(){a.toaster.pop("success","Email Sent."),a.$uibModalInstance.close(!0)})["catch"](function(b){return a.toaster.pop("error","Something went wrong. Contact ShoppRe."),a.errorMessage=[409,400].indexOf(b.status)?b.data.message:b.statusText,null})}}]),a}();angular.module("uiGenApp").controller("EmailCandidateController",EmailCandidateController),angular.module("uiGenApp").directive("fullScreenContent",["$window","$document",function(a,b){return{templateUrl:"app/directives/full-screen-content/full-screen-content.html",restrict:"EA",link:function(){function a(){var a=0,c=angular.element("div.app-header.navbar").height(),d=b[0].body.clientHeight-c-a;angular.element("#fullscreen-content").css("height",d+"px"),angular.element(".app-content-body").css("padding-bottom","0")}$(window).on("resize",a),a()}}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d){_classCallCheck(this,a),this.$http=b,this.$timeout=c,this.Session=d,this.$onInit()}return a.$inject=["$http","$timeout","Session"],_createClass(a,[{key:"$onInit",value:function(){this.user=this.Session.read("adminUserinfo"),this.states=this.Session.read("states"),this.getList()}},{key:"getList",value:function(){var a=this;this.ui={loading:!0,scrollToBottom:!1},this.$http.get("/jobs/"+this.jobId+"/comments").then(function(b){var c=b.data;a.data=c,a.ui={loading:!1,scrollToBottom:!0}})}}]),a}();angular.module("uiGenApp").directive("jobComment",function(){return{templateUrl:"app/directives/job-comment/job-comment.html",restrict:"E",controller:a,controllerAs:"$ctrl",bindToController:!0,scope:{jobId:"@"}}})}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d){_classCallCheck(this,a),this.$http=b,this.$log=c,this.Session=d,this.$onInit()}return a.$inject=["$http","$log","Session"],_createClass(a,[{key:"$onInit",value:function(){this.user=this.Session.read("adminUserinfo")}}]),a}();angular.module("uiGenApp").directive("jobDetail",function(){return{templateUrl:"app/directives/job-detail/job-detail.html",restrict:"E",scope:{job:"="},controller:a,controllerAs:"$ctrl",bindToController:!0}})}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),JobPaymentController=function(){function a(b,c,d,e,f,g){var h=this;_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.$log=d,this.job=e,this.moment=g,this.awfTime=f&&this.moment(f),this.JOB_TYPE={0:"EMI - Standard",1:"Fixed - Standard",2:"Fixed - Customised",3:"EMI - Customised",4:"Designation - Fixed",5:"Designation - EMI"},this.$http.get("/jobs/"+this.job.id+"/clientPayments").then(function(a){var b=a.data,c=_.without(b[0].concat(b[1]),null,void 0);h.paymentDetails=c;var d=_.uniq(_.pluck(c,"start_time")).sort().reverse();h.groupsPaymentDetails=d;var e=_.uniq(c,function(a){return a.consultant_comment}),f=_.uniq(c,function(a){return a.internal_comment});h.paymentDetailsComments=_.without(_.pluck(e,"consultant_comment"),null),h.additionalComments=_.without(_.pluck(f,"internal_comment"),null),h.$http.get("/jobs/"+h.job.id+"/clientPaymentsDesigId").then(function(a){var b=a.data;h.jobDesignationId=b,h.clientPaymentDesigId=b})["catch"](function(a){return h.$log.error("Error while getting client payments designation id",a)})})["catch"](function(a){return h.$log.error("Error while getting client payments",a)}),this.active=!0,this.active1=!0,this._=_}return a.$inject=["$uibModalInstance","$http","$log","job","awfTime","moment"],_createClass(a,[{key:"isActiveAgreement",value:function(a){if(!this.awfTime)return!1;var b=this.awfTime.isBefore(this.moment(a.end_time)),c=this.awfTime.isAfter(this.moment(a.start_time));return b&&c}}]),a}();angular.module("uiGenApp").controller("JobPaymentController",JobPaymentController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),LogoutController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.URLS=b,this.$window=c,this.Session=d,this.$http=e,this.Auth=f}return a.$inject=["URLS","$window","Session","$http","Auth"],_createClass(a,[{key:"$onInit",value:function(){var a=this;return this.notify=this.Session.read("notify"),this.$http["delete"]("/notificationSubscriptions/"+this.Session.read("oneSignalPlayerId")).then(function(){return a.Auth.logout()}).then(function(){return a.cleanup()},function(){return a.cleanup()})["catch"](function(){return a.cleanup()})}},{key:"cleanup",value:function(){localStorage.removeItem("adminOauth"),localStorage.removeItem("adminShipment-states"),localStorage.removeItem("adminStates"),localStorage.removeItem("adminUserinfo"),localStorage.removeItem("afterShipCarriers"),localStorage.removeItem("adminOrder-states"),localStorage.removeItem("adminItem-states");var a=this.URLS,b=a.WWW,c=(a.OAUTH_CLIENT_ID,this.$window.location);c.href=b+"/logout"}}]),a}();angular.module("uiGenApp").controller("LogoutController",LogoutController),angular.module("uiGenApp").directive("ngCropperjs",["$q","$parse",function(a,b){return{restrict:"A",templateUrl:"app/directives/ng-cropperjs/ng-cropperjs.html",replace:!0,scope:{options:"=ngCropperOptions",proxy:"=ngCropperProxy",showEvent:"=ngCropperShow",hideEvent:"=ngCropperHide"},link:function(a,b,c){console.log("link called",b),a.upload=function(){console.log("upload started")},a.done=function(){a.STATUS="PREVIEW",console.log("Preview Loaded"),a.FINISHED=!0,a.src=a.cropper.getCroppedCanvas().toBlob(function(b){a.loadImage(b)}),console.log("cropped",data)},a.loadImage=function(b){var c=new FileReader;c.onload=function(b){$("#image").attr("src",b.target.result),a.STATUS="PREVIEW",a.$$phase&&a.$apply()},c.readAsDataURL(b)},a.reset=function(){a.STATUS="INIT"},a.startCropping=function(){a.STATUS="CROP",console.log("startCropping");var b=document.getElementById("image"),c=document.getElementById("canvas");a.cropper=new Cropper(c||b,{modal:!0,viewMode:1,ready:function(){a.STATUS="CROP"},crop:function(a){console.log(a.detail)}})},a.$init=function(){a.STATUS="INIT",console.log("init");var b=document.getElementById("video");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(a){b.srcObject=a,b.play()})},a.$init(),a.snap=function(){console.log("snapppp");var b=document.getElementById("canvas"),c=b.getContext("2d"),d=document.getElementById("video");a.STATUS="PREVIEW",c.drawImage(d,0,0,640,480)}}}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),NotifyCountController=function(){function a(b,c,d,e){_classCallCheck(this,a),this.$http=b,this.$scope=c,this.Session=d,this.URLS=e,this.$onInit()}return a.$inject=["$http","$scope","Session","URLS"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.Session.isAuthenticated()&&this.$scope.$on("UpdateNotify",function(b,c){return a.counts=c})}},{key:"fetchNotificationCount",value:function(){var a=this,b=this.Session.read("adminUserinfo");return b?this.$http.get(this.URLS.QNOTIFY_SERVER+"/users/"+b.id+"/notifications/count",{ignoreAuthModule:!0}).then(function(b){var c=b.data;return a.counts=c}):setTimeout(this.fetchNotificationCount,1e3)}}]),a}();angular.module("uiGenApp").directive("notifyCount",function(){return{templateUrl:"app/directives/notify-count/notify-count.html",restrict:"E",scope:{},controller:NotifyCountController,controllerAs:"$ctrl"}});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),OrderController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.URLS=b,this.$window=c,this.Session=d,this.$http=e,this.Auth=f,this.$onInIt()}return a.$inject=["URLS","$window","Session","$http","Auth"],_createClass(a,[{key:"$onInIt",value:function(){this.user=this.Session.read("adminUserinfo")}},{key:"accessOrder",value:function(){this.authorise()}},{key:"authorise",value:function(){var a=this,b=13,c={grant_type:"loginAs",username:this.user.email,app_id:b},d="post";return this.$http[d]("~~/api/authorise",c).then(function(b){var c=b.data;a.$window.open(c,"_blank")})}}]),a}();angular.module("uiGenApp").controller("OrderController",OrderController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),OrderFilterController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.$uibModalInstance=b,this.$scope=c,this.$filter=d,this.Session=e,this.all=f}return a.$inject=["$uibModalInstance","$scope","$filter","Session","all"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.user=this.Session.read("adminUserinfo"),this.facet="",this.ui={selected:{},selectAll:{},filtered:{}},Object.keys(this.all).forEach(function(b){a.ui.selected[b]=0,a.all[b]&&a.all[b].forEach(function(c){return a.ui.selected[b]+=c.checked&&1||0})}),this.facet=Object.keys(this.all)[0],this.ui.filtered=this.all}},{key:"reset",value:function(){var a=this;Object.keys(this.all).forEach(function(b){a.all[b].forEach(function(c){var d=c;return a.ui.selectAll[b]=!1,a.ui.selected[b]=0,d.checked=!1})}),this.ui.filtered=this.all}},{key:"selectAll",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?"states":arguments[0];this.ui.selected[b]=0,this.all[b].forEach(function(c){var d=c;d.checked=a.ui.selectAll[b],d.checked&&(a.ui.selected[b]+=1)})}},{key:"changed",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"states":arguments[1];a||(this.ui.selectAll[b]=!1),this.ui.selected[b]+=a&&1||-1}},{key:"changedStatus",value:function(a,b,c){this.ui.filtered[c].map(function(a){return b.id===a.id&&b.checked===!a.checked?!a.checked:""})}},{key:"apply",value:function(){var a=this;this.$uibModalInstance.close(Object.keys(this.all).reduce(function(b,c){return Object.assign(b,_defineProperty({},c,"ctc"!==c?a.all[c]&&a.all[c].filter(function(a){return a.checked}).map(function(a){return a.id?Number(a.id):a.name}):a.all[c].map(function(a){return a.val?Number(a.val):""})))},{}))}}]),a}(),OrderFilter=function(){function a(b){_classCallCheck(this,a),this.$uibModal=b}return a.$inject=["$uibModal"],_createClass(a,[{key:"open",value:function(a){var b=a.all,c=void 0===b?[]:b;return this.$uibModal.open({size:"applicant-state-filter lg",windowTopClass:"bg-black-opacity",animation:!0,templateUrl:"app/directives/order-filter/order-filter.html",controller:"OrderFilterController",controllerAs:"$ctrl",resolve:{all:function(){return c}}}).result}}]),a}();angular.module("uiGenApp").controller("OrderFilterController",OrderFilterController).service("OrderFilter",OrderFilter);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageFilterController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.$uibModalInstance=b,this.$scope=c,this.$filter=d,this.Session=e,this.all=f}return a.$inject=["$uibModalInstance","$scope","$filter","Session","all"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.user=this.Session.read("adminUserinfo"),this.facet="",this.ui={selected:{},selectAll:{},filtered:{}},Object.keys(this.all).forEach(function(b){a.ui.selected[b]=0,a.all[b]&&a.all[b].forEach(function(c){return a.ui.selected[b]+=c.checked&&1||0})}),this.facet=Object.keys(this.all)[0],this.ui.filtered=this.all}},{key:"reset",value:function(){var a=this;Object.keys(this.all).forEach(function(b){a.all[b].forEach(function(c){var d=c;return a.ui.selectAll[b]=!1,a.ui.selected[b]=0,d.checked=!1})}),this.ui.filtered=this.all}},{key:"selectAll",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?"states":arguments[0];this.ui.selected[b]=0,this.all[b].forEach(function(c){var d=c;d.checked=a.ui.selectAll[b],d.checked&&(a.ui.selected[b]+=1)})}},{key:"changed",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"states":arguments[1];a||(this.ui.selectAll[b]=!1),this.ui.selected[b]+=a&&1||-1}},{key:"changedStatus",value:function(a,b,c){this.ui.filtered[c].map(function(a){return b.id===a.id&&b.checked===!a.checked?!a.checked:""})}},{key:"apply",value:function(){var a=this;this.$uibModalInstance.close(Object.keys(this.all).reduce(function(b,c){return Object.assign(b,_defineProperty({},c,"ctc"!==c?a.all[c]&&a.all[c].filter(function(a){return a.checked}).map(function(a){return a.id?Number(a.id):a.name}):a.all[c].map(function(a){return a.val?Number(a.val):""})))},{}))}}]),a}(),PackageFilter=function(){function a(b){_classCallCheck(this,a),this.$uibModal=b}return a.$inject=["$uibModal"],_createClass(a,[{key:"open",value:function(a){var b=a.all,c=void 0===b?[]:b;return this.$uibModal.open({size:"applicant-state-filter lg",windowTopClass:"bg-black-opacity",animation:!0,templateUrl:"app/directives/package-filter/package-filter.html",controller:"PackageFilterController",controllerAs:"$ctrl",resolve:{all:function(){return c}}}).result}}]),a}();angular.module("uiGenApp").controller("PackageFilterController",PackageFilterController).service("PackageFilter",PackageFilter);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.$http=c,this.$state=d,this.moment=f,this.$uibModalInstance=b,this.applicant=e}return a.$inject=["$uibModalInstance","$http","$state","applicant","moment"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.data={id:this.applicant.id},this.today=new Date,this.uploading=!1,this.dateOptions={minDate:new Date},this.scheduled_on_time=this.moment().startOf("day").set("hour",10),this.Clients={select:function(b){b.id&&(a.Clients.id=b.id,a.Clients.model=b.name)},get:function(b){return a.$http.get("/search",{params:{q:b,type:"partner_clients"}})},noResults:!1,loadingClients:!1},this.Positions={select:function(b){b.id&&(a.Positions.id=b.id,a.Positions.model=b.name,a.Positions.is_drive=b.is_drive)},get:function(b){var c=a.Clients.id;if(!c)return[];var d="_root_";return a.$http.get("/search",{params:{q:b,type:"partner_jobs",client_id:c,is_drive:a.applicant[d].is_drive}}).then(function(a){var b=a.data;return b})},noResults:!1,loadingClients:!1}}},{key:"setScheduledOn",value:function(){this.data.scheduled_on=this.moment(this.scheduled_on_date).set("hour",10).set("minute",0).set("second",0)}},{key:"submit",value:function(){var a=this;return this.uploading=!0,this.$http.post("/jobs/"+this.Positions.id+"/applicants/reapply",this.data).then(function(b){var c=b.data;return a.uploading=!1,a.$uibModalInstance.close(!0),a.$state.go("applicant.view",{applicantId:c.id})})["catch"](function(b){a.uploading=!1,a.error=b.data&&b.data.message||b.statusText})}}]),a}();angular.module("uiGenApp").controller("ReApplyController",a)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b){_classCallCheck(this,a),this.$uibModal=b}return a.$inject=["$uibModal"],_createClass(a,[{key:"open",value:function(a){this.$uibModal.open({templateUrl:"app/directives/reapply/reapply.html",controller:"ReApplyController",controllerAs:"$ctrl",resolve:{applicant:a}})}}]),a}();angular.module("uiGenApp").service("ReApply",a)}(),angular.module("uiGenApp").directive("reauth",function(){return{templateUrl:"app/directives/reauth/reauth.html",restrict:"EA"}});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ShipmentFilterController=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.$uibModalInstance=b,this.$scope=c,this.$filter=d,this.Session=e,this.all=f}return a.$inject=["$uibModalInstance","$scope","$filter","Session","all"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.user=this.Session.read("adminUserinfo"),this.facet="",this.ui={selected:{},selectAll:{},filtered:{}},Object.keys(this.all).forEach(function(b){a.ui.selected[b]=0,a.all[b]&&a.all[b].forEach(function(c){return a.ui.selected[b]+=c.checked&&1||0})}),this.facet=Object.keys(this.all)[0],this.ui.filtered=this.all}},{key:"reset",value:function(){var a=this;Object.keys(this.all).forEach(function(b){a.all[b].forEach(function(c){var d=c;return a.ui.selectAll[b]=!1,a.ui.selected[b]=0,d.checked=!1})}),this.ui.filtered=this.all}},{key:"selectAll",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?"states":arguments[0];this.ui.selected[b]=0,this.all[b].forEach(function(c){var d=c;d.checked=a.ui.selectAll[b],d.checked&&(a.ui.selected[b]+=1)})}},{key:"changed",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"states":arguments[1];a||(this.ui.selectAll[b]=!1),this.ui.selected[b]+=a&&1||-1}},{key:"changedStatus",value:function(a,b,c){this.ui.filtered[c].map(function(a){return b.id===a.id&&b.checked===!a.checked?!a.checked:""})}},{key:"apply",value:function(){var a=this;this.$uibModalInstance.close(Object.keys(this.all).reduce(function(b,c){return Object.assign(b,_defineProperty({},c,"ctc"!==c?a.all[c]&&a.all[c].filter(function(a){return a.checked}).map(function(a){return a.id?Number(a.id):a.name}):a.all[c].map(function(a){return a.val?Number(a.val):""})))},{}))}}]),a}(),ShipmentFilter=function(){function a(b){_classCallCheck(this,a),this.$uibModal=b}return a.$inject=["$uibModal"],_createClass(a,[{key:"open",value:function(a){var b=a.all,c=void 0===b?[]:b;return this.$uibModal.open({size:"applicant-state-filter lg",windowTopClass:"bg-black-opacity",animation:!0,templateUrl:"app/directives/shipment-filter/shipment-filter.html",controller:"ShipmentFilterController",controllerAs:"$ctrl",resolve:{all:function(){return c}}}).result}}]),a}();angular.module("uiGenApp").controller("ShipmentFilterController",ShipmentFilterController).service("ShipmentFilter",ShipmentFilter);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),SocialShareController=function(){function a(b,c,d,e){_classCallCheck(this,a),this.$uibModalInstance=b,this.URLS=c,this.Session=d,this.job=e}return a.$inject=["$uibModalInstance","URLS","Session","job"],_createClass(a,[{key:"$onInit",value:function(){this.user=this.Session.read("adminUserinfo");var a=btoa(this.user.id);this.jobLink=this.URLS.APPLY+"/"+a+"/"+this.job.job_code,this.links={google:"https://plus.google.com/share?url="+this.jobLink,facebook:"https://www.facebook.com/sharer/sharer.php?u="+this.jobLink,twitter:"http://twitter.com/share?url="+this.jobLink,linkedIn:"https://www.linkedin.com/shareArticle?url="+this.jobLink+"&source=Quezx.com"}}}]),a}();angular.module("uiGenApp").controller("SocialShareController",SocialShareController),angular.module("uiGenApp").directive("searchFocus",["$timeout",function(a){return{restrict:"A",scope:{ui:"="},link:function(b,c){b.ui&&Object.assign(b.ui,{setfocus:function(){return a(function(){return c[0].focus()})}})}}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.$uibModalInstance=b,this.$http=c,this.$window=d,this.moment=e,this.job=f}return a.$inject=["$uibModalInstance","$http","$window","moment","job"],_createClass(a,[{key:"$onInit",value:function(){this.data={},this.today=new Date,this.uploading=!1,this.exData={scheduled_on_time:moment().startOf("day").set("hour",10)}}},{key:"setScheduledOn",value:function(){this.data.scheduled_on=moment(this.exData.scheduled_on_date).set("hour",10).set("minute",0).set("second",0)}},{key:"upload",value:function(){var a=this;return this.uploading?null:(this.uploading=!0,this.$http.post("/jobs/"+this.job.id+"/applicants/driveCreate",this.data).then(function(b){var c=b.data,d=c.url,e=c.failed,f=c.total;return a.uploading=!1,e?a.ui={url:d,failed:e,total:f}:(a.$uibModalInstance.close(a.data),a.$window.location.reload(!0))})["catch"](function(b){var c=b.data;a.uploading=!1,a.error=c.message||"Something went wrong, please contact Quezx.com."}))}}]),a}(),b=function(){function b(a){_classCallCheck(this,b),this.$uibModal=a}return b.$inject=["$uibModal"],_createClass(b,[{key:"open",value:function(b){this.$uibModal.open({templateUrl:"app/directives/upload-excel/upload-excel.html",controller:a,controllerAs:"$ctrl",resolve:{job:function(){return b}}})}}]),b}();angular.module("uiGenApp").service("UploadExcel",b)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ViewPhotoController=["$uibModalInstance","$http","Session","$stateParams","photo","URLS",function e(a,b,c,d,f,g){_classCallCheck(this,e),this.$uibModalInstance=a,this.$http=b,this.$stateParams=d,this.Session=c,this.URLS=g,this.photoUrl=f}],ViewPhotoService=function(){function a(b,c){_classCallCheck(this,a),this.$uibModal=b,this.Session=c}return a.$inject=["$uibModal","Session"],_createClass(a,[{key:"open",value:function(a){return this.$uibModal.open({templateUrl:"app/directives/viewPhoto/viewPhoto.html",controller:ViewPhotoController,controllerAs:"$ctrl",bindToController:"true",size:"md",resolve:{photo:function(){return a}}})}}]),a}();angular.module("uiGenApp").service("ViewPhotoService",ViewPhotoService),angular.module("uiGenApp").run(["$rootScope","Auth","authService","AUTH_EVENTS","Session","$state","$window","URLS","User","$uibModal",function(a,b,c,d,e,f,g,h,i,j){var k=g.location;return a.$on("$stateChangeStart",function(b,c){return e.isAuthenticated()||"access"===c.name.split(".")[0]?e.isAuthenticated()&&i.adminUserinfo&&i.adminUserinfo.isBlocked&&c.name!==i.adminUserinfo.whatBlocked[0].state?(b.preventDefault(),f.go(i.adminUserinfo.whatBlocked[0].state)):e.isAuthenticated()&&"access.oauth"===c.name?(b.preventDefault(),f.go("packages.index")):a.$broadcast("show-announcement",c):(b.preventDefault(),a.$broadcast(d.notAuthenticated),Object.assign(g.location,{href:h.OAUTH+"&state="+k.pathname}),null)}),a.$on(d.loginSuccess,function(a,b){return angular.noop(a),angular.noop(b)}),a.$on(d.loginRequired,function(){e.isAuthenticated()&&b.refreshToken().then(function(){c.loginConfirmed("success",function(a){var b=a;return b.headers.Authorization="Bearer "+e.getAccessToken(),b})},function(a){return 400===a.status&&j.open({animation:!0,templateUrl:"app/directives/reauth/reauth.html",controller:function(){e.destroy();var a=this;a.href=h.OAUTH+"&state="+k.pathname},controllerAs:"ReAuth",backdrop:"static"})})})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e){_classCallCheck(this,a),this.$window=b,this.moment=c,this.Session=d,this.URLS=e}return a.$inject=["$window","moment","Session","URLS"],_createClass(a,[{key:"download",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?"":arguments[1],c=Object.assign({},a,{xlsx:!0,offset:0,limit:1e4}),d=this.Session.read("adminOauth"),e=d.access_token,f=""+this.URLS.API+(b?"/shipments/"+b:"")+"/packages?"+Object.keys(c).map(function(a){return a+"="+encodeURIComponent(c[a])}).join("&")+"&access_token="+e;this.$window.open(f,"_blank")}}]),a}();angular.module("uiGenApp").service("ExcelDownload",a)}(),angular.module("uiGenApp").factory("QCONFIG",function(){return{PACKAGE_STATES:["TASKS","FEEDBACK","COMPLETED","ALL","INCOMING"],ORDER_STATES:["TASKS","FEEDBACK","COMPLETED","ALL"],USER_GROUPS:[{id:1,name:"ADMINS"},{id:2,name:"CUSTOMERS"}],MANAGE_JD_STATES:["New","Accepted","Hidden","Rejected","ALL"],SHIPMENT_STATES:["IN_REVIEW","IN_QUEUE","SENT","ALL"],PACKAGE_STATE_IDS:{PACKAGE_ITEMS_UPLOAD_PENDING:1,AWAITING_VERIFICATION:2,CUSTOMER_INPUT:3,IN_REVIEW:4,READY_TO_SHIP:5,DAMAGED:6,RETURN_REQUEST_FROM_CUSTOMER:7,RETURN_COMPLETED:8,PS_RETURN_REQUESTED:9,PS_REFUND_RECIEVED:10,SPLIT_PACKAGE_REQUESTED_BY_CUSTOMER:11,READY_FOR_SPLIT_INTERNALLY:12,DISCARD_COMPLETED:13,ADDED_SHIPMENT:14,CUSTOMER_REQUESTED_FOR_DISCARD:15,STANDARD_PHOTO_REQUEST:52,ADVANCED_PHOTO_REQUEST:53,ORDER_CREATED:42,ORDER_CANCELLED:43,PAYMENT_INITIATED:44,PAYMENT_FAILED:45,PAYMENT_COMPLETED:46,ORDER_PLACED:48,OUT_OF_STOCK:49,REFUNDED_TO_WALLET:50,REFUNDED_TO_BANK_ACCOUNT:51,AWAITING_PACKAGE:47,UPLOAD_INVOICE_REQUESTED:54,INCOMING_PACKAGE:59},SHIPMENT_STATE_IDS:{PACKAGING_REQUESTED:16,SCANNING_COMPLETED:17,PAYMENT_REQUESTED:18,PAYMENT_INITIATED:19,PAYMENT_COMPLETED:20,PAYMENT_FAILED:21,PAYMENT_CONFIRMED:22,UPSTREAM_SHIPMENT_REQUEST_CREATED:23,SHIPMENT_HANDED:24,SHIPMENT_IN_TRANSIT:25,SHIPMENT_MANUAL_FOLLOW_UP:26,SHIPMENT_LOST:27,CUSTOM_ON_HOLD:28,WRONG_ADDRESS:29,SHIPMENT_REJECTED_BY_CUSTOMER:30,RTO_REQUESTED:31,
RAISE_SHIPMENT_LOST_CLAIM:32,PENALTY_PAYMENT_REQUESTED:33,RETURN_TO_ORIGIN:34,AMOUNT_RECEIVED_FROM_UPSTREAM:35,PENALTY_PAYMENT_DONE:36,WRONG_ADDRESS_FOLLOW_UP:37,CLAIM_PROCESSED_TO_CUSTOMER:38,CUSTOMER_ACKNOWLEDGEMENT_RECEIVED:39,SHIPMENT_DELIVERED:40,SHIPMENT_CANCELLED:41,SHIPMENT_DELETED:55},ORDER_STATE_IDS:{ORDER_CREATED:42,ORDER_CANCELLED:43,PAYMENT_INITIATED:44,PAYMENT_FAILED:45,PAYMENT_COMPLETED:46,AWAITING_PACKAGE:47,ORDER_PLACED:48,OUT_OF_STOCK:49,REFUNDED_TO_WALLET:50,REFUNDED_TO_BANK_ACCOUNT:51,ORDER_DELETED:62,PAYMENT_CONFIRMED:63,ORDER_PROCEED:64,PRICE_CHANGED:65,IN_TRANSIT:66,AWAITING_FOR_STOCK:67,ORDER_COMPLETED:68,OTHER_ITEMS_PROCEED:69,AWAITING_FOR_ORDER:70,ORDER_CANCELLED_BY_SELLER:77},PACKAGE_ITEM_STATE_IDS:{CUSTOMER_REQUESTED_FOR_DISCARD:82,READY_TO_DISCARD_INTERNALLY:83,ITEM_SOLD:84,REMOVED_FROM_WAREHOUSE:85,RETURN_REQUESTED_BY_CUSTOMER:86,RETURN_COMPLETED:87,READY_FOR_RETURN_INTERNALLY:88,ADVANCED_PHOTO_REQUESTED:91,ADVANCED_PHOTO_COMPLETED:92,CUSTOMER_CANCELLED_DISCARD:93,CUSTOMER_CANCELLED_RETURN:94,CUSTOMER_REQUESTED_FOR_SPLIT:96,READY_TO_SPLIT_INTERNALLY:97,SPLIT_COMPLETED:98,PICKUP_NOT_DONE:99},CARTON_BOX:[{amount:14.5,kg:"2.5 - kg"},{amount:23,kg:"5.5 - kg"},{amount:35,kg:"10.5 - kg"},{amount:40.5,kg:"15.5 - kg"},{amount:58.5,kg:"17.5 - kg"},{amount:10,kg:"Other"}]}}),angular.module("uiGenApp").factory("S3",["$http","toaster","URLS",function(a,b,c){return{upload:function(d,e,f){return a.get("/minio/presignedUrl",{params:{filename:d.name.toLowerCase()}}).then(function(g){var h=g.data,i=h.object,j=h.url,k=new XMLHttpRequest;return k.open("PUT",j,!0),k.send(d),k.onload=function(){200===k.status&&(b.pop("success","File uploaded"),Object.assign(e,{object:i}),Object.assign(f,{uploadingPhotos:!1}),a.post("/minio/thumb",{object:i}).then(function(){var a=c.CDN+"/shoppre/"+e.object.replace(".","-thumb.");b.pop("success","Conversion done"),Object.assign(e,{object_thumb:a})})["catch"](function(){return b.pop("error","Error while uploading file")}))},i})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadAdvanced:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(a){var f=a.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d,{object_advanced:g}),Object.assign(e,{uploadingPhotos:!1}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadInvoice:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(a){var f=a.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d,{object_invoice:g}),Object.assign(e,{uploadingPhotos:!1}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadEcommerce:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(a){var f=a.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d,{object_ecommerce:g}),Object.assign(e,{uploadingPhotos:!1}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadOcr:function(d,e,f){return a.get("/minio/presignedUrl",{params:{filename:d.name.toLowerCase()}}).then(function(g){var h=g.data,i=h.object,j=h.url,k=new XMLHttpRequest;return k.open("PUT",j,!0),k.send(d),k.onload=function(){200===k.status&&(b.pop("success","File uploaded"),Object.assign(e,{object:i}),a.get(c.OCR+"/api/visions",{params:{path:i,field:"SA-"}}).then(function(a){var b=a.data;Object.assign(e,{vision:b})})["catch"](function(a){b.pop("error",a.data.message)}),Object.assign(f,{uploadingPhotos:!1}),a.post("/minio/thumb",{object:i}).then(function(){var a=c.CDN+"/shoppre/"+e.object.replace(".","-thumb.");b.pop("success","Conversion done"),Object.assign(e,{object_thumb:a})})["catch"](function(){return b.pop("error","Error while uploading file")}))},i})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadShipmentPhoto:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(e){var f=e.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d.shipmentItemPhotos.push(g)),a.get("/minio/viewObject",{params:{object:g}}).then(function(a){Object.assign(d.shipmentItemSignedPhotos.push({shipmentItemSignedPhotos:a.data.url}))}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})}}}]),angular.module("uiGenApp").factory("URLS",function(){var a=window.location,b=a.host,c=a.protocol,d=c+"//"+(b.includes("staging")?b.substr(0,b.indexOf("-")+1):""),e=""+b.substr(b.indexOf(".")+1),f=(""+e.substr(e.indexOf(".")+1),"parcel"),g="admin",h=f+"-"+g,i=function(a){return""+d+a+"."+e},j=i(f),k=i("login");return{PREFIX:d,PROJECT:f,OAUTH_CLIENT_ID:h,UI_URL:j,DOMAIN:e,LOGIN:k,PARCEL:i("parcel"),PAY:i("pay"),ENGAGE:i("engage"),WWW:i("www"),COURIER:i("courier"),LOGISTICS:i("logistics"),WALLET:i("wallet"),OCR:i("ocr"),CDN:d+"cdn."+e,OAUTH:k+"/authorise?client_id="+h+"&response_type=code&"+("redirect_uri="+j+"/"+g+"/access/oauth"),HELP:"https://ship.shoppre.com"}}),angular.module("uiGenApp").factory("AuthInterceptor",["Session","URLS",function(a,b){return{request:function(c){var d,e=c;"/"===e.url[0]&&(e.url=b.PARCEL+"/api"+e.url);var f="#",g="$",h="~",i="&",j="%",k="*",l=(d={},_defineProperty(d,f,b.ENGAGE),_defineProperty(d,g,b.PAY),_defineProperty(d,h,b.LOGIN),_defineProperty(d,i,b.COURIER),_defineProperty(d,j,b.LOGISTICS),_defineProperty(d,k,b.WALLET),d),m=e.url[0],n=Object.keys(l).reduce(function(a,b){return Object.assign(a,_defineProperty({},b,!0))},{});return"~"===m&&"~"===e.url[0]?e.url=""+b.LOGIN+e.url.substr(2):n[m]&&(e.url=l[m]+"/api"+e.url.substr(1)),c.ignoreAuthModule?c:(a.isAuthenticated()&&(e.headers.Authorization="Bearer "+a.getAccessToken()),e)}}}]).config(["$httpProvider",function(a){return a.interceptors.push("AuthInterceptor")}]),angular.module("qui.core").factory("Auth",["$log","$http","$q","Session","URLS",function(a,b,c,d,e){var f={},g=!1;return f.login=function(a){var e="~~/oauth/token";return b.post(e,a,{ignoreAuthModule:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}}).then(function(a){return d.create("adminOauth",a.data)})["catch"](function(a){return d.destroy(),c.reject(a.data)})},f.refreshToken=function(){if(g)return a.warn("Refresh token request already sent."),c.reject({warning:"Refresh token request already sent."});g=!0;var e="~~/oauth/token";return b.post(e,{refresh_token:d.read("adminOauth").refresh_token},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")},ignoreAuthModule:!0}).then(function(a){return d.create("adminOauth",a.data),g=!1,c.resolve(a)})["catch"](function(a){return g=!1,c.reject(a)})},f.logout=function(){var a="~~/oauth/revoke";return b.post(a,{access_token:d.getAccessToken()},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}}).then(function(a){return d.destroy(),a.data},function(a){return d.destroy(),c.reject(a.data)})},f.setSessionData=function(){return c.all([b.get("/users/me").then(function(a){return d.create("adminUserinfo",a.data)}),b.get("/users/states?type=PACKAGE").then(function(a){return d.create("adminStates",a.data)}),b.get("/users/states?type=SHIPMENT").then(function(a){return d.create("adminShipment-states",a.data)}),b.get("/afterShipCarriers").then(function(a){return d.create("afterShipCarriers",a.data)}),b.get("/users/states?type=ORDER").then(function(a){return d.create("adminOrder-states",a.data)}),b.get("/users/states?type=PACKAGE_ITEM").then(function(a){return d.create("adminItem-states",a.data)})])},f}]),angular.module("qui.core").constant("AUTH_EVENTS",{loginConfirmed:"event:auth-loginConfirmed",loginCancelled:"event:auth-loginCancelled",logoutConfirmed:"event:auth-logoutConfirmed",loginRequired:"event:auth-loginRequired",forbidden:"event:auth-forbidden"}),angular.module("qui.core").constant("CURRENCY",{USD:"USD United States Dollars",EUR:"EUR Euro",CAD:"CAD Canada Dollars",GBP:"GBP United Kingdom Pounds",DEM:"DEM Germany Deutsche Marks",FRF:"FRF France Francs",JPY:"JPY Japan Yen",NLG:"NLG Netherlands Guilders",ITL:"ITL Italy Lira",CHF:"CHF Switzerland Francs",DZD:"DZD Algeria Dinars",ARP:"ARP Argentina Pesos",AUD:"AUD Australia Dollars",ATS:"ATS Austria Schillings",BSD:"BSD Bahamas Dollars",BBD:"BBD Barbados Dollars",BEF:"BEF Belgium Francs",BMD:"BMD Bermuda Dollars",BRR:"BRR Brazil Real",BGL:"BGL Bulgaria Lev",CLP:"CLP Chile Pesos",CNY:"CNY China Yuan Renmimbi",CYP:"CYP Cyprus Pounds",CSK:"CSK Czech Republic Koruna",DKK:"DKK Denmark Kroner",XCD:"XCD Eastern Caribbean Dollars",EGP:"EGP Egypt Pounds",FJD:"FJD Fiji Dollars",FIM:"FIM Finland Markka",XAU:"XAU Gold Ounces",GRD:"GRD Greece Drachmas",HKD:"HKD Hong Kong Dollars",HUF:"HUF Hungary Forint",ISK:"ISK Iceland Krona",IDR:"IDR Indonesia Rupiah",IEP:"IEP Ireland Punt",ILS:"ILS Israel New Shekels",JMD:"JMD Jamaica Dollars",JOD:"JOD Jordan Dinar",LBP:"LBP Lebanon Pounds",LUF:"LUF Luxembourg Francs",MYR:"MYR Malaysia Ringgit",MXP:"MXP Mexico Pesos",NZD:"NZD New Zealand Dollars",NOK:"NOK Norway Kroner",PKR:"PKR Pakistan Rupees",XPD:"XPD Palladium Ounces",PHP:"Philippines Pesos",XPT:"XPT Platinum Ounces",PLZ:"PLZ Poland Zloty",PTE:"PTE Portugal Escudo",ROL:"ROL Romania Leu",RUR:"RUR Russia Rubles",SAR:"SAR Saudi Arabia Riyal",XAG:"XAG Silver Ounces",SGD:"SGD Singapore Dollars",SKK:"SKK Slovakia Koruna",ZAR:"ZAR South Africa Rand",KRW:"KRW South Korea Won",ESP:"ESP Spain Pesetas",XDR:"XDR Special Drawing Right (IMF)",SDD:"SDD Sudan Dinar",SEK:"SEK Sweden Krona",TWD:"TWD Taiwan Dollars",THB:"THB Thailand Baht",TTD:"TTD Trinidad and Tobago Dollars",TRL:"TRL Turkey Lira",VEB:"VEB Venezuela Bolivar",ZMK:"ZMK Zambia Kwacha"}),angular.module("uiGenApp").factory("LoginAs",["$http","toaster","$window",function(a,b,c){return{init:function(d){return a.post("~~/api/authorise",{grant_type:"loginAs",username:d,app_id:3}).then(function(a){var b=a.data;c.open(b)})["catch"](function(){return b.pop("error","Unexpercted error")})}}}]),angular.module("qui.core").factory("moment",["$window",function(a){return a.moment}]),angular.module("uiGenApp").directive("ngImageCompress",["$q","toaster",function(a,b){var c=window.URL||window.webkitURL,d=function(a,b){var c=b.resizeType,d=100*b.resizeQuality||70,e="image/jpeg";void 0!==c&&"png"===c&&(e="image/png");var f=b.resizeMaxHeight||300,g=b.resizeMaxWidth||250,h=a.height,i=a.width;i>h?i>g&&(h=Math.round(h*=g/i),i=g):h>f&&(i=Math.round(i*=f/h),h=f);var j=document.createElement("canvas");j.width=i,j.height=h,j.getContext("2d").drawImage(a,0,0,i,h);var k=j.toDataURL(e,d/100),l=new Image;return l.src=k,l.src},e=function(a,b){var c=new Image;c.onload=function(){b(c)},c.src=a},f=function(b){var c=a.defer(),d=new FileReader;return d.onload=function(a){c.resolve(a.target.result)},d.readAsDataURL(b),c.promise};return{restrict:"A",scope:{image:"=",uploadFn:"=",ctrl:"=",resizeMaxHeight:"@?",resizeMaxWidth:"@?",resizeQuality:"@?",resizeType:"@?"},link:function(a,g,h){var i=function(a,b,c){var d=c||(a.match(/^data:([^;]+);/)||"")[1];return fetch(a).then(function(a){return a.arrayBuffer()}).then(function(a){return new File([a],b,{type:d})})},j=function(b,c){e(b.url,function(e){var f=d(e,a);Object.assign(b,{compressed:{dataURL:f,type:f.match(/:(.+\/.+);/)[1]}}),c(b)})},k=function(c){var d=c.compressed,e=d.type,f=d.dataURL;i(f,c.file.name,e).then(function(b){a.uploadFn(a.ctrl,b)})["catch"](function(){return b.pop("Error while optimising photo")}),a.$apply(function(){h.multiple?a.image.push(c):Object.assign(a,{image:c})})};g.bind("change",function(b){h.multiple&&Object.assign(a,{image:[]});for(var d=b.target.files,e=function(b){var e={file:d[b],url:c.createObjectURL(d[b])};f(d[b]).then(function(a){e.dataURL=a}),a.resizeMaxHeight||a.resizeMaxWidth?j(e,function(a){k(a)}):k(e)},g=0;g<d.length;g++)e(g)})}}}]),angular.module("qui.core").factory("Page",["Session",function(a){var b="",c=a.read("adminUserinfo")?a.read("adminUserinfo").profile_photo_url:"/assets/images/logo.beba3fea.png";return{favicon:function(){return c||"https://www.shoppre.com/img/favicon.png"},setFavicon:function(a){c=a},title:function(){return a.read("adminUserinfo")?a.read("adminUserinfo").name+" - "+b:""},setTitle:function(a){b=a}}}]),angular.module("uiGenApp").factory("Prototype",["$sce",function(a){var b={hideTags:function(a){return String(a).replace(/<[^>]+>/gm,"")},mergeHighlightText:function(a){var b=a;return b=b.replace(new RegExp(/\s+/,"g")," ").trim(),b=b.replace(new RegExp('</strong> <strong class="highlight">',"g")," "),b=b.replace(new RegExp('</strong> / <strong class="highlight">',"g")," / "),b=b.replace(new RegExp('</strong>/ <strong class="highlight">',"g"),"/ "),b=b.replace(new RegExp('</strong> /<strong class="highlight">',"g")," /"),b=b.replace(new RegExp('</strong>/<strong class="highlight">',"g"),"/"),b=b.replace(new RegExp('</strong> - <strong class="highlight">',"g")," - ")},htmlText:function(b){return"string"==typeof b&&b.length>0?a.trustAsHtml(this.mergeHighlightText(b)):a.trustAsHtml(""+b)},isHighlight:function(a){return a.split("</strong>").length>1},firstLetter:function(a){if(a){var b=a.match(/\b(\w)/g);return b.splice(1,b.length-1),b.join(" ").toUpperCase()}return""},initials:function c(a){if(!a)return" ";var c=a.match(/\b(\w)/g);return c.length>2&&c.splice(1,c.length-2),c.join("").toUpperCase()},titleCase:function(){var a=/(^|\s)[a-z]/g;return this.replace(a,function(a){return a.toUpperCase()})},replaceAll:function(a,b){var c=this;return c.replace(new RegExp(a,"g"),b)},validateEmail:function(a){var b=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return b.test(String(a).toLowerCase())}};return b}]),angular.module("qui.components").directive("beforeBottom",["$window","$document",function(a,b){return function(c,d,e){angular.element(a).bind("scroll",function(){var d="innerHeight"in a?a.innerHeight:b.documentElement.offsetHeight,f=b[0].body,g=b[0].documentElement,h=Math.max(f.scrollHeight,f.offsetHeight,g.clientHeight,g.scrollHeight,g.offsetHeight),i=d+a.pageYOffset;i+150>=h&&c.$apply(e.beforeBottom)})}}]).directive("beforeBottomFixed",["$window","$document",function(a,b){return function(c,d,e){angular.element(".scrollableContainer").bind("scroll",function(){var d="innerHeight"in a?a.innerHeight:b.documentElement.offsetHeight,f=b[0].body,g=b[0].documentElement,h=Math.max(f.scrollHeight,f.offsetHeight,g.clientHeight,g.scrollHeight,g.offsetHeight),i=d+a.pageYOffset;i+150>=h&&c.$apply(e.beforeBottomFixed)})}}]).directive("beforeBottomView",function(){return function(a,b,c){b.bind("scroll",function(){var d=150;b[0].scrollTop+b[0].offsetHeight+d>=b[0].scrollHeight&&a.$apply(c.beforeBottomView)})}}),angular.module("qui.components").directive("contenteditable",function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){function e(){d.$setViewValue(this.innerHTML)}var f=d;b.on("keyup",e),a.$on("$destroy",function(){return b.off("keyup",e)}),f.$render=function(){return b.html(d.$viewValue)}}}}),angular.module("qui.components").directive("onlyDigits",function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){function e(a){if(a){var b=a.replace(/[^0-9]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),parseInt(b,10)}}d.$parsers.push(e)}}}).directive("decimalDigits",function(){return{require:"ngModel",restrict:"A",link:function(a,b,c,d){function e(a){if(a){var b=a.replace(/[^0-9.]/g,"");return b!==a&&(d.$setViewValue(b),d.$render()),parseFloat(b)}}d.$parsers.push(e)}}}),angular.module("qui.components").directive("emptyBackspace",["$parse",function(a){return{link:function(b,c,d){c.on("keydown",function(c){var e=a(d.ngModel)(b);void 0!==e&&0===e.length&&8===c.which&&b.$apply(d.emptyBackspace)})}}}]).directive("enterToSpace",function(){return{link:function(a,b){b.bind("keydown keypress",function(a){if(13===a.which){a.preventDefault();var b=angular.element(a.target);b.trigger("click")}})}}}).directive("enterDirective",function(){return{link:function(a,b,c){b.bind("keydown keypress",function(b){13===b.which&&(a.$apply(c.enterDirective),b.preventDefault())})}}}),angular.module("qui.components").directive("scrollToBottom",["$timeout",function(a){return{scope:{scrollToBottom:"="},link:function(b,c){b.$watchCollection("scrollToBottom",function(b){b&&a(function(){return Object.assign(c[0],{scrollTop:c[0].scrollHeight})},0)})}}}]),function(){function a(a){return"function"==typeof a||"object"==typeof a&&null!==a}function b(a){return"function"==typeof a}function c(a){return"object"==typeof a&&null!==a}function d(){}function e(a,b){for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1}function f(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b}function g(a,b){return"onerror"===a?void va.on("error",b):2!==arguments.length?va[a]:void(va[a]=b)}function h(){setTimeout(function(){for(var a,b=0;b<wa.length;b++){a=wa[b];var c=a.payload;c.guid=c.key+c.id,c.childGuid=c.key+c.childId,c.error&&(c.stack=c.error.stack),va.trigger(a.name,a.payload)}wa.length=0},50)}function i(a,b,c){1===wa.push({name:a,payload:{key:b._guidKey,id:b._id,eventName:a,detail:b._result,childId:c&&c._id,label:b._label,timeStamp:sa(),error:va["instrument-with-stack"]?new Error(b._label):null}})&&h()}function j(){return new TypeError("A promises callback cannot return that same promise.")}function k(){}function l(a){try{return a.then}catch(b){return Ba.error=b,Ba}}function m(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function n(a,b,c){va.async(function(a){var d=!1,e=m(c,b,function(c){d||(d=!0,b!==c?q(a,c):s(a,c))},function(b){d||(d=!0,t(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,t(a,e))},a)}function o(a,b){b._state===za?s(a,b._result):b._state===Aa?(b._onError=null,t(a,b._result)):u(b,void 0,function(c){b!==c?q(a,c):s(a,c)},function(b){t(a,b)})}function p(a,c){if(c.constructor===a.constructor)o(a,c);else{var d=l(c);d===Ba?t(a,Ba.error):void 0===d?s(a,c):b(d)?n(a,c,d):s(a,c)}}function q(b,c){b===c?s(b,c):a(c)?p(b,c):s(b,c)}function r(a){a._onError&&a._onError(a._result),v(a)}function s(a,b){a._state===ya&&(a._result=b,a._state=za,0===a._subscribers.length?va.instrument&&xa("fulfilled",a):va.async(v,a))}function t(a,b){a._state===ya&&(a._state=Aa,a._result=b,va.async(r,a))}function u(a,b,c,d){var e=a._subscribers,f=e.length;a._onError=null,e[f]=b,e[f+za]=c,e[f+Aa]=d,0===f&&a._state&&va.async(v,a)}function v(a){var b=a._subscribers,c=a._state;if(va.instrument&&xa(c===za?"fulfilled":"rejected",a),0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?y(c,d,e,f):e(f);a._subscribers.length=0}}function w(){this.error=null}function x(a,b){try{return a(b)}catch(c){return Ca.error=c,Ca}}function y(a,c,d,e){var f,g,h,i,k=b(d);if(k){if(f=x(d,e),f===Ca?(i=!0,g=f.error,f=null):h=!0,c===f)return void t(c,j())}else f=e,h=!0;c._state!==ya||(k&&h?q(c,f):i?t(c,g):a===za?s(c,f):a===Aa&&t(c,f))}function z(a,b){var c=!1;try{b(function(b){c||(c=!0,q(a,b))},function(b){c||(c=!0,t(a,b))})}catch(d){t(a,d)}}function A(a,b,c){return a===za?{state:"fulfilled",value:c}:{state:"rejected",reason:c}}function B(a,b,c,d){var e=this;e._instanceConstructor=a,e.promise=new a(k,d),e._abortOnReject=c,e._validateInput(b)?(e._input=b,e.length=b.length,e._remaining=b.length,e._init(),0===e.length?s(e.promise,e._result):(e.length=e.length||0,e._enumerate(),0===e._remaining&&s(e.promise,e._result))):t(e.promise,e._validationError())}function C(a,b){return new Da(this,a,(!0),b).promise}function D(a,b){function c(a){q(f,a)}function d(a){t(f,a)}var e=this,f=new e(k,b);if(!ra(a))return t(f,new TypeError("You must pass an array to race.")),f;for(var g=a.length,h=0;f._state===ya&&h<g;h++)u(e.resolve(a[h]),void 0,c,d);return f}function E(a,b){var c=this;if(a&&"object"==typeof a&&a.constructor===c)return a;var d=new c(k,b);return q(d,a),d}function F(a,b){var c=this,d=new c(k,b);return t(d,a),d}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function I(a,c){var d=this;d._id=Ja++,d._label=c,d._state=void 0,d._result=void 0,d._subscribers=[],va.instrument&&xa("created",d),k!==a&&(b(a)||G(),d instanceof I||H(),z(d,a))}function J(a,b,c){this._superConstructor(a,b,!1,c)}function K(a,b){return new J(Ka,a,b).promise}function L(a,b){return Ka.all(a,b)}function M(a,b){Wa[Pa]=a,Wa[Pa+1]=b,Pa+=2,2===Pa&&Ma()}function N(){var a=process.nextTick,b=process.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/);return Array.isArray(b)&&"0"===b[1]&&"10"===b[2]&&(a=setImmediate),function(){a(S)}}function O(){return function(){La(S)}}function P(){var a=0,b=new Ta(S),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function Q(){var a=new MessageChannel;return a.port1.onmessage=S,function(){a.port2.postMessage(0)}}function R(){return function(){setTimeout(S,1)}}function S(){for(var a=0;a<Pa;a+=2){var b=Wa[a],c=Wa[a+1];b(c),Wa[a]=void 0,Wa[a+1]=void 0}Pa=0}function T(){try{var a=require,b=a("vertx");return La=b.runOnLoop||b.runOnContext,O()}catch(c){return R()}}function U(a){var b={};return b.promise=new Ka(function(a,c){b.resolve=a,b.reject=c},a),b}function V(a,c,d){return Ka.all(a,d).then(function(a){if(!b(c))throw new TypeError("You must pass a function as filter's second argument.");for(var e=a.length,f=new Array(e),g=0;g<e;g++)f[g]=c(a[g]);return Ka.all(f,d).then(function(b){for(var c=new Array(e),d=0,f=0;f<e;f++)b[f]&&(c[d]=a[f],d++);return c.length=d,c})})}function W(a,b,c){this._superConstructor(a,b,!0,c)}function X(a,b,c){this._superConstructor(a,b,!1,c)}function Y(a,b){return new X(Ka,a,b).promise}function Z(a,b){return new Za(Ka,a,b).promise}function $(a,c,d){return Ka.all(a,d).then(function(a){if(!b(c))throw new TypeError("You must pass a function as map's second argument.");for(var e=a.length,f=new Array(e),g=0;g<e;g++)f[g]=c(a[g]);return Ka.all(f,d)})}function _(){this.value=void 0}function aa(a){try{return a.then}catch(b){return cb.value=b,cb}}function ba(a,b,c){try{a.apply(b,c)}catch(d){return cb.value=d,cb}}function ca(a,b){for(var c,d,e={},f=a.length,g=new Array(f),h=0;h<f;h++)g[h]=a[h];for(d=0;d<b.length;d++)c=b[d],e[c]=g[d+1];return e}function da(a){for(var b=a.length,c=new Array(b-1),d=1;d<b;d++)c[d-1]=a[d];return c}function ea(a,b){return{then:function(c,d){return a.call(b,c,d)}}}function fa(a,b){var c=function(){for(var c,d=this,e=arguments.length,f=new Array(e+1),g=!1,h=0;h<e;++h){if(c=arguments[h],!g){if(g=ia(c),g===db){var i=new Ka(k);return t(i,db.value),i}g&&g!==!0&&(c=ea(g,c))}f[h]=c}var j=new Ka(k);return f[e]=function(a,c){a?t(j,a):void 0===b?q(j,c):b===!0?q(j,da(arguments)):ra(b)?q(j,ca(arguments,b)):q(j,c)},g?ha(j,f,a,d):ga(j,f,a,d)};return c.__proto__=a,c}function ga(a,b,c,d){var e=ba(c,d,b);return e===cb&&t(a,e.value),a}function ha(a,b,c,d){return Ka.all(b).then(function(b){var e=ba(c,d,b);return e===cb&&t(a,e.value),a})}function ia(a){return!(!a||"object"!=typeof a)&&(a.constructor===Ka||aa(a))}function ja(a,b){return Ka.race(a,b)}function ka(a,b){return Ka.reject(a,b)}function la(a,b){return Ka.resolve(a,b)}function ma(a){throw setTimeout(function(){throw a}),a}function na(a,b){va.async(a,b)}function oa(){va.on.apply(va,arguments)}function pa(){va.off.apply(va,arguments)}var qa;qa=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var ra=qa,sa=Date.now||function(){return(new Date).getTime()},ta=Object.create||function(a){if(arguments.length>1)throw new Error("Second argument not supported");if("object"!=typeof a)throw new TypeError("Argument must be an object");return d.prototype=a,new d},ua={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,b){if("function"!=typeof b)throw new TypeError("Callback must be a function");var c,d=f(this);c=d[a],c||(c=d[a]=[]),e(c,b)===-1&&c.push(b)},off:function(a,b){var c,d,g=f(this);return b?(c=g[a],d=e(c,b),void(d!==-1&&c.splice(d,1))):void(g[a]=[])},trigger:function(a,b,c){var d,e,g=f(this);if(d=g[a])for(var h=0;h<d.length;h++)(e=d[h])(b,c)}},va={instrument:!1};ua.mixin(va);var wa=[],xa=i,ya=void 0,za=1,Aa=2,Ba=new w,Ca=new w,Da=B;B.prototype._validateInput=function(a){return ra(a)},B.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},B.prototype._init=function(){this._result=new Array(this.length)},B.prototype._enumerate=function(){for(var a=this,b=a.length,c=a.promise,d=a._input,e=0;c._state===ya&&e<b;e++)a._eachEntry(d[e],e)},B.prototype._eachEntry=function(a,b){var d=this,e=d._instanceConstructor;c(a)?a.constructor===e&&a._state!==ya?(a._onError=null,d._settledAt(a._state,b,a._result)):d._willSettleAt(e.resolve(a),b):(d._remaining--,d._result[b]=d._makeResult(za,b,a))},B.prototype._settledAt=function(a,b,c){var d=this,e=d.promise;e._state===ya&&(d._remaining--,d._abortOnReject&&a===Aa?t(e,c):d._result[b]=d._makeResult(a,b,c)),0===d._remaining&&s(e,d._result)},B.prototype._makeResult=function(a,b,c){return c},B.prototype._willSettleAt=function(a,b){var c=this;u(a,void 0,function(a){c._settledAt(za,b,a)},function(a){c._settledAt(Aa,b,a)})};var Ea=C,Fa=D,Ga=E,Ha=F,Ia="rsvp_"+sa()+"-",Ja=0,Ka=I;I.cast=Ga,I.all=Ea,I.race=Fa,I.resolve=Ga,I.reject=Ha,I.prototype={constructor:I,_guidKey:Ia,_onError:function(a){var b=this;va.after(function(){b._onError&&va.trigger("error",a,b._label)})},then:function(a,b,c){var d=this,e=d._state;if(e===za&&!a||e===Aa&&!b)return va.instrument&&xa("chained",d,d),d;d._onError=null;var f=new d.constructor(k,c),g=d._result;if(va.instrument&&xa("chained",d,f),e){var h=arguments[e-1];va.async(function(){y(e,f,h,g)})}else u(d,f,a,b);return f},"catch":function(a,b){return this.then(void 0,a,b)},"finally":function(a,b){var c=this,d=c.constructor;return c.then(function(b){return d.resolve(a()).then(function(){return b})},function(b){return d.resolve(a()).then(function(){throw b})},b)}},J.prototype=ta(Da.prototype),J.prototype._superConstructor=Da,J.prototype._makeResult=A,J.prototype._validationError=function(){return new Error("allSettled must be called with an array")};var La,Ma,Na=K,Oa=L,Pa=0,Qa=({}.toString,M),Ra="undefined"!=typeof window?window:void 0,Sa=Ra||{},Ta=Sa.MutationObserver||Sa.WebKitMutationObserver,Ua="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),Va="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Wa=new Array(1e3);Ma=Ua?N():Ta?P():Va?Q():void 0===Ra&&"function"==typeof require?T():R();var Xa=U,Ya=V,Za=W;W.prototype=ta(Da.prototype),W.prototype._superConstructor=Da,W.prototype._init=function(){this._result={}},W.prototype._validateInput=function(a){return a&&"object"==typeof a},W.prototype._validationError=function(){return new Error("Promise.hash must be called with an object")},W.prototype._enumerate=function(){var a=this,b=a.promise,c=a._input,d=[];for(var e in c)b._state===ya&&Object.prototype.hasOwnProperty.call(c,e)&&d.push({position:e,entry:c[e]});var f=d.length;a._remaining=f;for(var g,h=0;b._state===ya&&h<f;h++)g=d[h],a._eachEntry(g.entry,g.position)},X.prototype=ta(Za.prototype),X.prototype._superConstructor=Da,X.prototype._makeResult=A,X.prototype._validationError=function(){return new Error("hashSettled must be called with an object")};var $a,_a=Y,ab=Z,bb=$,cb=new _,db=new _,eb=fa;if("object"==typeof self)$a=self;else{if("object"!=typeof global)throw new Error("no global: `self` or `global` found");$a=global}var fb=$a,gb=ja,hb=ka,ib=la,jb=ma;va.async=Qa,va.after=function(a){setTimeout(a,0)};if("undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var kb=window.__PROMISE_INSTRUMENTATION__;g("instrument",!0);for(var lb in kb)kb.hasOwnProperty(lb)&&oa(lb,kb[lb])}var mb={race:gb,Promise:Ka,allSettled:Na,hash:ab,hashSettled:_a,denodeify:eb,on:oa,off:pa,map:bb,filter:Ya,resolve:ib,reject:hb,all:Oa,rethrow:jb,defer:Xa,EventTarget:ua,configure:g,async:na};"function"==typeof define&&define.amd?define(function(){return mb}):"undefined"!=typeof module&&module.exports?module.exports=mb:"undefined"!=typeof fb&&(fb.RSVP=mb)}.call(void 0);var Sha256={};Sha256.hash=function(a){a=a.utf8Encode();var b=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],c=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];a+=String.fromCharCode(128);for(var d=a.length/4+2,e=Math.ceil(d/16),f=new Array(e),g=0;e>g;g++){f[g]=new Array(16);for(var h=0;16>h;h++)f[g][h]=a.charCodeAt(64*g+4*h)<<24|a.charCodeAt(64*g+4*h+1)<<16|a.charCodeAt(64*g+4*h+2)<<8|a.charCodeAt(64*g+4*h+3)}f[e-1][14]=8*(a.length-1)/Math.pow(2,32),f[e-1][14]=Math.floor(f[e-1][14]),f[e-1][15]=8*(a.length-1)&4294967295;for(var i,j,k,l,m,n,o,p,q=new Array(64),g=0;e>g;g++){for(var r=0;16>r;r++)q[r]=f[g][r];for(var r=16;64>r;r++)q[r]=Sha256.σ1(q[r-2])+q[r-7]+Sha256.σ0(q[r-15])+q[r-16]&4294967295;i=c[0],j=c[1],k=c[2],l=c[3],m=c[4],n=c[5],o=c[6],p=c[7];for(var r=0;64>r;r++){var s=p+Sha256.Σ1(m)+Sha256.Ch(m,n,o)+b[r]+q[r],t=Sha256.Σ0(i)+Sha256.Maj(i,j,k);p=o,o=n,n=m,m=l+s&4294967295,l=k,k=j,j=i,i=s+t&4294967295}c[0]=c[0]+i&4294967295,c[1]=c[1]+j&4294967295,c[2]=c[2]+k&4294967295,c[3]=c[3]+l&4294967295,c[4]=c[4]+m&4294967295,c[5]=c[5]+n&4294967295,c[6]=c[6]+o&4294967295,c[7]=c[7]+p&4294967295}return Sha256.toHexStr(c[0])+Sha256.toHexStr(c[1])+Sha256.toHexStr(c[2])+Sha256.toHexStr(c[3])+Sha256.toHexStr(c[4])+Sha256.toHexStr(c[5])+Sha256.toHexStr(c[6])+Sha256.toHexStr(c[7])},Sha256.ROTR=function(a,b){return b>>>a|b<<32-a},Sha256.Σ0=function(a){return Sha256.ROTR(2,a)^Sha256.ROTR(13,a)^Sha256.ROTR(22,a)},Sha256.Σ1=function(a){return Sha256.ROTR(6,a)^Sha256.ROTR(11,a)^Sha256.ROTR(25,a)},Sha256.σ0=function(a){return Sha256.ROTR(7,a)^Sha256.ROTR(18,a)^a>>>3},Sha256.σ1=function(a){return Sha256.ROTR(17,a)^Sha256.ROTR(19,a)^a>>>10},Sha256.Ch=function(a,b,c){return a&b^~a&c},Sha256.Maj=function(a,b,c){return a&b^a&c^b&c},Sha256.toHexStr=function(a){for(var b,c="",d=7;d>=0;d--)b=a>>>4*d&15,c+=b.toString(16);return c},"undefined"==typeof String.prototype.utf8Encode&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))}),"undefined"==typeof String.prototype.utf8Decode&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(a){return this}}),
"undefined"!=typeof module&&module.exports&&(module.exports=Sha256),"function"==typeof define&&define.amd&&define([],function(){return Sha256});var qz=function(){function a(a,c){this.setPrinter=function(a){"string"==typeof a&&(a={name:a}),this.printer=a},this.getPrinter=function(){return this.printer},this.reconfigure=function(a){b.tools.extend(this.config,a)},this.getOptions=function(){return this.config},this.setPrinter(a),this.config=c}Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});var b={VERSION:"2.0.3-2",DEBUG:!1,log:{trace:function(){b.DEBUG&&console.log.apply(console,arguments)},info:function(){console.info.apply(console,arguments)},warn:function(){b.DEBUG&&console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}},streams:{serial:"SERIAL",usb:"USB",hid:"HID"},websocket:{connection:null,connectConfig:{host:["localhost","localhost.qz.io"],hostIndex:0,usingSecure:!0,protocol:{secure:"wss://",insecure:"ws://"},port:{secure:[8181,8282,8383,8484],insecure:[8182,8283,8384,8485],portIndex:0},keepAlive:60,retries:0,delay:0},setup:{findConnection:function(a,c,d){var e,f=function(){if(a.port.portIndex++,a.usingSecure&&a.port.portIndex>=a.port.secure.length||!a.usingSecure&&a.port.portIndex>=a.port.insecure.length){if(a.hostIndex>=a.host.length-1)return void d(new Error("Unable to establish connection with QZ"));a.hostIndex++,a.port.portIndex=0}b.websocket.setup.findConnection(a,c,d)};e=a.usingSecure?a.protocol.secure+a.host[a.hostIndex]+":"+a.port.secure[a.port.portIndex]:a.protocol.insecure+a.host[a.hostIndex]+":"+a.port.insecure[a.port.portIndex];try{b.log.trace("Attempting connection",e),b.websocket.connection=new b.tools.ws(e)}catch(g){return b.log.error(g),void f()}null!=b.websocket.connection?(b.websocket.connection.established=!1,b.websocket.connection.onopen=function(f){if(b.log.trace(f),b.log.info("Established connection with QZ Tray on "+e),b.websocket.setup.openConnection({resolve:c,reject:d}),a.keepAlive>0)var g=setInterval(function(){return qz.websocket.isActive()?void b.websocket.connection.send("ping"):void clearInterval(g)},1e3*a.keepAlive)},b.websocket.connection.onclose=function(){"undefined"!=typeof navigator&&navigator.userAgent.indexOf("Safari")!=-1&&navigator.userAgent.indexOf("Chrome")==-1&&b.websocket.connection.onerror()},b.websocket.connection.onerror=function(a){b.log.trace(a),f()}):d(new Error("Unable to create a websocket connection"))},openConnection:function(a){function c(c){void 0===c&&(c=null),b.websocket.connection.sendData({certificate:c,promise:a})}b.websocket.connection.established=!0,b.websocket.connection.onclose=function(a){b.log.trace(a),b.log.info("Closed connection with QZ Tray"),void 0!=b.websocket.connection.promise&&b.websocket.connection.promise.resolve(),b.websocket.callClose(a),b.websocket.connection=null;for(var c in b.websocket.pendingCalls)b.websocket.pendingCalls.hasOwnProperty(c)&&b.websocket.pendingCalls[c].reject(new Error("Connection closed before response received"))},b.websocket.connection.onerror=function(a){b.websocket.callError(a)},b.websocket.connection.sendData=function(a){b.log.trace("Preparing object for websocket",a),void 0==a.timestamp&&(a.timestamp=Date.now()),void 0!=a.promise&&(a.uid=b.websocket.setup.newUID(),b.websocket.pendingCalls[a.uid]=a.promise);try{if(void 0!=a.call&&void 0==a.signature){var c={call:a.call,params:a.params,timestamp:a.timestamp};b.security.callSign(b.tools.hash(b.tools.stringify(c))).then(function(c){b.log.trace("Signature for call",c),a.signature=c,b.signContent=void 0,b.websocket.connection.send(b.tools.stringify(a))})}else b.log.trace("Signature for call",a.signature),b.websocket.connection.send(b.tools.stringify(a))}catch(d){b.log.error(d),void 0!=a.promise&&(a.promise.reject(d),delete b.websocket.pendingCalls[a.uid])}},b.websocket.connection.onmessage=function(a){var c=JSON.parse(a.data);if(null!=c.uid){b.log.trace("Received response from websocket",c);var d=b.websocket.pendingCalls[c.uid];void 0==d?b.log.warn("No promise found for returned response"):void 0!=c.error?d.reject(new Error(c.error)):d.resolve(c.result),delete b.websocket.pendingCalls[c.uid]}else if(null==c.type)b.websocket.connection.close(4003,"Connected to incompatible QZ Tray version");else switch(c.type){case b.streams.serial:c.event||(c.event=JSON.stringify({portName:c.key,output:c.data})),b.serial.callSerial(JSON.parse(c.event));break;case b.streams.usb:c.event||(c.event=JSON.stringify({vendorId:c.key[0],productId:c.key[1],output:c.data})),b.usb.callUsb(JSON.parse(c.event));break;case b.streams.hid:b.hid.callHid(JSON.parse(c.event));break;default:b.log.warn("Cannot determine stream type for callback",c)}},b.security.callCert().then(c)["catch"](c)},newUID:function(){var a=6;return(new Array(a+1).join("0")+(Math.random()*Math.pow(36,a)<<0).toString(36)).slice(-a)}},dataPromise:function(a,c,d,e){return b.tools.promise(function(f,g){var h={call:a,promise:{resolve:f,reject:g},params:c,signature:d,timestamp:e};b.websocket.connection.sendData(h)})},pendingCalls:{},errorCallbacks:[],callError:function(a){if(Array.isArray(b.websocket.errorCallbacks))for(var c=0;c<b.websocket.errorCallbacks.length;c++)b.websocket.errorCallbacks[c](a);else b.websocket.errorCallbacks(a)},closedCallbacks:[],callClose:function(a){if(Array.isArray(b.websocket.closedCallbacks))for(var c=0;c<b.websocket.closedCallbacks.length;c++)b.websocket.closedCallbacks[c](a);else b.websocket.closedCallbacks(a)}},printing:{defaultConfig:{colorType:"color",copies:1,density:0,duplex:!1,fallbackDensity:600,interpolation:"bicubic",jobName:null,margins:0,orientation:null,paperThickness:null,printerTray:null,rasterize:!0,rotation:0,scaleContent:!0,size:null,units:"in",altPrinting:!1,encoding:null,endOfDoc:null,perSpool:1}},serial:{serialCallbacks:[],callSerial:function(a){if(Array.isArray(b.serial.serialCallbacks))for(var c=0;c<b.serial.serialCallbacks.length;c++)b.serial.serialCallbacks[c](a);else b.serial.serialCallbacks(a)}},usb:{usbCallbacks:[],callUsb:function(a){if(Array.isArray(b.usb.usbCallbacks))for(var c=0;c<b.usb.usbCallbacks.length;c++)b.usb.usbCallbacks[c](a);else b.usb.usbCallbacks(a)}},hid:{hidCallbacks:[],callHid:function(a){if(Array.isArray(b.hid.hidCallbacks))for(var c=0;c<b.hid.hidCallbacks.length;c++)b.hid.hidCallbacks[c](a);else b.hid.hidCallbacks(a)}},security:{certPromise:function(a,b){b()},callCert:function(){return b.tools.promise(b.security.certPromise)},signaturePromise:function(){return function(a){a()}},callSign:function(a){return b.tools.promise(b.security.signaturePromise(a))}},tools:{promise:function(a){return new RSVP.Promise(a)},stringify:function(a){var b=Array.prototype.toJSON;delete Array.prototype.toJSON;var c=JSON.stringify(a);return b&&(Array.prototype.toJSON=b),c},hash:"undefined"!=typeof Sha256?Sha256.hash:null,ws:"undefined"!=typeof WebSocket?WebSocket:null,absolute:function(a){if(document&&"function"==typeof document.createElement){var b=document.createElement("a");return b.href=a,b.href}return a},extend:function(a){"object"!=typeof a&&(a={});for(var c=1;c<arguments.length;c++){var d=arguments[c];if(d)for(var e in d)if(d.hasOwnProperty(e)){if(a===d[e])continue;if(d[e]&&d[e].constructor&&d[e].constructor===Object){var f;f=Array.isArray(d[e])?a[e]||[]:a[e]||{},a[e]=b.tools.extend(f,d[e])}else void 0!==d[e]&&(a[e]=d[e])}}return a}}};return a.prototype.print=function(a,b,c){qz.print(this,a,b,c)},{websocket:{isActive:function(){return null!=b.websocket.connection&&b.websocket.connection.established},connect:function(a){return b.tools.promise(function(c,d){if(qz.websocket.isActive())return void d(new Error("An open connection with QZ Tray already exists"));if(null!=b.websocket.connection)return void d(new Error("The current connection attempt has not returned yet"));if(!b.tools.ws)return void d(new Error("WebSocket not supported by this browser"));if(!b.tools.ws.CLOSED||2==b.tools.ws.CLOSED)return void d(new Error("Unsupported WebSocket version detected: HyBi-00/Hixie-76"));void 0==a&&(a={}),"undefined"!=typeof location&&"https:"===location.protocol||"undefined"==typeof a.usingSecure&&(b.log.trace("Disabling secure ports due to insecure page"),a.usingSecure=!1),"undefined"==typeof a.host||Array.isArray(a.host)||(a.host=[a.host]);var e=function f(e){var g=function(){a&&e<a.retries?f(e+1):(b.websocket.connection=null,d.apply(null,arguments))},h=function(){var d=b.tools.extend({},b.websocket.connectConfig,a);b.websocket.setup.findConnection(d,c,g)};0==e?h():setTimeout(h,1e3*a.delay)};e(0)})},disconnect:function(){return b.tools.promise(function(a,c){qz.websocket.isActive()?(b.websocket.connection.close(),b.websocket.connection.promise={resolve:a,reject:c}):c(new Error("No open connection with QZ Tray"))})},setErrorCallbacks:function(a){b.websocket.errorCallbacks=a},setClosedCallbacks:function(a){b.websocket.closedCallbacks=a},getNetworkInfo:function(a,c){return b.websocket.dataPromise("websocket.getNetworkInfo",{hostname:a,port:c})}},printers:{getDefault:function(){return b.websocket.dataPromise("printers.getDefault")},find:function(a){return b.websocket.dataPromise("printers.find",{query:a})}},configs:{setDefaults:function(a){b.tools.extend(b.printing.defaultConfig,a)},create:function(c,d){var e=b.tools.extend({},b.printing.defaultConfig,d);return new a(c,e)}},print:function(a,c,d,e){for(var f=0;f<c.length;f++)c[f].constructor===Object&&(!c[f].format&&c[f].type&&"RAW"!==c[f].type.toUpperCase()||c[f].format&&("FILE"===c[f].format.toUpperCase()||"IMAGE"===c[f].format.toUpperCase()&&(0!==c[f].data.indexOf("data:image/")||0===c[f].data.indexOf(";base64,"))||"XML"===c[f].format.toUpperCase()))&&(c[f].data=b.tools.absolute(c[f].data));var g={printer:a.getPrinter(),options:a.getOptions(),data:c};return b.websocket.dataPromise("print",g,d,e)},serial:{findPorts:function(){return b.websocket.dataPromise("serial.findPorts")},setSerialCallbacks:function(a){b.serial.serialCallbacks=a},openPort:function(a,c){var d={port:a,bounds:c};return b.websocket.dataPromise("serial.openPort",d)},sendData:function(a,c,d){var e={port:a,data:c,properties:d};return b.websocket.dataPromise("serial.sendData",e)},closePort:function(a){return b.websocket.dataPromise("serial.closePort",{port:a})}},usb:{listDevices:function(a){return b.websocket.dataPromise("usb.listDevices",{includeHubs:a})},listInterfaces:function(a,c){var d={vendorId:a,productId:c};return b.websocket.dataPromise("usb.listInterfaces",d)},listEndpoints:function(a,c,d){var e={vendorId:a,productId:c,"interface":d};return b.websocket.dataPromise("usb.listEndpoints",e)},setUsbCallbacks:function(a){b.usb.usbCallbacks=a},claimDevice:function(a,c,d){var e={vendorId:a,productId:c,"interface":d};return b.websocket.dataPromise("usb.claimDevice",e)},isClaimed:function(a,c){var d={vendorId:a,productId:c};return b.websocket.dataPromise("usb.isClaimed",d)},sendData:function(a,c,d,e){var f={vendorId:a,productId:c,endpoint:d,data:e};return b.websocket.dataPromise("usb.sendData",f)},readData:function(a,c,d,e){var f={vendorId:a,productId:c,endpoint:d,responseSize:e};return b.websocket.dataPromise("usb.readData",f)},openStream:function(a,c,d,e,f){var g={vendorId:a,productId:c,endpoint:d,responseSize:e,interval:f};return b.websocket.dataPromise("usb.openStream",g)},closeStream:function(a,c,d){var e={vendorId:a,productId:c,endpoint:d};return b.websocket.dataPromise("usb.closeStream",e)},releaseDevice:function(a,c){var d={vendorId:a,productId:c};return b.websocket.dataPromise("usb.releaseDevice",d)}},hid:{listDevices:function(){return b.websocket.dataPromise("hid.listDevices")},startListening:function(){return b.websocket.dataPromise("hid.startListening")},stopListening:function(){return b.websocket.dataPromise("hid.stopListening")},setHidCallbacks:function(a){b.hid.hidCallbacks=a},claimDevice:function(a,c){var d={vendorId:a,productId:c};return b.websocket.dataPromise("hid.claimDevice",d)},isClaimed:function(a,c){var d={vendorId:a,productId:c};return b.websocket.dataPromise("hid.isClaimed",d)},sendData:function(a,c,d,e){var f={vendorId:a,productId:c,endpoint:e,data:d};return b.websocket.dataPromise("hid.sendData",f)},readData:function(a,c,d){var e={vendorId:a,productId:c,responseSize:d};return b.websocket.dataPromise("hid.readData",e)},openStream:function(a,c,d,e){var f={vendorId:a,productId:c,responseSize:d,interval:e};return b.websocket.dataPromise("hid.openStream",f)},closeStream:function(a,c){var d={vendorId:a,productId:c};return b.websocket.dataPromise("hid.closeStream",d)},releaseDevice:function(a,c){var d={vendorId:a,productId:c};return b.websocket.dataPromise("hid.releaseDevice",d)}},security:{setCertificatePromise:function(a){b.security.certPromise=a},setSignaturePromise:function(a){b.security.signaturePromise=a}},api:{showDebug:function(a){b.DEBUG=a},getVersion:function(){return b.websocket.dataPromise("getVersion")},setPromiseType:function(a){b.tools.promise=a},setSha256Type:function(a){b.tools.hash=a},setWebSocketType:function(a){b.tools.ws=a}},version:b.VERSION}}();!function(){if("function"==typeof define&&define.amd)define(qz);else if("object"==typeof exports){module.exports=qz;try{var a=require("crypto");qz.api.setSha256Type(function(b){return a.createHash("sha256").update(b).digest("hex")})}catch(b){}}else window.qz=qz}(),angular.module("qui.core").factory("Session",["$window",function(a){var b={};return b.create=function(a,b){localStorage[a]=angular.toJson(b)},b.read=function(b){return angular.fromJson(a.localStorage[b])},b.destroy=function(){a.localStorage.clear()},b.isAuthenticated=function(){return!(!b.read("adminOauth")||!b.read("adminOauth").access_token)},b.getAccessToken=function(){return b.read("adminOauth")&&b.read("adminOauth").access_token},b.isAuthorized=function(a){var c=a;return angular.isArray(c)||(c=[].push(c)),b.isAuthenticated()&&~c.indexOf(b.userRole)},b}]),angular.module("qui.core").factory("User",["Session",function(a){return Object.defineProperties({},{userinfo:{get:function(){return a.read("adminUserinfo")},configurable:!0,enumerable:!0},states:{get:function(){return a.read("states")},configurable:!0,enumerable:!0},shipmentStates:{get:function(){return a.read("shipment-states")},configurable:!0,enumerable:!0},orderStates:{get:function(){return a.read("order-states")},configurable:!0,enumerable:!0},shipmentTypes:{get:function(){return a.read("shipment-types")},configurable:!0,enumerable:!0},orderTypes:{get:function(){return a.read("order-types")},configurable:!0,enumerable:!0},afterShipCarriers:{get:function(){return a.read("afterShipCarriers")},configurable:!0,enumerable:!0}})}]);var AppController=function f(a,b,c,d,e,g,h,i,j,k,l){var m=this;_classCallCheck(this,f),this.Page=j,this.socket=k,this.$stateParams=h,this.Session=i,this.adminUserinfo=this.Session.read("adminUserinfo"),this.states=this.Session.read("adminStates"),this.shipmentStates=this.Session.read("adminShipment-states"),this.orderStates=this.Session.read("adminOrder-states"),this.itemStates=this.Session.read("adminItem-states"),this.Math=Math,this.URLS=e,this.app={name:"OPS",version:"0.0.1",settings:{themeID:1,navbarCollapseColor:"bg-info",asideColor:"bg-info bg-gd-dk",headerFixed:!0,asideFixed:!0,asideFolded:!0,asideDock:!0,container:!1,offScreen:!1,mobileHeader:!1}};var n=e.DOMAIN.endsWith(".com")?"production":"development",o=e.PREFIX.includes("staging")?"staging":n,p=l[o];this.Session.isAuthenticated()&&!e.DOMAIN.includes("test")&&!function(){var a=window.OneSignal||[];a.push(function(){a.sendTag("key",m.adminUserinfo.id),a.init({appId:p,allowLocalhostAsSecureOrigin:!0,autoRegister:!0,notifyButton:{enable:!1}}),m.Session.read("oneSignalPlayerId")||a.getUserId(function(a){m.$http.post("#/notificationSubscriptions",{player_id:a}).then(function(){return m.Session.create("oneSignalPlayerId",a)})})})}(),this.updateNavigationBar=function(a,b){var c="bg-primary",d="bg-info",e="bg-info bg-gd-dk";(a.startsWith("candidates.")||a.startsWith("candidate."))&&(c="0"===b.source?"bg-black":"bg-sea-green",d="0"===b.source?"bg-black":"bg-sea-green",e="0"===b.source?"bg-black bg-gd-dk":"bg-sea-green bg-gd-dk"),m.app.settings.navbarHeaderColor=c,m.app.settings.navbarCollapseColor=d,m.app.settings.asideColor=e},d.$on("$stateChangeStart",function(a,b,c,e){Object.assign(d,{previousState:e.name,currentState:b.name}),m.app.settings.offScreen=!1,m.app.settings.mobileHeader=!1,m.updateNavigationBar(d.currentState,c)}),this.Page=j,this.$state=c,this.showCustomerSideBar=function(){return["packages.index","orders.index","customer.view","customer.packages.index","customer.orders.index","customer.packages.create","customer.packages.bulk","customer.package.update","shipments.index","shipment.packages.index","customer.shipment.update","customer.shipments.index","packages.bulk"].includes(c.current.name)}};AppController.$inject=["$window","$uibModal","$state","$rootScope","URLS","$http","$stateParams","Session","Page","socket","ONESIGNAL"],angular.module("uiGenApp").controller("AppController",AppController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("access",{"abstract":!0,template:'<div ui-view class="fade-in-right-big smooth"></div>'}).state("access.oauth",{url:"/access/oauth",templateUrl:"app/routes/access/oauth/oauth.html",controller:"oAuthCtrl",controllerAs:"oAuth"}).state("access.404",{templateUrl:"app/routes/access/404/404.html",controller:"FourOFourController",controllerAs:"$ctrl"})}]);var OAuthCtrl=["Auth","$location","$window","$state","URLS","$rootScope","Session","toaster",function g(a,b,c,d,e,f,h,i){var j=this;_classCallCheck(this,g);var k=b.search();return k.error?(this.authErr={error:k.error,error_description:k.error_description,code:k.code},null):(k.code||i.pop("error","Authorization code missing"),a.login({code:k.code}).then(function(){return a.setSessionData().then(function(){j.user=h.read("adminUserinfo");var a=c.location;a.href=k.state?""+a.origin+k.state:d.href("packages.index",{absolute:!0})})})["catch"](function(){var a=c.location;a.href=e.OAUTH}))}];OAuthCtrl.$inject=["Auth","$location","$window","$state","URLS","$rootScope","Session","toaster"],angular.module("uiGenApp").controller("oAuthCtrl",OAuthCtrl);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),TransactionCreateController=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.$=$,this.moment=h,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session","moment"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.data={};var b=1;this.ledgers=[];var c="/ledgers";this.$http.get(c).then(function(b){var c=b.data;a.ledgers=c}),"DR"===this.$stateParams.type?this.from_ledger_id=b:this.to_ledger_id=b}},{key:"reset",value:function(a){this.data={},a.$setPristine()}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"create",value:function(a){var b=this;if(this.submitting)return null;this.submitting=!0,this.clickUpload=!0;var c="post",d="$/transactions/create",e=this.validateForm(a);return e?this.$http[c](d,this.data).then(function(){b.submitting=!1;var c="Created";b.toaster.pop("success","Transaction "+c),b.reset(a)})["catch"](function(a){b.submitting=!1,409===a.status?b.toaster.pop("error",a.data.message):b.toaster.pop("error","There was problem while Creating Transaction")}):this.submitting=!1}}]),a}();angular.module("uiGenApp").controller("TransactionCreateController",TransactionCreateController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("transactions",{"abstract":!0,url:"/transactions",template:"<div ui-view></div>"}).state("transactions.create",{url:"/create?id&type",templateUrl:"app/routes/accounts/transactions/create/create.html",controller:"TransactionCreateController",controllerAs:"$ctrl"})}]),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("barcode",{"abstract":!0,url:"/barcodes",template:"<div ui-view></div>"}).state("barcode.create",{url:"/create",templateUrl:"app/routes/barcodes/create/create.html",controller:"BarcodeCreateController",controllerAs:"$ctrl"}).state("barcode.Grnverification",{url:"/grn/verification?grnId",templateUrl:"app/routes/barcodes/grnVerification/grnVerification.html",controller:"GrnVerificationController",controllerAs:"$ctrl"})}]);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),BarcodeCreateController=function(){function a(b,c,d,e,f,g){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session"],_createClass(a,[{key:"$onInit",value:function(){var a=this;qz.config=null,this.TITLE="Barcode Create",this.Page.setTitle(this.TITLE),this.data={},this.quickMode=!0,this.submitPackage=!1,this.enablePrint=!1,this.barcodeSubmit=!1,this.DeliveryCompanies={select:function(b){a.data.delivery_company_id=b.id,a.DeliveryCompanies.model=b.name},setId:function(){if(!a.DeliveryCompanies.lastSearchResults)return a.DeliveryCompanies.lastSearchResults;var b=(a.DeliveryCompanies.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.DeliveryCompanies.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.DeliveryCompanies.select(d):null},blur:function(){return a.DeliveryCompanies.lastSearchResults?a.DeliveryCompanies.setId():a.DeliveryCompanies.get(a.DeliveryCompanies.model).then(function(){return a.DeliveryCompanies.setId()})},get:function(b){return a.$http.get("/search",{params:{type:"DeliveryCompanies",q:b}}).then(function(b){var c=b.data.items;return a.DeliveryCompanies.lastSearchResults=c,c})},noResults:!1,loadingDeliveryCompanies:!1}}},{key:"focus",value:function(a){$('input[name="'+a+'"]')[0].focus()}},{key:"printHTML",value:function(a){var b=this;qz.websocket.isActive()?this.printData(a):(this.security(),qz.websocket.connect().then(function(){return qz.printers.getDefault()}).then(function(c){return qz.printerConfig=qz.configs.create(c),b.printData(a)})["catch"](function(a){}))}},{key:"printCode",value:function(a){this.printHTML(a)}},{key:"printData",value:function b(a){var b=[{type:"raw",format:"plain",data:"CT~~CD,~CC^~CT~\n^XA\n^MMT\n^PW561\n^LL0358\n^LS0\n^FT469,167^A0I,21,21^FH\\^FDShoppre.com^FS\n^BY3,3,78^FT469,191^BCI,,N,N\n"+("^FD"+a+"^FS\n")+("^FT324,165^AHI,21,13^FH^FD"+a+"^FS\n")+"^PQ1,0,1,Y^XZ"}];return qz.print(qz.printerConfig,b)}},{key:"security",value:function(){qz.security.setCertificatePromise(function(a,b){var c="-----BEGIN CERTIFICATE-----\nMIIDhDCCAmwCCQD4uQ6F+ltoRzANBgkqhkiG9w0BAQsFADCBgjELMAkGA1UEBhMC\nSU4xCzAJBgNVBAgMAktBMRIwEAYDVQQHDAlCYW5nYWxvcmUxCzAJBgNVBAoMAlFa\nMQswCQYDVQQLDAJRWjEWMBQGA1UEAwwNKi5zaG9wcHJlLmNvbTEgMB4GCSqGSIb3\nDQEJARYRdmlrYXNAc2hvcHByZS5jb20wIBcNMTkwMzI0MDkyMTU3WhgPMjA1MDA5\nMTYwOTIxNTdaMIGCMQswCQYDVQQGEwJJTjELMAkGA1UECAwCS0ExEjAQBgNVBAcM\nCUJhbmdhbG9yZTELMAkGA1UECgwCUVoxCzAJBgNVBAsMAlFaMRYwFAYDVQQDDA0q\nLnNob3BwcmUuY29tMSAwHgYJKoZIhvcNAQkBFhF2aWthc0BzaG9wcHJlLmNvbTCC\nASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK026IiLnf4kyv1+UbjnpgDb\nYaDpv8HSuf3QM1mGC6CyBloALmxCVvdRD/zL0tMlTsycV01ZnyB5SFWuoiJpmDhg\nfAsZNR8V3lp+ycFqgr8WsA3GYSvd32LQxW4YEX2UL/DtkhJ3ohjUyOcbOzB8yPmx\n0ALMgW31M7x3ml5Zn86/VQ2QJw/oJdHMzvCJVGMP1AuncOkkTUQOrvSMXhK0zFMm\n6Wi4wVAo/BM6HQMTWNwrpJBD6AvbBP3Tfd08EdsgcO1XxzPazYoViJNmgl/M0925\nemSyx7DOmmv31E19IHrQiIj/6xbKXSpXj3vGkuUq8xkHqILu/uTgGKJ7wAcelqEC\nAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAZk/LSJvcyzI7I+taMJOhxkVNWK2KbIXl\npy6GcHvBpXAxj3iwxmMrxMi90SM4fo0R3emafXnzjEBD+jA9/RUwKGHb6ZgViMzF\nrRr0QVPa7Cm/mWlF0Te5TmmPDP2JLrDEusZtURFZ/2to9j8MXPRTttcLczjtNhwS\nbQu2npU7r/c2/E42xb+m+huI2BK+tXelBtrnoAXP7OdTlCk7ML1Sb1QUfdH+AMDd\nRDhZOJbwFVOc/8hbXwvT5BheZ/c/t5VMV6nzf0uuXA+4WSaQY6qcegvmnoRr528A\nVrrMm3fjD5hG/vJs1EeAO5BXghyOfaGBIbhp6gbposBC15OlWcoEWg==\n-----END CERTIFICATE-----";a(c)});var a="-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEArTboiIud/iTK/X5RuOemANthoOm/wdK5/dAzWYYLoLIGWgAu\nbEJW91EP/MvS0yVOzJxXTVmfIHlIVa6iImmYOGB8Cxk1HxXeWn7JwWqCvxawDcZh\nK93fYtDFbhgRfZQv8O2SEneiGNTI5xs7MHzI+bHQAsyBbfUzvHeaXlmfzr9VDZAn\nD+gl0czO8IlUYw/UC6dw6SRNRA6u9IxeErTMUybpaLjBUCj8EzodAxNY3CukkEPo\nC9sE/dN93TwR2yBw7VfHM9rNihWIk2aCX8zT3bl6ZLLHsM6aa/fUTX0getCIiP/r\nFspdKlePe8aS5SrzGQeogu7+5OAYonvABx6WoQIDAQABAoIBAC8fQfFrsiaikcqW\no9rewi13gT7KeI1dK5YeHuoa6mzkIZA4fmibP5d2qRfHx2oDu0U0vxde60hlVkVh\nBeDAw1WLAhPu3qG/TEdoOLDyrfEYVfrZXjQV3yC91QgXaiK0vroXl2aIv0NsF9+v\na9HMEMzFD+bDBe8JBvMdwpQqY6xVtFQ3beEctu/XbWE6G4fHfqUpSFoa90WMtuMl\nKKVYdUKJ9Gfrny29lvq/Um5zjCLlIgR1J0HX4uKvTm3HAxDPI/0NHkH4Ln5qrjor\nJEu1/JxtHZDxUCUpYlW7QEUkO1xz1WgeyqaZ/kbvPyC6lf6s4gaEinJ7pVxWsHu6\n0m0+2QECgYEA1KXC69VDUFY6UGiWIUKBexrNUKrMXZ/mJoB8ny3skXDxK8weKURu\n7Cg9OvXwlk02ZAgVBMEcwPKXnGYw41kmdvFGtu83IvUL3q8ahHkikv9SwvA2FnJa\n06qQ0sqpSseWhAjhAf91nxcpNU40VuUN9N7GnmR6qwPkmpkDqyYBprECgYEA0Icb\nYk40x0nUJzFGOYwPCahMhzQk8XUXSDNVB3DKqYuuhrhx4sNOIePcktLauoo66+Ee\nOLnRzCQhB0jRIcnd/pOe1hJDUDNLyk0nEbB4tiTkRMHpGUeerD9vGqlm430p4Wic\n4c5ALsMyK7a+SmX9TtEZAheW8tQ+3ZZwDYbZyvECgYBsALzdlvWXahQ4HsaRofut\nkNFS9UzTCJGWYI/rMSIERL7ZJdTz1MQZwd5Hgf5t+E11xP0X6xU1koEaeHTAI9l7\nc9QcuabhZGBg+8KWIghDbNaWF/cAs5gaBXmE9lXBm1mBOhk+MIeHA/Z0EoJW2AOc\nqUFr1VDQZyvGsYzBco5IIQKBgQDJKj2BpX6G7rMqp/9eDr6HC4PgPq6Q/Otb7KFP\nj0EDNMxGDPNY1h6u1Pn57k2x/R4AZejYwnIhJI10UIvns61kJRbq3y1u1j18SNey\n2fJpjMdliUeM6qmo830EVH38YcegO2J095q1QftJbn6+mQs4GMGuYgFt+tE2xSUN\n95RtkQKBgFGwn7dzKoIOzKkH2AyqUIzo/zlEMOj3J6GyVeTBfRBqWImQs7DhmDeV\nZdnTqyMBOuJ+5erR9p4EYXnaWpkDyx0Bop6dwlvVadb4toZQCOXFLfVxdwwhEUx4\noJ076QBmCssqG1HRs0RUShjQtuf6/yMNy7/aQ4q+QZQbgrU6Q7Uc\n-----END RSA PRIVATE KEY-----";qz.security.setSignaturePromise(function(b){return function(c,d){try{var e=KEYUTIL.getKey(a),f=new KJUR.crypto.Signature({alg:"SHA1withRSA"});f.init(e),f.updateString(b);var g=f.sign();c(stob64(hextorstr(g)))}catch(h){d(h)}}})}},{key:"concatBarcode",value:function(){","!==this.data.barcodes[this.data.barcodes.length-1]&&(this.data.barcodes=this.data.barcodes+","),this.data.barcodes=this.data.barcodes.split(/\s/).join(""),this.focus("barcodes")}},{key:"concatBarcodeOnblur",value:function(){","!==this.data.barcodes[this.data.barcodes.length-1]&&(this.data.barcodes=this.data.barcodes+","),this.data.barcodes=this.data.barcodes.split(/\s/).join("")}},{key:"createPackage",value:function(){var a=this;if(this.submitPackage=!0,this.duplicateCodes="",!this.DeliveryCompanies.model||!this.data.barcodes||!this.data.person_name||!this.data.person_contact||this.DeliveryCompanies.noResults||!this.data.delivery_company_id)return this.submitPackage=!1,this.toaster.pop("error","fill all details");var b=this.data.barcodes;return b?(this.isDuplicatedBarcode=!1,void this.$http.get("/packages/search/barcode",{params:{q:b}}).then(function(){a.isDuplicatedBarcode=!1,a.createPkg(),a.submitPackage=!1})["catch"](function(b){404===b.status?(a.isDuplicatedBarcode=!0,b.data.data&&(a.invalidCodes=b.data.message+" "+b.data.data),a.toaster.pop("error",""+b.data.message)):a.toaster.pop("error","There was problem creating package. Please contact Shoppre team."),a.submitPackage=!1})):this.submitPackage=!1}},{key:"createBarcode",value:function(){var a=this;return!!this.data.number_of_barcodes&&(this.barcodeSubmit=!0,void this.$http.post("/barcodes",{numberOfBarcodes:this.data.number_of_barcodes}).then(function(b){var c=b.data.barcodes;return a.barcodes=c,a.barcodes.map(function(b){var c=b.barcode_number;a.printCode(c),a.barcodeSubmit=!1}),a.fromBarcode=a.barcodes[0].barcode_number,a.toBarcode=a.barcodes[a.barcodes.length-1].barcode_number,a.toaster.pop("success","successfully printed")})["catch"](function(b){a.barcodeSubmit=!1,a.toaster.pop("error",b.data.error)}))}},{key:"CheckPrint",value:function(){var a=this;this.enablePrint=!0,this.security(),qz.websocket.connect().then(function(){return qz.printers.getDefault()}).then(function(b){qz.printerConfig=qz.configs.create(b),a.toaster.pop("success","Printer Connected")})["catch"](function(b){a.toaster.pop("error","printer not connected")})}},{key:"createPkg",value:function(){var a=this;this.$http.post("/grn",this.data).then(function(b){var c=b.data,d=c.data,e=c.grn;a.grn=e;var f={barcodeIds:d,grnId:e.id};return a.$http.post("/packages/barcode/create",f).then(function(b){var c=b.data.packages;a.packages=c,a.$state.go("barcode.Grnverification",{grnId:e.id})}),a.toaster.pop("success","successfully created Packages")})["catch"](function(b){a.toaster.pop("error",b.data.error)})}},{key:"viewPkg",value:function(){var a=this;if(!this.data.barcode_number)return!1;var b=this.data.barcode_number;this.$http.get("/packages/barcodePack/view/"+b).then(function(b){var c=b.data;c.order_code?a.$state.go("order.show",{id:c.order_code}):a.$state.go("package.show",{id:c.id})})["catch"](function(b){a.toaster.pop("error",b.data.error)})}}]),a}();angular.module("uiGenApp").controller("BarcodeCreateController",BarcodeCreateController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),GrnVerificationController=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.moment=h,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session","moment"],_createClass(a,[{key:"$onInit",value:function(){this.TITLE=" Grn Verification",this.Page.setTitle(this.TITLE),this.packages=[],this.getPackage()}},{key:"getPackage",value:function(){var a=this;this.$http.get("/grn/"+this.$stateParams.grnId).then(function(b){var c=b.data.grnDetails;a.grnDetails=c})}}]),a}();angular.module("uiGenApp").controller("GrnVerificationController",GrnVerificationController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("campaigns",{"abstract":!0,url:"/campaigns",template:"<div ui-view></div>"}).state("campaigns.index",{url:"?bucket",templateUrl:"app/routes/campaigns/index/index.html",controller:"CampaignIndexController",controllerAs:"$ctrl"}).state("campaigns.create",{url:"/create?id",templateUrl:"app/routes/campaigns/create/create.html",controller:"CampaignCreateController",controllerAs:"$ctrl",resolve:{campaign:["$http","$stateParams","$state",function(a,b,c){return a.get("$/campaigns/"+b.id).then(function(a){var b=a.data;return b})["catch"](function(){return c.go("access.404")})}]}})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CampaignCreateController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,
this.$=$,this.S3=h,this.moment=i,this.data=j||{},this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session","S3","moment","campaign"],_createClass(a,[{key:"$onInit",value:function(){this.types=[{type:"shipment",value:"shipment"},{type:"Personal Shopper",value:"ps"}],this.EDIT=!!this.$stateParams.id&&""!==this.$stateParams.id,this.uploadingPhotos=!1,this.data&&(this.data.expiry_date=new Date(this.data.expiry_date),this.data.start_date=new Date(this.data.start_date)),this.EDIT&&(this.file="Nothing")}},{key:"reset",value:function(a){this.data={},a.$setPristine()}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"startUpload",value:function(a,b){a.S3.upload(b,a.data,a)}},{key:"create",value:function(a){var b=this;if(this.message="",this.submitting)return null;if(this.submitting=!0,this.clickUpload=!0,!this.data.discount_code&&!this.data.cashback_code)return this.message="Please Enter Discount Code OR Cashback Code",void(this.submitting=!1);if(!this.data.discount_percentage&&!this.data.cashback_percentage)return this.message="Please Enter Discount Percentage OR Cashback Percentage",void(this.submitting=!1);if(this.moment(this.data.expiry_date)<this.moment(this.data.start_date))return this.message="Enter valid Expiry Date",void(this.submitting=!1);var c=this.validateForm(a),d=Object.assign({},this.data);if(!c)return this.submitting=!1;d.discount_code&&Object.assign(d,{discount_code:d.discount_code.toString().toUpperCase()}),d.cashback_code&&Object.assign(d,{cashback_code:d.cashback_code.toString().toUpperCase()}),Object.assign(d,{start_date:this.moment(d.start_date).format("YYYY-MM-DD")}),Object.assign(d,{expiry_date:this.moment(d.expiry_date).format("YYYY-MM-DD")});var e=this.EDIT?"put":"post",f=this.EDIT?"$/campaigns/"+this.$stateParams.id:"$/campaigns/";return this.$http[e](f,d).then(function(c){c.data;b.submitting=!1;var d=b.EDIT?"Updated":"Created";b.toaster.pop("success",b.data.name+" Campaign "+d),b.reset(a)})["catch"](function(a){b.submitting=!1,409===a.status?b.toaster.pop("error",a.data.message):b.toaster.pop("error","There was problem while updating Campaign")})}}]),a}();angular.module("uiGenApp").controller("CampaignCreateController",CampaignCreateController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CampaignIndexController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.QCONFIG=b,this.$stateParams=c,this.$http=g,this.$state=h,this.$window=e,this.moment=d,this.Session=i,this.Prototype=j,this.Page=f,this.$onInit()}return a.$inject=["QCONFIG","$stateParams","moment","$window","Page","$http","$state","Session","Prototype"],_createClass(a,[{key:"$onInit",value:function(){return this.buckets=["RUNNING","EXPIRED"],this.buckets.includes(this.$stateParams.bucket)?void this.getList():void this.$state.go("campaigns.index",{bucket:"RUNNING"})}},{key:"getList",value:function(){var a=this;this.$http.get("$/campaigns?bucket="+this.$stateParams.bucket).then(function(b){var c=b.data;a.campaigns=c})}}]),a}();angular.module("uiGenApp").controller("CampaignIndexController",CampaignIndexController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e){_classCallCheck(this,a),this.$http=b,this.$log=c,this.Session=d,this.LoginAs=e,this.moment=moment,this.$onInit()}return a.$inject=["$http","$log","Session","LoginAs"],_createClass(a,[{key:"$onInit",value:function(){this.user=this.Session.read("adminUserinfo")}}]),a}();angular.module("uiGenApp").directive("customerHeader",function(){return{templateUrl:"app/routes/customers/customer-header/customer-header.html",restrict:"E",scope:{customer:"="},controller:a,controllerAs:"$ctrl",bindToController:!0}})}(),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("customers",{"abstract":!0,url:"/customers",template:"<div ui-view></div>"}).state("customers.list",{url:"?groupId",templateUrl:"app/routes/customers/list/list.html",controller:"CustomersListController",controllerAs:"$ctrl"}).state("customer",{"abstract":!0,url:"/customers/:id",template:"<div ui-view></div>"}).state("customer.view",{url:"",templateUrl:"app/routes/customers/view/view.html",controller:"CustomerViewController",controllerAs:"$ctrl",resolve:{currentCustomer:["$http","$state","$stateParams",function(a,b,c){return a.get("/users/"+c.id).then(function(a){var b=a.data;return b})["catch"](function(){return b.go("access.404")})}]}})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CustomersListController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){_classCallCheck(this,a),this.URLS=q,this.Page=p,this.$http=b,this.$state=c,this.$rootScope=d,this.$window=e,this.$location=f,this.$timeout=g,this.$stateParams=h,this.$filter=i,this.$uibModal=j,this.toaster=k,this.QCONFIG=l,this.GROUPS=this.QCONFIG.USER_GROUPS,this.Session=m,this.Prototype=n,this.ListModal=o,this.LoginAs=r,this.sorts=[{id:1,name:"Default",key:"-"},{id:1,name:"Last Update",key:"updated_at DESC"},{id:2,name:"Signup",key:"created_at DESC"},{id:3,name:"Name",key:"first_name DESC"}],this.$onInit()}return a.$inject=["$http","$state","$rootScope","$window","$location","$timeout","$stateParams","$filter","$uibModal","toaster","QCONFIG","Session","Prototype","ListModal","Page","URLS","LoginAs"],_createClass(a,[{key:"$onInit",value:function(){return this.user=this.Session.read("adminUserinfo"),this.facet={},this.groupId=this.$state.params.groupId,this.GROUPS.map(function(a){return a.id}).includes(Number(this.groupId))?(this.Page.setTitle(1===this.$stateParams.groupId?"Admins":"Customers"),this.list=[],this.ui={lazyLoad:!1,loading:!1},this.params={start:0,offset:0,limit:10,q:"",group_id:this.groupId},this.loadFacets(),this.getCustomers(!0)):this.$state.go("customers.list",{groupId:this.GROUPS[1].id})}},{key:"loadFacets",value:function(){this.facet={facet_queries:{},facet_fields:{job_location_sf:["Mumbai",3,"Bangalore",1]},facet_dates:{},facet_ranges:{},facet_intervals:{},facet_heatmaps:{}}}},{key:"setParams",value:function(){this.$state.transitionTo("customers.list",this.$stateParams,{notify:!1})}},{key:"getCustomers",value:function(a){var b=this;return this.params.email&&!this.Prototype.validateEmail(this.params.email)?null:(a&&(this.list=[],this.params.start=0,this.params.offset=0,this.ui.lazyLoad=!0,this.ui.loading=!1,this.$window.scrollTo(0,0)),this.ui.lazyLoad?(this.ui.lazyLoad=!1,this.ui.loading=!0,this.$timeout.cancel(this.timeout),this.timeout=this.$timeout(function(){b.$http.get("/users",{params:b.params}).then(function(c){if("undefined"==typeof c)return a&&(b.list=[]),void(b.ui.lazyLoad=!1);var d=c.data;d.forEach(function(a){var c=a;b.list.push(c)}),b.ui.loading=!1,b.params.offset=b.params.offset+b.params.limit,b.ui.lazyLoad=angular.equals(d.length,b.params.limit)})["catch"](function(){b.ui.loading=!1,b.toaster.pop("error","There was problem loading data. Please contact ShoppRe team"),a&&(b.list=[]),b.ui.lazyLoad=!1})},500),null):null)}},{key:"sort",value:function(a){this.params.sort=a,this.getCustomers(!0)}}]),a}();angular.module("uiGenApp").controller("CustomersListController",CustomersListController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CustomerOrdersIndexController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){_classCallCheck(this,a),this.Page=q,this.QCONFIG=b,this.$scope=c,this.$stateParams=d,this.$location=e,this.$state=f,this.Prototype=g,this.$rootScope=h,this.$timeout=i,this.$window=j,this.$http=k,this.moment=l,this.$uibModal=m,this.OrderFilter=r,this.Session=n,this.customer=s,this.sorts=[{id:1,name:"Default",key:"-"},{id:1,name:"Update Date",key:"updated_at DESC"},{id:2,name:"Created Date",key:"created_at DESC"}],this.ExcelDownload=o,this.states=this.Session.read("adminOrder-states"),this.ChangeOrderState=p,this.$onInit()}return a.$inject=["QCONFIG","$scope","$stateParams","$location","$state","Prototype","$rootScope","$timeout","$window","$http","moment","$uibModal","Session","ExcelDownload","ChangeOrderState","Page","OrderFilter","customer"],_createClass(a,[{key:"$onInit",value:function(){var a=this;return this.facets={},this.orderStateId=this.QCONFIG.ORDER_STATE_IDS,this.initializing=!0,this.timeout=this.$timeout(function(){}),this.customer=this.customer||{},this.Page.setTitle((this.customer.name?this.customer.name+" - ":"")+" "+(this.$stateParams.bucket?this.$stateParams.bucket:"")+" Orders"),this.buckets=this.QCONFIG.ORDER_STATES,this.$stateParams.bucket=this.$stateParams.bucket||this.$location.search().bucket,this.buckets.includes(this.$stateParams.bucket)?(this.orders=[],this.ui={lazyLoad:!0,loading:!1},this.xquery="",this.params={sort:"-",offset:0,limit:15,q:this.xquery||"",fl:"id,name,state_id,state_name",sid:this.$stateParams.sid||""},this.$scope.$watch(function(){return a.xquery},function(){a.initializing?a.$timeout(function(){a.initializing=!1}):(a.$timeout.cancel(a.timeout),a.timeout=a.$timeout(function(){a.loadOrders(!0)},800))},!0),this.$scope.$on("loadMore",function(){return a.loadOrders()}),void this.loadOrders()):void this.$state.go("customer.orders.index",{bucket:"TASKS"})}},{key:"sort",value:function(a){this.params.sort=a,this.loadOrders(!0)}},{key:"openOrderFilter",value:function(){var a=this,b={states:(this.$stateParams.sid||"").split(",").map(Number)},c={all:{states:this.facets.stateIds.map(function(c){return{id:c,name:a.states.filter(function(a){return a&&a.id===Number(c)})[0].action,checked:b.states.includes(Number(c))}})}};this.OrderFilter.open(c).then(function(b){a.$state.transitionTo(a.$state.current.name,Object.assign(a.$stateParams,{sid:b.states&&b.states.join(",")}),{notify:!1}),a.$onInit()})}},{key:"loadOrders",value:function(){var a=this;"Interview"===this.$stateParams.bucket?(this.params.interview_time=[this.moment().startOf("day").toISOString(),this.moment().startOf("day").add(1,"months").toISOString()].join(","),this.params.fl+=",interview_time,interview_type"):this.params.bucket=this.$stateParams.bucket.replace(" ","_").toUpperCase();var b=this.$stateParams.type,c="";"self_purchased"===b?(c="cod",this.cod=!0,this.ps=!1):"assisted_purchased"===b&&(c="ps",this.ps=!0,this.cod=!1),this.$http.get("/users/"+this.$stateParams.id+"/orders?shopperType="+c,{params:this.params}).then(function(b){var c,d=b.data,e=d.orders,f=d.total,g=d.oldfacets,h=e;return console.log(h),h.length||"access.oauth"!==a.$rootScope.previousState?((c=a.orders).push.apply(c,_toConsumableArray(h)),a.total=f,a.ui.loading=!1,a.ui.lazyLoad=angular.equals(h.length,a.params.limit),a.params.offset=a.params.offset+a.params.limit,void(g&&(a.facets.stateIds=Object.keys(g.state_id).filter(function(a){return Number(g.state_id[a])}).map(Number)))):void a.$state.go("customer.orders.index",{bucket:"ALL"})})["catch"](function(){})}}]),a}();angular.module("uiGenApp").controller("CustomerOrdersIndexController",CustomerOrdersIndexController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("customer.orders",{"abstract":!0,url:"/orders",template:"<div ui-view></div>"}).state("customer.orders.index",{url:"?bucket&sid&uid&type",templateUrl:"app/routes/customers/orders/index/index.html",controller:"CustomerOrdersIndexController",controllerAs:"$ctrl",resolve:{customer:["$http","$stateParams",function(a,b){return a.get("/users/"+b.id).then(function(a){var b=a.data;return b})}]}})}]);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageBulkController=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.Session=i,this.Page=b,this.$http=e,this.$state=c,this.customer=g,this.$stateParams=d,this.toaster=f,this.Number=Number,this.$=$,this.submitting=!1,this.data=h||{},this.$onInit()}return _createClass(a,[{key:"$onInit",value:function(){var a=this;this.customer.create=this.$stateParams.create,this.invoice=[],this.focus("store_id"),this.EDIT=!!this.$stateParams.packageId&&""!==this.$stateParams.packageId,this.quickMode=!this.EDIT&&(this.Session.read("quickMode")||!0),this.TITLE=" Bulk Package Upload",this.Page.setTitle(this.TITLE),this.getPopularStores(),this.Store={select:function(b){a.data.store_id=b.id,a.Store.model=b.name},setId:function(){if(!a.Store.lastSearchResults)return a.Store.lastSearchResults;var b=(a.Store.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.Store.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.Store.select(d):null},blur:function(){return a.Store.lastSearchResults?a.Store.setId():a.Store.get(a.Store.model).then(function(){return a.Store.setId()})},get:function(b){return a.$http.get("/search",{params:{type:"Store",q:b}}).then(function(b){var c=b.data.items;return a.Store.lastSearchResults=c,c})},noResults:!1,loadingStore:!1},this.getPackages()}},{key:"reset",value:function(a){this.data={},this.Store.model="",a.$setPristine(),this.focus("store_id")}},{key:"focus",value:function(a){$('input[name="'+a+'"]')[0].focus()}},{key:"getPopularStores",value:function(){var a=this;this.$http.get("/stores",{params:{type:"popular",fl:"id,name",limit:5}}).then(function(b){var c=b.data.stores;a.popularStores=c})}},{key:"changeMode",value:function(){this.Session.create("quickMode",this.quickMode)}},{key:"addNewPackage",value:function(a){this.create(a)}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"getPackages",value:function(){var a=this;this.$http.get("/packages/bulkIndex",{params:{customer_id:this.$stateParams.id}}).then(function(b){var c=b.data.packagesList;a.invoice=c})}},{key:"create",value:function(a){var b=this;if(!this.data.store_id)return this.toaster.pop("error","Store not found");if(this.submitting)return null;this.submitting=!0,this.clickUpload=!0;var c=this.validateForm(a),d=Object.assign({},this.data);if(!c)return this.submitting=!1;var e=this.$stateParams,f=e.packageId,g=e.id;d.customer_id=g;var h=["is_doc","store_id","invoice_code","virtual_address_code","weight","price_amount","customer_id","content_type","is_restricted_item","is_wrong_item","is_medicine"],i=f?"put":"post";return this.$http[i]("/packages"+(f?"/"+f:""),_.pick(d,h)).then(function(a){var c=a.data;b.pkg=c;var d=c.id,e=c.Locker,f=void 0===e?{}:e;b.submitting=!1,b.invoice.push({invoice_code:b.data.invoice_code,id:d}),b.customer.Locker||(b.customer.Locker=f),b.toaster.pop("success","#"+d+" Package Created Successfully.",""),b.data.invoice_code=""})["catch"](function(c){403===c.status?b.toaster.pop("error","You can not add Packages to Admin Accounts"):b.toaster.pop("error","There was problem creating package. Please contact Shoppre team."),b.submitting=!1;var d=c.data.field;a[c.data.field].$setValidity("required",!1),$('input[name="'+d+'"]')[0].focus(),b.error=c.data})}}]),a}();angular.module("uiGenApp").controller("PackageBulkController",PackageBulkController);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageCreateController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.Session=i,this.Page=b,this.$http=e,this.$state=c,this.customer=g,this.$stateParams=d,this.toaster=f,this.Number=Number,this.createStore=j,this.$=$,this.submitting=!1,this.data=h||{},this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","customer","pkg","Session","createStore"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.customer.create=this.$stateParams.create,this.focus("store_id"),this.EDIT=!!this.$stateParams.packageId&&""!==this.$stateParams.packageId,this.quickMode=!this.EDIT&&(this.Session.read("quickMode")||!0),this.internalBarcode=!this.EDIT&&(this.Session.read("barcodeMode")||!0),this.TITLE=(this.EDIT?"Edit":"Add New")+" Package",this.Page.setTitle(this.TITLE),this.getPopularStores(),this.Store={select:function(b){a.data.store_id=b.id,a.Store.model=b.name},setId:function(){if(!a.Store.lastSearchResults)return a.Store.lastSearchResults;var b=(a.Store.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.Store.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.Store.select(d):null},blur:function(){return a.Store.lastSearchResults?a.Store.setId():a.Store.get(a.Store.model).then(function(){return a.Store.setId()})},get:function(b){return a.$http.get("/search",{params:{type:"Store",q:b}}).then(function(b){var c=b.data.items;return a.Store.lastSearchResults=c,c})},noResults:!1,loadingStore:!1},this.EDIT&&(this.data.Store?this.Store.model=this.data.Store.name:this.Store.model=null)}},{key:"invoiceCode",value:function(){var a=this,b=this.data.invoice_code;b&&(this.isDuplicatedInvoice=!1,this.$http.get("/packages/searchCode",{params:{q:b}}).then(function(b){var c=b.data.message;return a.isDuplicatedInvoice=!1,c})["catch"](function(b){404===b.status?(a.isDuplicatedInvoice=!0,a.toaster.pop("error","Duplicate Invoice Code Entered , Please Enter New")):a.toaster.pop("error","There was problem creating package. Please contact Shoppre team.")}))}},{key:"open",value:function(){this.createStore.open()}},{key:"reset",value:function(a){this.data={},this.Store.model="",a.$setPristine(),this.focus("store_id")}},{key:"focus",value:function(a){$('input[name="'+a+'"]')[0].focus()}},{key:"getPopularStores",value:function(){var a=this;this.$http.get("/stores",{params:{type:"popular",fl:"id,name",limit:5}}).then(function(b){var c=b.data.stores;a.popularStores=c})}},{key:"changeMode",value:function(){this.Session.create("quickMode",this.quickMode)}},{key:"changeBarcodeMode",value:function(){this.Session.create("barcodeMode",this.internalBarcode)}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"create",value:function(a){var b=this;if(!this.data.store_id)return this.toaster.pop("error","Store not found");if(this.submitting)return null;this.submitting=!0,this.clickUpload=!0;var c=this.validateForm(a),d=Object.assign({},this.data);if(!c)return this.submitting=!1;var e=this.$stateParams,f=e.packageId,g=e.id;d.customer_id=g;var h=["is_doc","store_id","invoice_code","virtual_address_code","weight","price_amount","customer_id","content_type","is_restricted_item","is_wrong_item","rack_number","is_independence_offer","barcode_number","is_medicine"],i=f?"put":"post";return this.$http[i]("/packages"+(f?"/"+f:""),_.pick(d,h)).then(function(c){var d=c.data;b.pkg=d;var e=d.id,f=d.Locker,g=void 0===f?{}:f;return b.submitting=!1,b.customer.Locker||(b.customer.Locker=g),b.toaster.pop("success","#"+e+" Package "+(b.EDIT?"Updated":"Created")+" Successfully.",""),b.EDIT?b.$state.go("package.show",{id:e}):b.reset(a)})["catch"](function(c){403===c.status?b.toaster.pop("error",c.data.error):404===c.status?b.toaster.pop("error",c.data.error):b.toaster.pop("error","There was problem creating package. Please contact Shoppre team."),b.submitting=!1;var d=c.data.field;a[c.data.field].$setValidity("required",!1),$('input[name="'+d+'"]')[0].focus(),b.error=c.data})}}]),a}();angular.module("uiGenApp").controller("PackageCreateController",PackageCreateController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CustomersPackagesIndexController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n){_classCallCheck(this,a),this.QCONFIG=b,this.$stateParams=c,this.$http=i,this.$state=j,this.$filter=d,this.$window=f,this.customer=h,this.moment=e,this.Session=k,this.Prototype=l,this.sorts=[{id:1,name:"Default",key:"-"},{id:1,name:"Update Date",key:"updated_at DESC"},{id:2,name:"Created Date",key:"created_at DESC"}],this.ExcelDownload=m,this.ChangeState=n,this.Page=g,this.$onInit()}return a.$inject=["QCONFIG","$stateParams","$filter","moment","$window","Page","customer","$http","$state","Session","Prototype","ExcelDownload","ChangeState"],_createClass(a,[{key:"$onInit",value:function(){return this.todayDate="",this.buckets=this.QCONFIG.PACKAGE_STATES,this.packageStateId=this.QCONFIG.PACKAGE_STATE_IDS,this.customer=this.customer||{},this.customer.create=this.$stateParams.create,this.Page.setTitle((this.customer.name?this.customer.name+" - ":"")+" "+(this.$stateParams.bucket?this.$stateParams.bucket:"")+" Packages"),this.buckets.includes(this.$stateParams.bucket)?(this.packages=[],this.ui={lazyLoad:!0,loading:!1},this.params={sort:"-",offset:0,limit:15,fl:"id,name",bucket:this.$stateParams.bucket.replace(" ","_").toUpperCase(),sid:this.$stateParams.sid||""},void this.loadPackages(!0)):void this.$state.go("customer.packages.index",{bucket:"TASKS"})}},{key:"sort",value:function(a){this.params.sort=a,this.loadPackages(!0)}},{key:"loadPackages",value:function(a){var b=this;a&&(this.params.offset=0,this.ui.lazyLoad=!0,this.packages=[],this.$window.scrollTo(0,0)),this.ui.lazyLoad&&(this.ui={lazyLoad:!1,loading:!0},this.$http.get("/users/"+this.$stateParams.id+"/packages",{params:this.params}).then(function(a){var c,d=a.data,e=d.packages,f=d.total;(c=b.packages).push.apply(c,_toConsumableArray(e)),b.todayDate=new Date,b.packages.map(function(a){var c=a,d=new Date(c.created_at);return c.totalDays=Math.ceil(Math.abs(b.todayDate.getTime()-d.getTime())/864e5),c}),b.total=f,b.ui.loading=!1,b.ui.lazyLoad=angular.equals(e.length,b.params.limit),b.params.offset=b.params.offset+b.params.limit}))}},{key:"getPackage",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?"id":arguments[1];return this.$filter("filter")(this.packages,a).map(function(a){return a[b]})}},{key:"setChecked",value:function(a){var b=this;angular.forEach(this.packages,function(c,d){return b.packages[d].checked=a})}}]),a}();angular.module("uiGenApp").controller("CustomersPackagesIndexController",CustomersPackagesIndexController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("customer.packages",{"abstract":!0,url:"/packages",template:"<div ui-view></div>"}).state("customer.packages.index",{url:"?bucket&sid&uid&create",templateUrl:"app/routes/customers/packages/index/index.html",controller:"CustomersPackagesIndexController",controllerAs:"$ctrl",resolve:{customer:["$http","$stateParams",function(a,b){return a.get("/users/"+b.id).then(function(a){var b=a.data;return b})}]}}).state("customer.packages.create",{url:"/create?create",templateUrl:"app/routes/customers/packages/create/create.html",controller:"PackageCreateController",controllerAs:"$ctrl",resolve:{pkg:function(){return null},customer:["$http","$stateParams",function(a,b){return a.get("/users/"+b.id).then(function(a){var b=a.data;return b})}]}}).state("customer.package",{"abstract":!0,url:"/packages/:packageId",template:"<div ui-view></div>"}).state("customer.package.update",{url:"/update",templateUrl:"app/routes/customers/packages/create/create.html",controller:"PackageCreateController",controllerAs:"$ctrl",resolve:{customer:["$http","$stateParams","toaster",function(a,b,c){return a.get("/users/"+b.id).then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading customer")})}],pkg:["$http","$stateParams","toaster",function(a,b,c){var d=["id","customer_id","invoice_code","created_at","weight","is_doc","price_amount","content_type","is_restricted_item","rack_number","is_independence_offer","is_wrong_item","is_medicine"].join(",");return a.get("/packages/"+b.packageId+"?fl="+d).then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading package")})}],charges:["$http","$stateParams","toaster",function(a,b,c){return a.get("/packages/"+b.packageId+"/charges").then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading package")})}]}})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ShipmentCreateController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m){_classCallCheck(this,a),this.Session=j,this.Page=b,this.$http=e,this.$state=c,this.customer=g,this.$stateParams=d,this.$httpParamSerializer=k,this.toaster=f,this.Number=Number,this.moment=l,this.URLS=m,this.QCONFIG=i,this.$=$,this.shipment=h,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","customer","shipment","QCONFIG","Session","$httpParamSerializer","moment","URLS"],_createClass(a,[{key:"$onInit",value:function(){this.submitting=!1,this.submittingTracking=!1,this.data=this.shipment||{},this.independence_offer_eligible=this.data.Packages.some(function(a){return a.is_independence_offer}),this.todayDate=this.moment().format("YYYY-MM-DD"),this.Validitydate=this.moment(this.data.Customer.membership_validity).format("YYYY-MM-DD");var a=new Date(this.Validitydate);a>=new Date(this.todayDate)&&(this.isMember=!0),this.data.Country.name=this.data.Country.name.toUpperCase(),this.EDIT=!!this.$stateParams.shipmentId&&""!==this.$stateParams.shipmentId,this.quickMode=!this.EDIT&&(this.Session.read("quickMode")||!1),this.TITLE=(this.EDIT?"Edit":"Add New")+" Shipment",this.Page.setTitle(this.TITLE),this.afterShipCarriers=this.Session.read("afterShipCarriers"),this.paymentMode(this.data),this.priceEditStates=[16,17,18,19,21,100,101],this.cartonBox=this.QCONFIG.CARTON_BOX,this.data.offer_parameters&&(this.data.offers=this.data.offer_parameters.split(",")),this.data.final_weight>=0&&this.data.final_weight<5.5&&this.getPrice()}},{key:"calculateFinalWeight",value:function(){var a=this;this.submitting=!0;var b=this.data.box_length,c=this.data.box_width,d=this.data.box_height,e=Number((b*c*d/5e3).toFixed(2));e>0&&e<.5&&(e=.5);var f=e%1;.5!==f&&f>0&&(e-=f,f=f>0?f=f>=.5?1:.5:0,e+=f);var g=this.data.weight>e?this.data.weight:e;if(this.data.volumetric_weight=e,this.data.final_weight=g,!g)return void(this.submitting=!1);if("IN"===this.data.Country.iso2)return void(this.submitting=!1);var h=this.URLS.PREFIX+"logistics."+this.URLS.DOMAIN+"/api/pricing?all=true&country="+this.data.Country.iso2+"&type=nondoc&weight="+g+"&length="+b+"&width="+c+"&height="+d+"&scale=cm&unit=kg&internalQuery=true";this.$http.get(h).then(function(b){var c=b.data.prices,d=c[0];a.data.discount_amount=Number(d.customerRate.toFixed(2)),a.updateDiscountPrice(),a.data.sub_total_amount=2*Number(d.customerRate.toFixed(2)),a.submitting=!1})["catch"](function(){a.submitting=!1})}},{key:"reset",value:function(a){this.data={},this.Store.model="",a.$setPristine(),this.focus("store_id")}},{key:"focus",value:function(a){$('input[name="'+a+'"]')[0].focus()}},{key:"changeMode",value:function(){this.Session.create("quickMode",this.quickMode)}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"trackingUpdate",value:function(a){var b=this;if(this.submittingTracking)return null;this.submittingTracking=!0,this.clickUpload=!0;var c=this.validateForm(a),d=this.afterShipCarriers.filter(function(a){if(a.carrier===b.data.shipping_carrier)return a}),e=Object.assign({},this.data);if(Object.assign(e,{afterShip_slug:d[0].slug}),!c)return this.submittingTracking=!1;var f=["shipping_carrier","number_of_packages","weight_by_shipping_partner","tracking_code","tracking_url","afterShip_slug","is_cs5"],g=this.$stateParams,h=g.shipmentId,i=g.id;e.customer_id=i;var j="put";return this.$http[j]("/shipments/"+h+"/tracking",_.pick(e,f)).then(function(a){var c=a.data;b.shipment=c;var d=c.Locker,e=void 0===d?{}:d;b.submittingTracking=!1,b.customer.Locker||(b.customer.Locker=e),b.toaster.pop("success","Shipment Tracking Updated")})["catch"](function(a){b.submittingTracking=!1,409===a.status?b.toaster.pop("error",a.data.error):(b.toaster.pop("error","There was problem while updating Tracking"),b.error=a.data)})}},{key:"create",value:function(a){var b=this;if(this.priceEditStates.indexOf(this.data.state_id)===-1)return this.toaster.pop("info","Already payment is received, contact tech team"),null;var c="";if(this.data.offers&&(c=this.data.offers.toString()),this.submitting)return null;this.submitting=!0,this.clickUpload=!0;var d=this.validateForm(a),e=Object.assign({},this.data);if(Object.assign(e,{liquid_charge_amount:this.data.ShipmentMetum.liquid_charge_amount}),Object.assign(e,{other_charge_amount:this.data.ShipmentMetum.other_charge_amount}),Object.assign(e,{consolidation_charge_amount:this.data.ShipmentMetum.consolidation_charge_amount}),Object.assign(e,{remote_area_charge_amount:this.data.ShipmentMetum.remote_area_charge_amount}),Object.assign(e,{commercial_charge_amount:this.data.ShipmentMetum.commercial_charge_amount}),Object.assign(e,{offer_parameters:c}),!d)return this.submitting=!1;var f=this.$stateParams,g=f.shipmentId,h=f.id;e.customer_id=h;var i=["customer_name","phone","address","packages_count","final_weight","weight","volumetric_weight","value_amount","sub_total_amount","discount_amount","package_level_charges_amount","pick_up_charge_amount","liquid_charge_amount","estimated_amount","coupon_amount","loyalty_amount","payment_gateway_fee_amount","wallet_amount","final_amount","shipment_type_id","other_charge_amount","box_length","box_height","box_width","remote_area_charge_amount","commercial_charge_amount","offer_parameters","consolidation_charge_amount"],j="put";
return this.$http[j]("/shipments"+(g?"/"+g:""),_.pick(e,i)).then(function(a){var c=a.data;b.data.estimated_amount=c.estimated_amount,b.data.package_level_charges_amount=c.package_level_charges_amount,b.submitting=!1,b.toaster.pop("success","#"+g+" Shipment "+(b.EDIT?"Updated":"Created")+" Successfully.","")})["catch"](function(c){b.submitting=!1;var d=c.data.field;a[c.data.field].$setValidity("required",!1),$('input[name="'+d+'"]')[0].focus(),b.toaster.pop("error","There was problem updating shipment."),b.error=c.data})}},{key:"cartonValue",value:function(){var a=this,b=this.cartonBox.filter(function(b){return b.kg===a.data.carton_box_used});this.data.carton_box_Amount=b[0].amount}},{key:"getPrice",value:function(){var a=this,b=this.data.is_doc===!0?"doc":"nondoc",c=this.shipment.Country.iso2,d="all=true&country="+c+"&weight="+this.data.final_weight+"&type="+b;this.$http.get("&/pricing/?"+d).then(function(e){var f=e.data.prices;if(f[0]){a.data.final_cost=f[0].final_cost;var g=5.5;d="all=true&country="+c+"&weight="+g+"&type="+b,a.$http.get("&/pricing/?"+d).then(function(b){var c=b.data;c.prices[0]&&(a.final_cost=c.prices[0].final_cost,a.enableBestPrice())})}})}},{key:"enableBestPrice",value:function(){this.data.final_weight>=0&&this.data.final_weight<5.5&&this.final_cost<this.data.final_cost?this.bestPrice=!0:this.bestPrice=!1}},{key:"getUpstreamPrice",value:function(){var a=this,b=this.data.is_doc===!0?"doc":"nondoc",c=this.shipment.Country.iso2,d="all=true&country="+c+"&weight="+this.data.final_weight+"&type="+b;this.$http.get("&/pricing/?"+d).then(function(b){var c=b.data.prices;c[0]?(a.data.upstream_cost=c[0].base_cost_from_upstream,a.data.fuel_sur_charge=c[0].fuel_surcharge,a.data.gst_amount=c[0].gst):(a.data.upstream_cost=0,a.data.fuel_sur_charge=0,a.data.gst_amount=0,a.toaster.pop("error","Price not found"))})}},{key:"updateSubtotal",value:function(){this.data.sub_total_amount=2*this.data.discount_amount}},{key:"updateCountryDiscount",value:function(){this.data.discount_amount=this.data.sub_total_amount/2,this.updateDiscountPrice()}},{key:"updateDiscountPrice",value:function(){return this.isMember?(this.discountMessage="5% discount applied",this.data.discount_amount=Math.round(this.data.discount_amount-5*this.data.discount_amount/100)):void(this.discountMessage="")}},{key:"fetchPrice",value:function(){var a=this;if(this.priceEditStates.includes(this.data.state_id)){this.submitting=!0;var b=this.data.is_doc===!0?"doc":"nondoc",c=this.shipment.Country.iso2,d="all=true&country="+c+"&weight="+this.data.final_weight+"&type="+b+"&internalQuery=true";this.$http.get("&/pricing/?"+d).then(function(b){var c=b.data.prices;c[0]?(a.data.sub_total_amount=2*c[0].customerRate,a.data.discount_amount=c[0].customerRate,a.updateDiscountPrice(),a.data.estimated_amount=a.data.sub_total_amount-a.data.discount_amount-a.data.package_level_charges_amount,a.data.final_cost=c[0].final_cost,a.enableBestPrice(),a.submitting=!1):(a.submitting=!1,a.toaster.pop("error","Price not found"))})}else this.toaster.pop("error","Please check the price before sending payment link")}},{key:"updateUpstreamPrice",value:function(){var a=this,b=["carton_box_Amount","is_doc","upstream_cost","fuel_sur_charge","gst_amount","carton_box_used","carton_box_Amount","carton_box_weight"];if("Other"!==this.data.carton_box_used)this.data.carton_box_weight=null;else if("Other"===this.data.carton_box_used&&!this.data.carton_box_weight)return this.toaster.pop("error","Enter Carton Box Weight"),void(this.submittingTracking=!1);var c=this.$stateParams.shipmentId;return this.$http.put("/shipments/"+c+"/upstream",_.pick(this.data,b)).then(function(b){var c=b.data,d=c.liveCode,e=c.connectingCode;a.data.tracking_url=d,a.data.connecting_tracking_code=e,a.toaster.pop("success","Upstream price Updated")})["catch"](function(b){a.toaster.pop("error","Error updating Upstream price")})}},{key:"paymentMode",value:function(a){var b=this;if(a.transaction_id){var c={object_id:a.order_code,customer_id:a.customer_id},d=this.$httpParamSerializer(c);this.$http.get("$/transactions/"+a.transaction_id+"/response?"+d).then(function(a){b.transaction=a})["catch"](function(){b.toaster.pop("error","There was problem loading data. Please contact ShoppRe team")})}}}]),a}();angular.module("uiGenApp").controller("ShipmentCreateController",ShipmentCreateController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CustomersShipmentsIndexController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n){_classCallCheck(this,a),this.QCONFIG=b,this.$stateParams=c,this.$http=i,this.$state=j,this.$filter=d,this.$window=f,this.customer=h,this.moment=e,this.Session=k,this.Prototype=l,this.sorts=[{id:1,name:"Default",key:"-"},{id:1,name:"Update Date",key:"updated_at DESC"},{id:2,name:"Created Date",key:"created_at DESC"}],this.ExcelDownload=m,this.ChangeShipmentState=n,this.Page=g,this.$onInit()}return a.$inject=["QCONFIG","$stateParams","$filter","moment","$window","Page","customer","$http","$state","Session","Prototype","ExcelDownload","ChangeShipmentState"],_createClass(a,[{key:"$onInit",value:function(){return this.todayDate="",this.shipmentStateId=this.QCONFIG.SHIPMENT_STATE_IDS,this.buckets=this.QCONFIG.SHIPMENT_STATES,this.states=this.Session.read("adminShipment-states"),this.customer=this.customer||{},this.Page.setTitle((this.customer.name?this.customer.name+" - ":"")+" "+(this.$stateParams.bucket?this.$stateParams.bucket:"")+" Shipments"),this.buckets.includes(this.$stateParams.bucket)?(this.shipments=[],this.ui={lazyLoad:!0,loading:!1},this.params={sort:"-",offset:0,limit:15,fl:"id,name",sid:this.$stateParams.sid||"",bucket:this.$stateParams.bucket},void this.loadShipments(!0)):void this.$state.go("customer.shipments.index",{bucket:"IN_REVIEW"})}},{key:"sort",value:function(a){this.params.sort=a,this.loadShipments(!0)}},{key:"loadShipments",value:function(a){var b=this;a&&(this.params.offset=0,this.ui.lazyLoad=!0,this.shipments=[],this.$window.scrollTo(0,0)),this.ui.lazyLoad&&(this.ui={lazyLoad:!1,loading:!0},this.$http.get("/users/"+this.$stateParams.id+"/shipments",{params:this.params}).then(function(a){var c,d=a.data,e=d.shipments,f=d.total;(c=b.shipments).push.apply(c,_toConsumableArray(e)),b.todayDate=new Date,b.shipments.map(function(a){var c=a,d=new Date(c.ShipmentState.created_at);return c.totalDays=Math.ceil(Math.abs(b.todayDate.getTime()-d.getTime())/864e5),c}),b.total=f,b.ui.loading=!1,b.ui.lazyLoad=angular.equals(e.length,b.params.limit),b.params.offset=b.params.offset+b.params.limit}))}},{key:"getShipment",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],b=arguments.length<=1||void 0===arguments[1]?"id":arguments[1];return this.$filter("filter")(this.shipments,a).map(function(a){return a[b]})}},{key:"setChecked",value:function(a){var b=this;angular.forEach(this.shipments,function(c,d){return b.shipments[d].checked=a})}}]),a}();angular.module("uiGenApp").controller("CustomersShipmentsIndexController",CustomersShipmentsIndexController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("customer.shipments",{"abstract":!0,url:"/shipments",template:"<div ui-view></div>"}).state("customer.shipments.index",{url:"?bucket&sid&uid",templateUrl:"app/routes/customers/shipments/index/index.html",controller:"CustomersShipmentsIndexController",controllerAs:"$ctrl",resolve:{customer:["$http","$stateParams",function(a,b){return a.get("/users/"+b.id).then(function(a){var b=a.data;return b})}]}}).state("customer.shipments.create",{url:"/create",templateUrl:"app/routes/customers/shipments/create/create.html",controller:"ShipmentCreateController",controllerAs:"$ctrl",resolve:{shipment:function(){return null},customer:["$http","$stateParams",function(a,b){return a.get("/users/"+b.id).then(function(a){var b=a.data;return b})}]}}).state("customer.shipment",{"abstract":!0,url:"/shipments/:shipmentId",template:"<div ui-view></div>"}).state("customer.shipment.update",{url:"/update",templateUrl:"app/routes/customers/shipments/create/create.html",controller:"ShipmentCreateController",controllerAs:"$ctrl",resolve:{customer:["$http","$stateParams","toaster",function(a,b,c){return a.get("/users/"+b.id).then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading customer")})}],shipment:["$http","$stateParams","toaster",function(a,b,c){var d=["id","customer_id","created_at","customer_name","phone","address","packages_count","final_weight","weight","volumetric_weight","value_amount","sub_total_amount","discount_amount","package_level_charges_amount","pick_up_charge_amount","estimated_amount","loyalty_amount","payment_gateway_fee_amount","wallet_amount","final_amount","coupon_amount","tracking_code","order_code","tracking_url","number_of_packages","weight_by_shipping_partner","shipping_carrier","dispatch_date","is_cs5","transaction_id","upstream_cost","fuel_sur_charge","gst_amount","carton_box_Amount","carton_box_used","carton_box_weight","country_id","connecting_tracking_code","box_width","box_height","box_length","offer_parameters"].join(",");return a.get("/shipments/"+b.shipmentId+"?fl="+d).then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading shipment")})}]}})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CustomerViewController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.$http=b,this.Page=c,this.$uibModal=d,this.toaster=e,this.$state=f,this.moment=i,this.$stateParams=g,this.URLS=h,this.id=this.$stateParams.id,this.Number=Number,this.submitProfile=!1,this.submitWallet=!1,this.editWallet=!1,this.editWalletId=!1,this.editWalletIndex=null,this.data={},this.transactions={},this.Session=j,this.shippingPreference={},this.MoreOption=!1,this.$counter=-1,this.$onInit()}return a.$inject=["$http","Page","$uibModal","toaster","$state","$stateParams","URLS","moment","Session"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.Page.setTitle("Address Book"),this.user=this.Session.read("adminUserinfo"),this.$http.get("/addresses?id="+this.id).then(function(b){var c=b.data;a.addresses=c}),this.Page.setTitle("Customer Profile"),this.Country={select:function(b){a.data.country_id=b.id,a.Country.model=b.name},get:function(b){return a.$http.get("/search",{params:{type:"Country",q:b}}).then(function(a){var b=a.data.items;return b})},noResults:!1,loadingCountry:!1},this.Page.setTitle("Shipping Preferences"),this.getMe(),this.getWalletTransactions(),this.getShippingPreferences(),this.fetchLockerCode()}},{key:"fetchLockerCode",value:function(){var a=this;this.$http.get("/users/"+this.id+"/lockerCode").then(function(b){var c=b.data;a.lockerCode=c.id})}},{key:"updateLockerCode",value:function(){var a=this;this.$http.put("/users/"+this.id+"/lockerCode",{code:this.lockerCode,customer_id:this.id}).then(function(b){var c=b.data.statsCode;return 409===c?a.toaster.pop("success","Already same locker number is Updated"):a.toaster.pop("success","Locker code changed to "+a.lockerCode)})}},{key:"viewWallet",value:function(a){var b=this;return this.submitWallet=!0,this.data.object_type=a,this.$http.get("*/transactions/"+this.id).then(function(a){var c=a.data;b.transactions=c.Transactions,b.userBalance=c,b.walletAmount=c.wallet_amount,b.submitWallet=!1,console.log(b.MoreOption)})}},{key:"createWallet",value:function(a){var b=this;this.submitWallet=!0;var c=Object.assign({},this.data);Object.assign(c,{created_by:this.user.id}),c.customer_id=this.id;var d=["description","amount","customer_id","object_type","created_by"];return this.$http.post("*/transactions",_.pick(c,d)).then(function(d){if(400===d.data.status)return b.submitWallet=!1,b.toaster.pop("error","Found Douplicate Transaction.. Please Check Balance","");var e={amount:c.amount,created_at:Date.now(),description:c.description,created_by:b.user.id};switch(b.transactions.push(e),b.data.description="",b.walletAmount=b.walletAmount+b.data.amount,b.submitWallet=!1,c.object_type){case"parcel":b.userBalance.parcel_wallet_amount=b.userBalance.parcel_wallet_amount+c.amount;break;case"ps":b.userBalance.ps_wallet_amount=b.userBalance.ps_wallet_amount+c.amount;break;case"courier":b.userBalance.courier_wallet_amount=b.userBalance.courier_wallet_amount+c.amount;break;case"marketing":b.userBalance.marketing_wallet_amount=b.userBalance.marketing_wallet_amount+c.amount}return b.data.amount="",b.reset(a),b.toaster.pop("success","Success","")})["catch"](function(a){b.submitWallet=!1})}},{key:"getMe",value:function(){var a=this;this.$http.get("/users/"+this.id).then(function(b){var c=b.data;a.data=c})}},{key:"getWalletTransactions",value:function(){var a=this;this.$http.get("*/transactions?customer_id="+this.id).then(function(b){var c=b.data;a.walletAmount=c.wallet_amount,a.transactions=c.Transactions})}},{key:"getShippingPreferences",value:function(){var a=this;this.$http.get("/users/"+this.id+"/shippingPreference").then(function(b){var c=b.data.shippingPreference;a.shippingPreference=c[0]})}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"update",value:function(a){var b=this;if(this.submitProfile)return null;this.submitProfile=!0,this.clickUpload=!0;var c=this.validateForm(a),d=Object.assign({},this.data);return Object.assign(d,{membership_validity:this.membership_validity||this.data.membership_validity}),Object.assign(d,{membership_start_date:this.membership_start_date||this.data.membership_start_date}),c?this.$http.put("/users/"+this.id,d).then(function(){b.submitProfile=!1,b.toaster.pop("success","Profile Updated Successfully.","")})["catch"](function(c){b.submitProfile=!1;var d=c.data.field;a[c.data.field].$setValidity("required",!1),$('input[name="'+d+'"]')[0].focus(),b.toaster.pop("error","There was problem updating profile details. Please contact Shoppre team."),b.error=c.data}):this.submitProfile=!1}},{key:"reset",value:function(a){a.$setPristine()}},{key:"deleteWalletTransaction",value:function(a,b,c,d,e){var f=this;this.$http["delete"]("/transactions/"+b+"?customer_id="+a+"&amount="+c).then(function(){return f.toaster.pop("success","Wallet Transaction Successfully Deleted"),f.transactions.splice(e,1)})["catch"](function(a){var b="";b=403===a.status?a.data.message:"There was problem deleting Wallet Transaction",f.toaster.pop("error",b)})}},{key:"editWalletTransaction",value:function(a,b,c,d,e){this.editWalletId=b,this.editWallet=!0,this.editWalletIndex=e,this.data.description=d,this.data.amount=c}}]),a}();angular.module("uiGenApp").controller("CustomerViewController",CustomerViewController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("feeds",{"abstract":!0,url:"/feeds",template:"<div ui-view></div>"}).state("feeds.index",{url:"?bucket",templateUrl:"app/routes/feeds/index/index.html",controller:"FeedIndexController",controllerAs:"$ctrl"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),FeedIndexController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.QCONFIG=b,this.$stateParams=c,this.$http=g,this.$state=h,this.$window=e,this.moment=d,this.Session=i,this.Prototype=j,this.Page=f,this.$onInit()}return a.$inject=["QCONFIG","$stateParams","moment","$window","Page","$http","$state","Session","Prototype"],_createClass(a,[{key:"$onInit",value:function(){this.buckets=["PACKAGE","SHIPMENT"],this.redirectUrl="",this.currentBucket=this.$stateParams.bucket,"PACKAGE"===this.$stateParams.bucket?(this.redirectUrl="package.show",this.getPackageComments()):(this.redirectUrl="shipment.show",this.getShipmentComments())}},{key:"getPackageComments",value:function(){var a=this;this.$http.get("/packages/comments").then(function(b){var c=b.data;console.log("response",a.comments),a.comments=c})}},{key:"getShipmentComments",value:function(){var a=this;this.$http.get("/shipments/comments").then(function(b){var c=b.data;a.comments=c})}}]),a}();angular.module("uiGenApp").controller("FeedIndexController",FeedIndexController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),NotificationsIndexController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){_classCallCheck(this,a),this.Page=o,this.QCONFIG=b,this.$scope=c,this.$stateParams=d,this.$location=e,this.$state=f,this.Prototype=g,this.$rootScope=h,this.$timeout=i,this.$window=j,this.$http=k,this.moment=l,this.$uibModal=m,this.Session=n,this.toaster=p,this.$onInit()}return a.$inject=["QCONFIG","$scope","$stateParams","$location","$state","Prototype","$rootScope","$timeout","$window","$http","moment","$uibModal","Session","Page","toaster"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.initializing=!0,this.timeout=this.$timeout(function(){}),this.notifications=[],this.ui={lazyLoad:!0,loading:!1},this.xquery="",this.params={offset:0,limit:15,q:this.xquery||""},this.$scope.$watch(function(){return a.xquery},function(){a.initializing?a.$timeout(function(){a.initializing=!1}):(a.$timeout.cancel(a.timeout),a.timeout=a.$timeout(function(){a.loadNotifications(!0)},800))},!0),this.$scope.$on("loadMore",function(){return a.loadNotifications()}),this.loadNotifications()}},{key:"loadNotifications",value:function(a){var b=this;a&&(this.params.offset=0,this.ui.lazyLoad=!0,this.notifications=[],this.$window.scrollTo(0,0)),this.ui.lazyLoad&&(this.ui={lazyLoad:!1,loading:!0},this.params.q=this.xquery||"","Interview"===this.$stateParams.bucket&&(this.params.interview_time=[this.moment().startOf("day").toISOString(),this.moment().startOf("day").add(1,"months").toISOString()].join(","),this.params.fl+=",interview_time,interview_type"),this.$http.get("#/chatNotification/show",{params:this.params}).then(function(c){var d,e=c.data,f=e;return"undefined"==typeof f?(a&&(b.notifications=[]),void(b.ui.lazyLoad=!1)):((d=b.notifications).push.apply(d,_toConsumableArray(f)),b.ui.loading=!1,b.ui.lazyLoad=angular.equals(f.length,b.params.limit),void(b.params.offset=b.params.offset+b.params.limit))})["catch"](function(){a&&(b.notifications=[]),b.ui.lazyLoad=!1}))}},{key:"showComment",value:function(a,b){var c=this;1===b?this.$state.go("package.show",{id:a}):2===b?this.$state.go("shipment.show",{id:a}):4===b&&this.$http.get("/orders/"+a+"/orderCode").then(function(a){var b=a.data;c.orders=b.orderCode,c.$state.go("order.show",{id:c.orders})})["catch"](function(){})}},{key:"markRead",value:function(a,b){var c=this,d="",e="";1===b?(e="packages",d="#/"+e+"/"+a+"/comments?type=admin"):2===b?(e="shipments",d="#/"+e+"/"+a+"/comments?type=admin"):(e="orders",d="#/"+e+"/"+a+"/comments?type=admin"),this.$http.put(d).then(function(a){var b=a.data;c.toaster.pop("success",b)})}}]),a}();angular.module("uiGenApp").controller("NotificationsIndexController",NotificationsIndexController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("notifications",{"abstract":!0,url:"/notifications",template:"<div ui-view></div>"}).state("notifications.index",{url:"/index",templateUrl:"app/routes/notifications/index/index.html",controller:"NotificationsIndexController",controllerAs:"$ctrl"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),OrdersIndexController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){_classCallCheck(this,a),this.Page=q,this.QCONFIG=b,this.$scope=c,this.$stateParams=d,this.$location=e,this.$state=f,this.Prototype=g,this.$rootScope=h,this.$timeout=i,this.$window=j,this.$http=k,this.moment=l,this.$uibModal=m,this.OrderFilter=r,this.Session=n,this.toaster=s,this.sorts=[{id:1,name:"Default",key:"-"},{id:1,name:"Update Date",key:"updated_at DESC"},{id:2,name:"Created Date",key:"created_at DESC"}],this.ExcelDownload=o,this.states=this.Session.read("adminOrder-states"),this.ChangeOrderState=p,this.$onInit()}return a.$inject=["QCONFIG","$scope","$stateParams","$location","$state","Prototype","$rootScope","$timeout","$window","$http","moment","$uibModal","Session","ExcelDownload","ChangeOrderState","Page","OrderFilter","toaster"],_createClass(a,[{key:"$onInit",value:function(){var a=this;return this.facets={},this.orderStateId=this.QCONFIG.ORDER_STATE_IDS,this.initializing=!0,this.timeout=this.$timeout(function(){}),this.buckets=this.QCONFIG.ORDER_STATES,this.$stateParams.bucket=this.$stateParams.bucket||this.$location.search().bucket,this.buckets.includes(this.$stateParams.bucket)?(this.Page.setTitle(this.$stateParams.bucket+" Orders"),this.orders=[],this.ui={lazyLoad:!0,loading:!1},this.xquery="",this.params={sort:"-",offset:0,limit:15,q:this.xquery||"",fl:"id,name,state_id,state_name",sid:this.$stateParams.sid||""},this.$scope.$watch(function(){return a.xquery},function(){a.initializing?a.$timeout(function(){a.initializing=!1}):(a.$timeout.cancel(a.timeout),a.timeout=a.$timeout(function(){a.loadOrders(!0)},800))},!0),this.$scope.$on("loadMore",function(){return a.loadOrders()}),void this.loadOrders()):void this.$state.go("orders.index",{bucket:"TASKS"})}},{key:"selectAllOrders",value:function(a){var b=this;a?(this.orders.forEach(function(a,c){b.orders[c].isChecked=!0}),this.totalSelectedOrders=this.packages.length):(this.orders.forEach(function(a,c){b.orders[c].isChecked=!1}),this.totalSelectedOrders=0)}},{key:"selectOrders",value:function(){var a=0;this.orders.forEach(function(b){b.isChecked&&a++}),this.totalSelectedOrders=a,a===this.orders.length?this.allChecked=!0:this.allChecked=!1}},{key:"proceedToStateChange",value:function(a,b){var c=this,d=a.filter(function(a){return a.isChecked});d.map(function(a){var d=a;d.id&&c.$http.put("/orders/"+d.id+"/state?state_id="+b).then(function(){return c.toaster.pop("success","successfully updated"),location.reload(!0)})["catch"](function(a){c.toaster.pop("error",a.data.message)})})}},{key:"sort",value:function(a){this.params.sort=a,this.loadOrders(!0)}},{key:"openOrderFilter",value:function(){var a=this,b={states:(this.$stateParams.sid||"").split(",").map(Number)},c={all:{states:this.facets.stateIds.map(function(c){return{id:c,name:a.states.filter(function(a){return a&&a.id===Number(c)})[0].action,checked:b.states.includes(Number(c))}})}};this.OrderFilter.open(c).then(function(b){a.$state.transitionTo(a.$state.current.name,Object.assign(a.$stateParams,{sid:b.states&&b.states.join(",")}),{notify:!1}),a.$onInit()})}},{key:"loadOrders",value:function(){var a=this;"Interview"===this.$stateParams.bucket?(this.params.interview_time=[this.moment().startOf("day").toISOString(),this.moment().startOf("day").add(1,"months").toISOString()].join(","),this.params.fl+=",interview_time,interview_type"):this.params.bucket=this.$stateParams.bucket.replace(" ","_").toUpperCase();var b=this.$stateParams.type,c="";"self_purchased"===b?(c="cod",this.cod=!0,this.ps=!1):"assisted_purchased"===b&&(c="ps",this.ps=!0,this.cod=!1),this.$http.get("/orders?shopperType="+c,{params:this.params}).then(function(b){var c,d=b.data,e=d.orders,f=d.total,g=d.oldfacets,h=e;return h.length||"access.oauth"!==a.$rootScope.previousState?((c=a.orders).push.apply(c,_toConsumableArray(h)),a.total=f,a.ui.loading=!1,a.ui.lazyLoad=angular.equals(h.length,a.params.limit),a.params.offset=a.params.offset+a.params.limit,void(g&&(a.facets.stateIds=Object.keys(g.state_id).filter(function(a){return Number(g.state_id[a])}).map(Number)))):void a.$state.go("orders.index",{bucket:"ALL"})})["catch"](function(){})}}]),a}();angular.module("uiGenApp").controller("OrdersIndexController",OrdersIndexController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("orders",{"abstract":!0,url:"/orders",template:"<div ui-view></div>"}).state("orders.index",{url:"?bucket&sid&uid&type",templateUrl:"app/routes/orders/index/index.html",controller:"OrdersIndexController",controllerAs:"$ctrl"}).state("order",{"abstract":!0,url:"/orders/:id",template:"<div ui-view></div>"}).state("order.show",{url:"?{activeTab:int}",templateUrl:"app/routes/orders/show/show.html",controller:"OrderShowController",controllerAs:"$ctrl",resolve:{order:["$http","$stateParams","$state",function(a,b,c){var d=["id","customer_id","if_promo_unavailable","created_at","price_amount","instruction","promo_info","promo_discount","promo_code","sales_tax","delivery_charge","personal_shopper_cost","sub_total","total_quantity","is_cod_payment","seller_invoice","order_code","store_id","amount_paid","buy_if_price_changed","transaction_id"],e={fl:d.join(",")};return a.get("/orders/"+b.id,{params:e}).then(function(a){var b=a.data;return b})["catch"](function(){return c.go("access.404")})}]}}).state("order.update",{url:"/update",templateUrl:"app/routes/orders/update/update.html",controller:"OrderUpdateController",controllerAs:"$ctrl",resolve:{order:["$http","$stateParams","toaster",function(a,b,c){var d=["id","customer_id","created_at","price_amount","sales_tax","delivery_charge","personal_shopper_cost","sub_total","total_quantity","seller_invoice","order_code","store_id","amount_paid","is_cod_payment","credit_coupon_benifits","website_charges_price_change","ps_fee_price_change"],e={fl:d.join(",")};return a.get("/orders/"+b.id,{params:e}).then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading order")})}]}})}]);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),OrderShowController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){_classCallCheck(this,a),this.Number=Number,this.$scope=o,this.URLS=d,this.$sce=e,this.$http=b,this.$state=f,this.Page=h,this.Session=i,this.$q=j,this.$stateParams=c,this.toaster=n,this.ChangeOrderState=k,this.order=l,this.ListModal=m,this.moment=moment,this.$window=g,this.submitting=!1,this.$onInit()}return a.$inject=["$http","$stateParams","URLS","$sce","$state","$window","Page","Session","$q","ChangeOrderState","order","ListModal","toaster","$scope"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.data=this.order,this.states=this.Session.read("adminOrder-states"),this.user=this.Session.read("adminUserinfo"),this.totalSelectedItems=0,this.location=this.$window.location,this.customer=this.data.Customer,this.itemStatus=[{name:"pending",id:"pending"},{name:"orderplaced",id:"orderplaced"},{name:"recieved",id:"recieved"},{name:"cancelled",id:"cancelled"},{name:"outofstock",id:"outofstock"},{name:"pricechanged",id:"pricechanged"}],this.status=[{name:"addedtopackage",id:"addedtopackage"}],this.Page.setFavicon(""+this.$stateParams.profilePhotoUrl),this.getPopularPackageCategories(),this.PackageItemCategory={select:function(b){a.data.category_id=b.id,a.PackageItemCategory.model=b.name},setId:function(){var b=a.PackageItemCategory.lastSearchResults;if(!b)return a.PackageItemCategory.lastSearchResults;var c=(a.PackageItemCategory.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.PackageItemCategory.model.toLowerCase()}),d=_slicedToArray(c,1),e=d[0];return e?a.PackageItemCategory.select(e):null},blur:function(){return a.PackageItemCategory.lastSearchResults?a.PackageItemCategory.setId():a.PackageItemCategory.get(a.PackageItemCategory.model).then(function(){return a.PackageItemCategory.setId()})},get:function(b){return a.$http.get("/search",{params:{type:"PackageItemCategory",q:b}}).then(function(b){var c=b.data.items;return a.PackageItemCategory.lastSearchResults=c,c})},noResults:!1,loadingPackageItemCategory:!1},this.data.Store&&this.Page.setTitle(this.data.Store.name),this.root="_root_",this.modal={},this.editAllowedStates=[42,46,48,49,65,66,45,63,43,50,51,62,64,81,69],this.orderItems=[],this.charges=null;var b=this.$stateParams.activeTab;b&&(this.$scope.activeTab=b),this.$http.get("/orders/"+this.$stateParams.id+"/items").then(function(b){var c,d=b.data;return(c=a.orderItems).push.apply(c,_toConsumableArray(d))});var c=this.order.transaction_id;this.$http.get("$/transactions?transactionIds="+c).then(function(b){var c=b.data;a.transactions=c})}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"createItem",value:function(a){var b=this;this.submitting=!0;var c=this.validateForm(a);if(!c)return this.submitting=!1;var d=this.data.Customer.id;this.$http.get("/barcodes/package/"+this.data.barcode_number).then(function(a){var c=a.data.packId,e=[];b.orderItems.map(function(a){a.isChecked&&e.push(a)}),b.$http.post("/packages/"+c+"/itemCreate",{items:e,customerId:d}).then(function(){return b.toaster.pop("success","Package Created Successfully."),b.submitting=!1,location.reload(!0)})["catch"](function(a){if(b.submitting=!1,403===a.status)return b.toaster.pop("error",a.data.error)})})["catch"](function(c){403===c.status?b.toaster.pop("error","You can not create Packages to Admin Accounts"):b.toaster.pop("error","There was problem creating package. Please contact Shoppre team."),b.submitting=!1,a[c.data.field].$setValidity("required",!1),b.error=c.data})}},{key:"chatHoverText",value:function(){return"Initiate chat with "+this.data.name}},{key:"selectItems",value:function(){var a=0;this.orderItems.forEach(function(b){b.isChecked&&a++}),this.totalSelectedItems=a}},{key:"getPopularPackageCategories",value:function(){var a=this;this.$http.get("/packageItemCategories").then(function(b){var c=b.data;a.packageItemCategories=c})}},{key:"updateItem",value:function(a,b,c,d){var e=this;return this.$http.put("/orders/"+a+"/updateItem",{status:b,price:c,categoryId:d}).then(function(){e.toaster.pop("success","#"+a+"Item Updated Successfully"),e.$state.go("order.show")})["catch"](function(){e.toaster.pop("error","There was problem updationg item")})}}]),a}();angular.module("uiGenApp").controller("OrderShowController",OrderShowController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),OrderUpdateController=function(){function a(b,c,d,e,f,g,h,i,j){_classCallCheck(this,a),this.Session=h,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.Number=Number,
this.$=$,this.S3=i,this.URLS=j,this.submitting=!1,this.data=g||{},this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","order","Session","S3","URLS"],_createClass(a,[{key:"startInvoiceUpload",value:function(a,b){a.S3.uploadInvoice(b,a.data,a)}},{key:"$onInit",value:function(){if(this.uploadingPhotos=!1,this.EDIT=!!this.$stateParams.id&&""!==this.$stateParams.id,this.TITLE="EditOrder",this.Page.setTitle(this.TITLE),this.EDIT){if(this.data.seller_invoice){var a=this.URLS.CDN+"/shoppre/"+this.data.seller_invoice;this.data.object_thumb=a}this.file="Nothing"}}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"update",value:function(a){var b=this;if(this.submitting)return null;this.submitting=!0,this.clickUpload=!0;var c=this.validateForm(a),d=Object.assign({},this.data);if(!c)return this.submitting=!1;var e=["seller_invoice","amount_paid","is_cod_payment"];this.isCodPayment=this.data.is_cod_payment;var f=void 0;return f=this.isCodPayment===!0?1:0,Object.assign(d,{seller_invoice:this.data.object_invoice,is_cod_payment:f}),this.$http.put("/orders/"+this.$stateParams.id,_.pick(d,e)).then(function(c){var d=c.data;b.order=d;var e=d.id;return b.submitting=!1,b.toaster.pop("success","#"+e+" Order Updated Successfully.",""),b.EDIT?b.$state.go("order.show",{id:e}):b.reset(a)})["catch"](function(a){b.submitting=!1,b.toaster.pop("error","There was problem updating Order. Please contact Shoppre team."),b.error=a.data})}}]),a}();angular.module("uiGenApp").controller("OrderUpdateController",OrderUpdateController);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageBulkController=function(){function a(b,c,d,e,f,g){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.Number=Number,this.$=$,this.submitting=!1,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.TITLE=" Bulk Package Update",this.Page.setTitle(this.TITLE),this.data=[{sId:1},{sId:2},{sId:3}],this.Store={select:function(b){a.data.store_id=b.id,a.Store.model=b.name},setId:function(){if(!a.Store.lastSearchResults)return a.Store.lastSearchResults;var b=(a.Store.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.Store.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.Store.select(d):null},blur:function(){return a.Store.lastSearchResults?a.Store.setId():a.Store.get(a.Store.model).then(function(){return a.Store.setId()})},get:function(b){return a.$http.get("/search",{params:{type:"Store",q:b}}).then(function(b){var c=b.data.items;return a.Store.lastSearchResults=c,c})},noResults:!1,loadingStore:!1},this.Customer={select:function(b,c){a.data[c].customer_id=b.id,a.data[c].name=b.first_name},setId:function(){if(!a.Customer.lastSearchResults)return a.Customer.lastSearchResults;var b=(a.Customer.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.Customer.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.Customer.select(d):null},blur:function(b){return void 0==a.data[b].customer_id&&(a.data[b].name=""),a.Customer.lastSearchResults?a.Customer.setId():a.Customer.get(a.Customer.model).then(function(){return a.Customer.setId()})},get:function(b,c){return a.$http.get("/search",{params:{type:"User",q:b,field:a.Session.read("searchType")}}).then(function(b){var d=b.data.items;return a.Customer.lastSearchResults=d,d.length||(a.data[c].name=""),d})},noResults:!1,loadingUser:!1},this.Order={select:function(b,c){a.data[c].order_code=b.order_code,a.data[c].name=b.Customer.first_name},setId:function(){if(!a.Order.lastSearchResults)return a.Order.lastSearchResults;var b=(a.Order.lastSearchResults||[]).filter(function(b){return b.order_code.toLowerCase()===a.Order.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.Order.select(d):null},blur:function(b){return void 0==a.data[b].order_code&&(a.data[b].name=""),a.Order.lastSearchResults?a.Order.setId():a.Order.get(a.Order.model).then(function(){return a.Order.setId()})},get:function(b,c){return a.$http.get("/search",{params:{type:"Order",q:b,field:a.Session.read("searchType")}}).then(function(b){var d=b.data.items;return a.Order.lastSearchResults=d,d.length||(a.data[c].name=""),d})},noResults:!1,loadingUser:!1}}},{key:"addItem",value:function(){var a=this.data.length+1;this.data.push({sId:a,virtual_address_code:"SHPR"})}},{key:"addItemSame",value:function(a){var b=this.data.length+1;this.data.push({sId:b,virtual_address_code:this.data[a].virtual_address_code,customer_id:this.data[a].customer_id})}},{key:"removeItem",value:function(a){var b=this.data.length-1;0!==b&&this.data.splice(a,1)}},{key:"reset",value:function(a){this.data=[{sId:1},{sId:2},{sId:3}],this.Store.model="",a.$setPristine()}},{key:"changeMode",value:function(){this.Session.create("quickMode",this.quickMode)}},{key:"addNewPackage",value:function(a){this.create(a)}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"create",value:function(a){var b=this;if(this.submitting)return null;this.submitting=!0,this.clickUpload=!0,this.invalidBarcodes="";var c=this.validateForm(a),d=this.data.map(function(a){return a.barcode_number}),e=[],f=[];if(d.length&&d.map(function(a){f.includes(a)?e.push(a):f.push(a)}),e.length)return this.submitting=!1,this.invalidBarcodes="Same code scanned two times: "+e.toString();var g=this.data,h={store_id:this.data.store_id,packages:g};if(!c)return this.submitting=!1;var i="put";return this.$http[i]("/packages/bulkUpdate",h).then(function(c){var d=c.data.packageIds;return b.submitting=!1,b.packIds=d,b.toaster.pop("success","# Package Updates Successfully.",""),b.reset(a)})["catch"](function(c){403===c.status?b.toaster.pop("error","You can not add Packages to Admin Accounts"):404===c.status?(b.toaster.pop("error",c.data.message),b.invalidBarcodes=c.data.message+" "+c.data.data):b.toaster.pop("error","There was problem creating package. Please contact Shoppre team."),b.submitting=!1,a[c.data.field].$setValidity("required",!1),b.error=c.data})}}]),a}();angular.module("uiGenApp").controller("PackageBulkController",PackageBulkController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageChargesController=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.Number=Number,this.$=$,this.submitting=!1,this.charges=h,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session","charges"],_createClass(a,[{key:"$onInit",value:function(){this.Page.setTitle("Update Package Charges"),this.allowed=["storage_amount","wrong_address_amount","special_handling_amount","receive_mail_amount","pickup_amount","standard_photo_amount","advanced_photo_amount","scan_document_amount","split_package_amount"],this.data=this.charges||this.allowed.reduce(function(a,b){return Object.assign(a,_defineProperty({},b,0))},{})}},{key:"focus",value:function(a){$('input[name="'+a+'"]')[0].focus()}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"updateCharges",value:function(a){var b=this;if(this.submitting)return null;this.submitting=!0,this.clickUpload=!0;var c=this.validateForm(a),d=Object.assign({},this.data);if(!c)return this.submitting=!1;var e=this.$stateParams.id;return this.$http.put("/packages/"+e+"/charges",_.pick(d,this.allowed)).then(function(){return b.submitting=!1,b.toaster.pop("success","#"+e+" Package Charges Updated Successfully."),b.$state.go("package.show",{id:e,activeTab:1})})["catch"](function(c){b.submitting=!1;var d=c.data.field;a[c.data.field].$setValidity("required",!1),$('input[name="'+d+'"]')[0].focus(),b.toaster.pop("error","There was problem updating package charges. Please contact Tech team."),b.error=c.data})}}]),a}();angular.module("uiGenApp").controller("PackageChargesController",PackageChargesController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackagesIndexController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){_classCallCheck(this,a),this.Page=q,this.QCONFIG=b,this.$scope=c,this.$stateParams=d,this.$location=e,this.$state=f,this.Prototype=g,this.$rootScope=h,this.$timeout=i,this.$window=j,this.$http=k,this.toaster=s,this.moment=l,this.$uibModal=m,this.PackageFilter=r,this.Session=n,this.sorts=[{id:1,name:"Default",key:"-"},{id:1,name:"Update Date",key:"updated_at DESC"},{id:2,name:"Created Date",key:"created_at DESC"}],this.ExcelDownload=o,this.states=this.Session.read("adminStates"),this.ChangeState=p,this.$onInit()}return a.$inject=["QCONFIG","$scope","$stateParams","$location","$state","Prototype","$rootScope","$timeout","$window","$http","moment","$uibModal","Session","ExcelDownload","ChangeState","Page","PackageFilter","toaster"],_createClass(a,[{key:"$onInit",value:function(){var a=this;return this.facets={},this.todayDate="",this.packageStateId=this.QCONFIG.PACKAGE_STATE_IDS,this.initializing=!0,this.timeout=this.$timeout(function(){}),this.buckets=this.QCONFIG.PACKAGE_STATES,this.$stateParams.bucket=this.$stateParams.bucket||this.$location.search().bucket,this.buckets.includes(this.$stateParams.bucket)?(this.Page.setTitle(this.$stateParams.bucket+" Packages"),this.packages=[],this.ui={lazyLoad:!0,loading:!1},this.xquery="",this.params={sort:"",offset:0,limit:15,q:this.xquery||"",fl:"id,name,state_id,state_name",sid:this.$stateParams.sid||""},this.$scope.$watch(function(){return a.xquery},function(){a.initializing?a.$timeout(function(){a.initializing=!1}):(a.$timeout.cancel(a.timeout),a.timeout=a.$timeout(function(){a.loadPackages(!0)},800))},!0),this.$scope.$on("loadMore",function(){return a.loadPackages()}),void this.loadPackages()):void this.$state.go("packages.index",{bucket:"TASKS"})}},{key:"selectAllPackages",value:function(a){var b=this;a?(this.packages.forEach(function(a,c){b.packages[c].isChecked=!0}),this.totalSelectedPackages=this.packages.length):(this.packages.forEach(function(a,c){b.packages[c].isChecked=!1}),this.totalSelectedPackages=0)}},{key:"selectPackages",value:function(){var a=0;this.packages.forEach(function(b){b.isChecked&&a++}),this.totalSelectedPackages=a,a===this.packages.length?this.allChecked=!0:this.allChecked=!1}},{key:"proceedToStateChange",value:function(a,b){var c=this,d=a.filter(function(a){return a.isChecked});d.map(function(a){var d=a;d.id&&c.$http.put("/packages/"+d.id+"/state?state_id="+b).then(function(){return c.toaster.pop("success","successfully updated"),location.reload(!0)})["catch"](function(a){c.toaster.pop("error",a.data.message)})})}},{key:"sort",value:function(a){this.params.sort=a,this.loadPackages(!0)}},{key:"openPackageFilter",value:function(){var a=this,b={states:(this.$stateParams.sid||"").split(",").map(Number)},c={all:{states:this.facets.stateIds.map(function(c){return{id:c,name:a.states.filter(function(a){return a&&a.id===Number(c)})[0].action,checked:b.states.includes(Number(c))}})}};this.PackageFilter.open(c).then(function(b){a.$state.transitionTo(a.$state.current.name,Object.assign(a.$stateParams,{sid:b.states&&b.states.join(",")}),{notify:!1}),a.$onInit()})}},{key:"loadPackages",value:function(a){var b=this;if(a&&(this.params.offset=0,this.ui.lazyLoad=!0,this.packages=[],this.$window.scrollTo(0,0)),this.ui.lazyLoad){this.ui={lazyLoad:!1,loading:!0},this.params.q=this.xquery||"";var c=null;"Interview"===this.$stateParams.bucket?(this.params.interview_time=[this.moment().startOf("day").toISOString(),this.moment().startOf("day").add(1,"months").toISOString()].join(","),this.params.fl+=",interview_time,interview_type"):this.params.bucket=this.$stateParams.bucket.replace(" ","_").toUpperCase(),this.$http.get("/packages",{params:this.params}).then(function(d){var e,f=d.data,g=f.packages,h=f.total,i=f.oldfacets,j=g;return"undefined"==typeof j?(a&&(b.packages=[]),void(b.ui.lazyLoad=!1)):(c=j.map(function(a){return a.id}),b.$http.get("/packages/items/damaged?packageIds="+c).then(function(a){var b=a.data.packageStates,c=b.map(function(a){return a.package_id});j.forEach(function(a,b){c.includes(a.id)&&(j[b].damaged=!0)})}),j.length||"access.oauth"!==b.$rootScope.previousState?((e=b.packages).push.apply(e,_toConsumableArray(j)),b.todayDate=new Date,b.packages.forEach(function(a,c){var d=new Date(a.created_at);b.packages[c].totalDays=Math.ceil(Math.abs(b.todayDate.getTime()-d.getTime())/864e5)}),b.total=h,b.ui.loading=!1,b.ui.lazyLoad=angular.equals(j.length,b.params.limit),b.params.offset=b.params.offset+b.params.limit,void(i&&(b.facets.stateIds=Object.keys(i.state_id).filter(function(a){return Number(i.state_id[a])}).map(Number)))):void b.$state.go("packages.index",{bucket:"ALL"}))})["catch"](function(){a&&(b.packages=[]),b.ui.lazyLoad=!1})}}}]),a}();angular.module("uiGenApp").controller("PackagesIndexController",PackagesIndexController);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageItemsController=function(){function a(b,c,d,e,f,g,h,i,j,k,l){_classCallCheck(this,a),this.Session=h,this.Page=b,this.$http=e,this.S3=j,this.URLS=k,this.$state=c,this.pkg=g,this.$stateParams=d,this.toaster=f,this.Number=Number,this.$=$,this.submitting=!1,this.data=i||{},this.createCategory=l,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","pkg","Session","item","S3","URLS","createCategory"],_createClass(a,[{key:"open",value:function(){this.createCategory.open()}},{key:"startUpload",value:function(a,b){a.S3.upload(b,a.data,a)}},{key:"startAdvancedUpload",value:function(a,b){a.S3.uploadAdvanced(b,a.data,a)}},{key:"startInvoiceUpload",value:function(a,b){a.S3.uploadInvoice(b,a.data,a)}},{key:"startEcommerceUpload",value:function(a,b){a.S3.uploadEcommerce(b,a.data,a)}},{key:"$onInit",value:function(){var a=this;if(this.isPrint=this.Session.read("isPrint"),qz.config=null,this.uploadingPhotos=!1,this.EDIT=!!this.$stateParams.packageItemId&&""!==this.$stateParams.packageItemId,this.quickMode=!this.EDIT&&(this.Session.read("quickMode-items")||!1),this.TITLE=(this.EDIT?"Edit":"Add New")+" PackageItem",this.Page.setTitle(this.TITLE),this.getPopularPackageCategories(),this.PackageItemCategory={select:function(b){a.data.package_item_category_id=b.id,a.PackageItemCategory.model=b.name},setId:function(){var b=a.PackageItemCategory.lastSearchResults;if(!b)return a.PackageItemCategory.lastSearchResults;var c=(a.PackageItemCategory.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.PackageItemCategory.model.toLowerCase()}),d=_slicedToArray(c,1),e=d[0];return e?a.PackageItemCategory.select(e):null},blur:function(){return a.PackageItemCategory.lastSearchResults?a.PackageItemCategory.setId():a.PackageItemCategory.get(a.PackageItemCategory.model).then(function(){return a.PackageItemCategory.setId()})},get:function(b){return a.$http.get("/search",{params:{type:"PackageItemCategory",q:b}}).then(function(b){var c=b.data.items;return a.PackageItemCategory.lastSearchResults=c,c})},noResults:!1,loadingPackageItemCategory:!1},this.EDIT){this.data.PackageItemCategory&&(this.PackageItemCategory.model=this.data.PackageItemCategory.name);var b=this.URLS.CDN+"/shoppre/"+this.data.object;if(this.data.object_thumb=b,this.data.object_advanced){var c=this.URLS.CDN+"/shoppre/"+this.data.object_advanced;this.data.object_thumb=c}if(this.data.object_invoice){var d=this.URLS.CDN+"/shoppre/"+this.data.object_invoice;this.data.object_thumb=d}if(this.data.object_ecommerce){var e=this.URLS.CDN+"/shoppre/"+this.data.object_ecommerce;this.data.object_thumb=e}this.file="Nothing"}}},{key:"amount",value:function(a){"total"===a?this.data.price_amount=this.data.total_amount/this.data.quantity:this.data.total_amount=this.data.price_amount*this.data.quantity}},{key:"reset",value:function(a){this.data={},this.PackageItemCategory.model="",a.$setPristine(),this.focus("packageCategory_id")}},{key:"focus",value:function(a){$('input[name="'+a+'"]')[0].focus()}},{key:"getPopularPackageCategories",value:function(){var a=this;this.$http.get("/packageItemCategories").then(function(b){var c=b.data;a.packageItemCategories=c})}},{key:"changeMode",value:function(){this.Session.create("quickMode-items",this.quickMode)}},{key:"changePrintMode",value:function(){this.Session.create("isPrint",this.isPrint)}},{key:"printCode",value:function(){this.printHTML()}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"create",value:function(a){var b=this;if(!this.data.package_item_category_id)return this.toaster.pop("error","Category not found");if(this.submitting)return null;this.submitting=!0,this.clickUpload=!0;var c=this.validateForm(a),d=Object.assign({},this.data);if(!c)return this.submitting=!1;var e=this.$stateParams,f=e.packageItemId,g=e.id;d.packageId=g;var h=["name","quantity","price_amount","total_amount","object","object_advanced","object_invoice","package_item_category_id","object_ecommerce","ecommerce_link","size","hsn_code"],i=f?"put":"post",j="/packages/"+this.pkg.id+"/items"+(f?"/"+f:"");return this.$http[i](j,_.pick(d,h)).then(function(a){var c=a.data;if(!b.EDIT){b.packageItem=c.packageItemId;var d=c.packageItemId.id;b.submitting=!1;var e={id:c.packageItemId,packageId:c.id,customerName:c.Customer.first_name,virtualAddressCode:c.Customer.virtual_address_code,store:c.Store.name,itemCategory:b.PackageItemCategory.model,itemName:b.data.name,totalItems:c.totalItems,w:1,cell:1,rack:c.Customer.Locker.short_name,column:3};if(b.toaster.pop("success","#"+d+" Package "+(b.EDIT?"Updated":"Created")+" Successfully.",""),b.isPrint)return b.printHTML(e),b.$state.go("package.show",{id:g})}return b.toaster.pop("success","#"+f+" Package "+(b.EDIT?"Updated":"Created")+" Successfully.",""),b.$state.go("package.show",{id:g})})["catch"](function(c){b.submitting=!1;var d=c.data.field;a[c.data.field].$setValidity("required",!1),$('input[name="'+d+'"]')[0].focus(),b.toaster.pop("error","There was problem creating package. Please contact Shoppre team."),b.error=c.data})}},{key:"personalShopperPrint",value:function(){if(!this.PackageItemCategory.model)return $('input[id="PackageItemCategory"]').focus(),this.toaster.pop("error","Please update Category ");var a={id:this.$stateParams.packageItemId,packageId:this.$stateParams.id,customerName:this.data.Package.Customer.first_name,virtualAddressCode:this.data.Package.Customer.virtual_address_code,store:this.data.Package.Store.name,itemCategory:this.PackageItemCategory.model,itemName:this.data.itemName,totalItems:this.data.totalItems,w:1,cell:1,rack:this.data.Package.Customer.Locker.short_name||"Not Assign",column:3};this.printHTML(a)}},{key:"printHTML",value:function(a){var b=this;qz.websocket.isActive()?this.printData(a):(this.security(),qz.websocket.connect().then(function(){return qz.printers.getDefault()}).then(function(c){return qz.printerConfig=qz.configs.create(c),b.printData(a)})["catch"](function(a){}))}},{key:"printData",value:function b(a){var b=[{type:"raw",format:"plain",data:"CT~~CD,~CC^~CT~\n^XA\n^PW812\n^FO470,62^BY2^B3N,N,75N,N^FD"+a.id+"^FS^PQ1\n"+("^FT523,200^ADN,54,30^FH\\^FD"+a.id+"^FS\n")+("^FT67,198^A0N,35,33^FH\\^FD"+a.store+"^FS\n")+("^FT69,141^A0N,50,50^FH\\^FDPKG: "+a.packageId+"^FS\n")+("^FT67,253^A0N,35,33^FH\\^FD"+a.customerName+"^FS\n")+("^FT524,356^A0N,35,33^FH\\^FD"+a.virtualAddressCode+"^FS\n")+("^FT69,301^A0N,35,33^FH\\^FD"+a.itemCategory+" | Rack: "+a.rack+"^FS\n")+"^FT69,82^A0N,62,60^FH\\^FDSHOPPRE^FS\n"+("^FT624,299^A0N,73,72^FH\\^FD#"+a.totalItems+"^FS\n")+"^PQ1,0,1,Y^XZ"}];return qz.print(qz.printerConfig,b)}},{key:"security",value:function(){qz.security.setCertificatePromise(function(a,b){var c="-----BEGIN CERTIFICATE-----\nMIIDhDCCAmwCCQD4uQ6F+ltoRzANBgkqhkiG9w0BAQsFADCBgjELMAkGA1UEBhMC\nSU4xCzAJBgNVBAgMAktBMRIwEAYDVQQHDAlCYW5nYWxvcmUxCzAJBgNVBAoMAlFa\nMQswCQYDVQQLDAJRWjEWMBQGA1UEAwwNKi5zaG9wcHJlLmNvbTEgMB4GCSqGSIb3\nDQEJARYRdmlrYXNAc2hvcHByZS5jb20wIBcNMTkwMzI0MDkyMTU3WhgPMjA1MDA5\nMTYwOTIxNTdaMIGCMQswCQYDVQQGEwJJTjELMAkGA1UECAwCS0ExEjAQBgNVBAcM\nCUJhbmdhbG9yZTELMAkGA1UECgwCUVoxCzAJBgNVBAsMAlFaMRYwFAYDVQQDDA0q\nLnNob3BwcmUuY29tMSAwHgYJKoZIhvcNAQkBFhF2aWthc0BzaG9wcHJlLmNvbTCC\nASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK026IiLnf4kyv1+UbjnpgDb\nYaDpv8HSuf3QM1mGC6CyBloALmxCVvdRD/zL0tMlTsycV01ZnyB5SFWuoiJpmDhg\nfAsZNR8V3lp+ycFqgr8WsA3GYSvd32LQxW4YEX2UL/DtkhJ3ohjUyOcbOzB8yPmx\n0ALMgW31M7x3ml5Zn86/VQ2QJw/oJdHMzvCJVGMP1AuncOkkTUQOrvSMXhK0zFMm\n6Wi4wVAo/BM6HQMTWNwrpJBD6AvbBP3Tfd08EdsgcO1XxzPazYoViJNmgl/M0925\nemSyx7DOmmv31E19IHrQiIj/6xbKXSpXj3vGkuUq8xkHqILu/uTgGKJ7wAcelqEC\nAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAZk/LSJvcyzI7I+taMJOhxkVNWK2KbIXl\npy6GcHvBpXAxj3iwxmMrxMi90SM4fo0R3emafXnzjEBD+jA9/RUwKGHb6ZgViMzF\nrRr0QVPa7Cm/mWlF0Te5TmmPDP2JLrDEusZtURFZ/2to9j8MXPRTttcLczjtNhwS\nbQu2npU7r/c2/E42xb+m+huI2BK+tXelBtrnoAXP7OdTlCk7ML1Sb1QUfdH+AMDd\nRDhZOJbwFVOc/8hbXwvT5BheZ/c/t5VMV6nzf0uuXA+4WSaQY6qcegvmnoRr528A\nVrrMm3fjD5hG/vJs1EeAO5BXghyOfaGBIbhp6gbposBC15OlWcoEWg==\n-----END CERTIFICATE-----";a(c)});var a="-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEArTboiIud/iTK/X5RuOemANthoOm/wdK5/dAzWYYLoLIGWgAu\nbEJW91EP/MvS0yVOzJxXTVmfIHlIVa6iImmYOGB8Cxk1HxXeWn7JwWqCvxawDcZh\nK93fYtDFbhgRfZQv8O2SEneiGNTI5xs7MHzI+bHQAsyBbfUzvHeaXlmfzr9VDZAn\nD+gl0czO8IlUYw/UC6dw6SRNRA6u9IxeErTMUybpaLjBUCj8EzodAxNY3CukkEPo\nC9sE/dN93TwR2yBw7VfHM9rNihWIk2aCX8zT3bl6ZLLHsM6aa/fUTX0getCIiP/r\nFspdKlePe8aS5SrzGQeogu7+5OAYonvABx6WoQIDAQABAoIBAC8fQfFrsiaikcqW\no9rewi13gT7KeI1dK5YeHuoa6mzkIZA4fmibP5d2qRfHx2oDu0U0vxde60hlVkVh\nBeDAw1WLAhPu3qG/TEdoOLDyrfEYVfrZXjQV3yC91QgXaiK0vroXl2aIv0NsF9+v\na9HMEMzFD+bDBe8JBvMdwpQqY6xVtFQ3beEctu/XbWE6G4fHfqUpSFoa90WMtuMl\nKKVYdUKJ9Gfrny29lvq/Um5zjCLlIgR1J0HX4uKvTm3HAxDPI/0NHkH4Ln5qrjor\nJEu1/JxtHZDxUCUpYlW7QEUkO1xz1WgeyqaZ/kbvPyC6lf6s4gaEinJ7pVxWsHu6\n0m0+2QECgYEA1KXC69VDUFY6UGiWIUKBexrNUKrMXZ/mJoB8ny3skXDxK8weKURu\n7Cg9OvXwlk02ZAgVBMEcwPKXnGYw41kmdvFGtu83IvUL3q8ahHkikv9SwvA2FnJa\n06qQ0sqpSseWhAjhAf91nxcpNU40VuUN9N7GnmR6qwPkmpkDqyYBprECgYEA0Icb\nYk40x0nUJzFGOYwPCahMhzQk8XUXSDNVB3DKqYuuhrhx4sNOIePcktLauoo66+Ee\nOLnRzCQhB0jRIcnd/pOe1hJDUDNLyk0nEbB4tiTkRMHpGUeerD9vGqlm430p4Wic\n4c5ALsMyK7a+SmX9TtEZAheW8tQ+3ZZwDYbZyvECgYBsALzdlvWXahQ4HsaRofut\nkNFS9UzTCJGWYI/rMSIERL7ZJdTz1MQZwd5Hgf5t+E11xP0X6xU1koEaeHTAI9l7\nc9QcuabhZGBg+8KWIghDbNaWF/cAs5gaBXmE9lXBm1mBOhk+MIeHA/Z0EoJW2AOc\nqUFr1VDQZyvGsYzBco5IIQKBgQDJKj2BpX6G7rMqp/9eDr6HC4PgPq6Q/Otb7KFP\nj0EDNMxGDPNY1h6u1Pn57k2x/R4AZejYwnIhJI10UIvns61kJRbq3y1u1j18SNey\n2fJpjMdliUeM6qmo830EVH38YcegO2J095q1QftJbn6+mQs4GMGuYgFt+tE2xSUN\n95RtkQKBgFGwn7dzKoIOzKkH2AyqUIzo/zlEMOj3J6GyVeTBfRBqWImQs7DhmDeV\nZdnTqyMBOuJ+5erR9p4EYXnaWpkDyx0Bop6dwlvVadb4toZQCOXFLfVxdwwhEUx4\noJ076QBmCssqG1HRs0RUShjQtuf6/yMNy7/aQ4q+QZQbgrU6Q7Uc\n-----END RSA PRIVATE KEY-----";qz.security.setSignaturePromise(function(b){return function(c,d){try{var e=KEYUTIL.getKey(a),f=new KJUR.crypto.Signature({alg:"SHA1withRSA"});f.init(e),f.updateString(b);var g=f.sign();c(stob64(hextorstr(g)))}catch(h){d(h)}}})}}]),a}();angular.module("uiGenApp").controller("PackageItemsController",PackageItemsController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageVerificationController=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.moment=h,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session","moment"],_createClass(a,[{key:"$onInit",value:function(){this.TITLE=" Bulk Package Upload",this.Page.setTitle(this.TITLE),this.packages=[],this.packageIds=this.$stateParams.packageIds,this.getPackagesList()}},{key:"getPackagesList",value:function(){var a=this;this.$http.get("/packages/bulkIndex?packageIds="+this.packageIds).then(function(b){var c=b.data.packages;a.packages=c})}}]),a}();angular.module("uiGenApp").controller("PackageVerificationController",PackageVerificationController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("packages",{"abstract":!0,url:"/packages",template:"<div ui-view></div>"}).state("packages.index",{url:"?bucket&sid&uid",templateUrl:"app/routes/packages/index/index.html",controller:"PackagesIndexController",controllerAs:"$ctrl"}).state("packages.bulk",{url:"/bulk",templateUrl:"app/routes/packages/bulk/bulk.html",controller:"PackageBulkController",controllerAs:"$ctrl"}).state("packages.verification",{url:"/verification?packageIds",templateUrl:"app/routes/packages/packageVerification/packageVerification.html",controller:"PackageVerificationController",controllerAs:"$ctrl"}).state("package",{"abstract":!0,url:"/packages/:id",template:"<div ui-view></div>"}).state("package.show",{url:"?{activeTab:int}&:profilePhotoUrl",templateUrl:"app/routes/packages/show/show.html",controller:"PackageShowController",controllerAs:"$ctrl",resolve:{pkg:["$http","$stateParams","$state",function(a,b,c){var d=["id","customer_id","invoice_code","created_at","weight","price_amount","is_doc","content_type","splitting_directions","return_send","comments","store_id","is_medicine","is_full_invoice_received","ops_invoice","invoice","store_name","rack_number","exchange_directions","order_code","is_wrong_item"],e={fl:d.join(",")};return a.get("/packages/"+b.id,{params:e}).then(function(a){var b=a.data;return b})["catch"](function(){return c.go("access.404")})}]}}).state("package.charges",{url:"/charges",templateUrl:"app/routes/packages/charges/charges.html",controller:"PackageChargesController",controllerAs:"$ctrl",resolve:{charges:["$http","$stateParams","toaster",function(a,b,c){return a.get("/packages/"+b.id+"/charges").then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading package")})}]}}).state("package.items",{url:"/items",templateUrl:"app/routes/packages/items/items.html",controller:"PackageItemsController",controllerAs:"$ctrl",resolve:{pkg:["$stateParams",function(a){return{id:a.id}}],item:function(){return null}}}).state("package.item",{"abstract":!0,url:"/items/:packageItemId",template:"<div ui-view></div>"}).state("package.item.edit",{url:"/edit",templateUrl:"app/routes/packages/items/items.html",controller:"PackageItemsController",controllerAs:"$ctrl",resolve:{pkg:["$stateParams",function(a){return{id:a.id}}],item:["$http","$stateParams","toaster",function(a,b,c){return a.get("/packageItems/"+b.packageItemId).then(function(a){var b=a.data;return b})["catch"](function(){return c.pop("error","Error loading package item")})}]}})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),PackageShowController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){_classCallCheck(this,a),this.Number=Number,this.QCONFIG=o,this.$scope=p,this.URLS=d,this.$sce=e,this.$http=b,this.$state=f,this.Page=h,this.Session=i,this.$q=j,this.$stateParams=c,this.toaster=n,this.ChangeState=k,this.pkg=l,this.ListModal=m,this.ViewPhotoService=q,this.moment=r,this.$window=g,this.S3=s,this.ChangeItemState=t,this.$onInit()}return a.$inject=["$http","$stateParams","URLS","$sce","$state","$window","Page","Session","$q","ChangeState","pkg","ListModal","toaster","QCONFIG","$scope","ViewPhotoService","moment","S3","ChangeItemState"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.data=this.pkg,this.states=this.Session.read("adminStates"),this.itemStates=this.Session.read("adminItem-states"),this.advancedPhotoItemState=this.QCONFIG.PACKAGE_ITEM_STATE_IDS,this.user=this.Session.read("adminUserinfo"),qz.config=null,this.location=this.$window.location,this.customer=this.data.Customer,this.customer.rack_number=this.pkg.rack_number,this.Page.setFavicon(""+this.$stateParams.profilePhotoUrl),this.data.Store&&this.Page.setTitle(this.data.Store.name),this.root="_root_",this.modal={},this.packageItemsAdditionAllowedStateIds=[1],this.editAllowedStates=[1,2,5,6,75],this.packageItems=[],this.charges=null;var b=this.$stateParams.activeTab;b&&(this.$scope.activeTab=b),this.$http.get("/packages/"+this.$stateParams.id+"/items").then(function(b){var c,d=b.data;return(c=a.packageItems).push.apply(c,_toConsumableArray(d))}),this.selectPackageItems()}},{key:"printPackageBarcode",value:function(a){var b=a.PackageItems.length,c={id:a.id,customerName:this.customer.first_name+" "+this.customer.last_name,virtualAddressCode:this.customer.virtual_address_code,store:this.data.Store.name,totalItems:b,w:1,cell:1,rack:this.data.Customer.Locker.short_name||"Not Assign",column:3};this.printPackageHTML(c)}},{key:"printPackageHTML",value:function(a){var b=this;qz.websocket.isActive()?this.printPackageData(a):(this.security(),qz.websocket.connect().then(function(){return qz.printers.getDefault()}).then(function(c){return qz.printerConfig=qz.configs.create(c),b.printPackageData(a)})["catch"](function(a){}))}},{key:"printPackageData",value:function(a){var b=[{type:"raw",format:"plain",data:"CT~~CD,~CC^~CT~\n^XA\n^PW812\n^FO470,62^BY2^B3N,N,75N,N^FD"+a.id+"^FS^PQ1\n"+("^FT523,200^ADN,54,30^FH\\^FD"+a.id+"^FS\n")+("^FT67,198^A0N,35,33^FH\\^FD"+a.store+"^FS\n")+("^FT67,253^A0N,35,33^FH\\^FD"+a.customerName+"^FS\n")+("^FT524,356^A0N,35,33^FH\\^FD"+a.virtualAddressCode+"^FS\n")+("^FT69,301^A0N,35,33^FH\\^FD Rack: "+a.rack+"^FS\n")+"^FT69,82^A0N,62,60^FH\\^FDSHOPPRE^FS\n"+("^FT624,299^A0N,73,72^FH\\^FD#"+a.totalItems+"^FS\n")+"^PQ1,0,1,Y^XZ"
}];return qz.print(qz.printerConfig,b)}},{key:"printBarcode",value:function(a,b){var c=b.indexOf(a.id)+1,d={id:a.id,packageId:a.package_id,customerName:this.customer.first_name+" "+this.customer.last_name,virtualAddressCode:this.customer.virtual_address_code,store:this.data.Store.name,itemCategory:a.PackageItemCategory.name,itemName:a.name,totalItems:c,w:1,cell:1,rack:this.data.Customer.Locker.short_name||"Not Assign",column:3};this.printHTML(d)}},{key:"printHTML",value:function(a){var b=this;qz.websocket.isActive()?this.printData(a):(this.security(),qz.websocket.connect().then(function(){return qz.printers.getDefault()}).then(function(c){return qz.printerConfig=qz.configs.create(c),b.printData(a)})["catch"](function(a){}))}},{key:"printData",value:function b(a){var b=[{type:"raw",format:"plain",data:"CT~~CD,~CC^~CT~\n^XA\n^PW812\n^FO470,62^BY2^B3N,N,75N,N^FD"+a.id+"^FS^PQ1\n"+("^FT523,200^ADN,54,30^FH\\^FD"+a.id+"^FS\n")+("^FT67,198^A0N,35,33^FH\\^FD"+a.store+"^FS\n")+("^FT69,141^A0N,50,50^FH\\^FDPKG: "+a.packageId+"^FS\n")+("^FT67,253^A0N,35,33^FH\\^FD"+a.customerName+"^FS\n")+("^FT524,356^A0N,35,33^FH\\^FD"+a.virtualAddressCode+"^FS\n")+("^FT69,301^A0N,35,33^FH\\^FD"+a.itemCategory+" | Rack: "+a.rack+"^FS\n")+"^FT69,82^A0N,62,60^FH\\^FDSHOPPRE^FS\n"+("^FT624,299^A0N,73,72^FH\\^FD#"+a.totalItems+"^FS\n")+"^PQ1,0,1,Y^XZ"}];return qz.print(qz.printerConfig,b)}},{key:"security",value:function(){qz.security.setCertificatePromise(function(a,b){var c="-----BEGIN CERTIFICATE-----\nMIIDhDCCAmwCCQD4uQ6F+ltoRzANBgkqhkiG9w0BAQsFADCBgjELMAkGA1UEBhMC\nSU4xCzAJBgNVBAgMAktBMRIwEAYDVQQHDAlCYW5nYWxvcmUxCzAJBgNVBAoMAlFa\nMQswCQYDVQQLDAJRWjEWMBQGA1UEAwwNKi5zaG9wcHJlLmNvbTEgMB4GCSqGSIb3\nDQEJARYRdmlrYXNAc2hvcHByZS5jb20wIBcNMTkwMzI0MDkyMTU3WhgPMjA1MDA5\nMTYwOTIxNTdaMIGCMQswCQYDVQQGEwJJTjELMAkGA1UECAwCS0ExEjAQBgNVBAcM\nCUJhbmdhbG9yZTELMAkGA1UECgwCUVoxCzAJBgNVBAsMAlFaMRYwFAYDVQQDDA0q\nLnNob3BwcmUuY29tMSAwHgYJKoZIhvcNAQkBFhF2aWthc0BzaG9wcHJlLmNvbTCC\nASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK026IiLnf4kyv1+UbjnpgDb\nYaDpv8HSuf3QM1mGC6CyBloALmxCVvdRD/zL0tMlTsycV01ZnyB5SFWuoiJpmDhg\nfAsZNR8V3lp+ycFqgr8WsA3GYSvd32LQxW4YEX2UL/DtkhJ3ohjUyOcbOzB8yPmx\n0ALMgW31M7x3ml5Zn86/VQ2QJw/oJdHMzvCJVGMP1AuncOkkTUQOrvSMXhK0zFMm\n6Wi4wVAo/BM6HQMTWNwrpJBD6AvbBP3Tfd08EdsgcO1XxzPazYoViJNmgl/M0925\nemSyx7DOmmv31E19IHrQiIj/6xbKXSpXj3vGkuUq8xkHqILu/uTgGKJ7wAcelqEC\nAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAZk/LSJvcyzI7I+taMJOhxkVNWK2KbIXl\npy6GcHvBpXAxj3iwxmMrxMi90SM4fo0R3emafXnzjEBD+jA9/RUwKGHb6ZgViMzF\nrRr0QVPa7Cm/mWlF0Te5TmmPDP2JLrDEusZtURFZ/2to9j8MXPRTttcLczjtNhwS\nbQu2npU7r/c2/E42xb+m+huI2BK+tXelBtrnoAXP7OdTlCk7ML1Sb1QUfdH+AMDd\nRDhZOJbwFVOc/8hbXwvT5BheZ/c/t5VMV6nzf0uuXA+4WSaQY6qcegvmnoRr528A\nVrrMm3fjD5hG/vJs1EeAO5BXghyOfaGBIbhp6gbposBC15OlWcoEWg==\n-----END CERTIFICATE-----";a(c)});var a="-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEArTboiIud/iTK/X5RuOemANthoOm/wdK5/dAzWYYLoLIGWgAu\nbEJW91EP/MvS0yVOzJxXTVmfIHlIVa6iImmYOGB8Cxk1HxXeWn7JwWqCvxawDcZh\nK93fYtDFbhgRfZQv8O2SEneiGNTI5xs7MHzI+bHQAsyBbfUzvHeaXlmfzr9VDZAn\nD+gl0czO8IlUYw/UC6dw6SRNRA6u9IxeErTMUybpaLjBUCj8EzodAxNY3CukkEPo\nC9sE/dN93TwR2yBw7VfHM9rNihWIk2aCX8zT3bl6ZLLHsM6aa/fUTX0getCIiP/r\nFspdKlePe8aS5SrzGQeogu7+5OAYonvABx6WoQIDAQABAoIBAC8fQfFrsiaikcqW\no9rewi13gT7KeI1dK5YeHuoa6mzkIZA4fmibP5d2qRfHx2oDu0U0vxde60hlVkVh\nBeDAw1WLAhPu3qG/TEdoOLDyrfEYVfrZXjQV3yC91QgXaiK0vroXl2aIv0NsF9+v\na9HMEMzFD+bDBe8JBvMdwpQqY6xVtFQ3beEctu/XbWE6G4fHfqUpSFoa90WMtuMl\nKKVYdUKJ9Gfrny29lvq/Um5zjCLlIgR1J0HX4uKvTm3HAxDPI/0NHkH4Ln5qrjor\nJEu1/JxtHZDxUCUpYlW7QEUkO1xz1WgeyqaZ/kbvPyC6lf6s4gaEinJ7pVxWsHu6\n0m0+2QECgYEA1KXC69VDUFY6UGiWIUKBexrNUKrMXZ/mJoB8ny3skXDxK8weKURu\n7Cg9OvXwlk02ZAgVBMEcwPKXnGYw41kmdvFGtu83IvUL3q8ahHkikv9SwvA2FnJa\n06qQ0sqpSseWhAjhAf91nxcpNU40VuUN9N7GnmR6qwPkmpkDqyYBprECgYEA0Icb\nYk40x0nUJzFGOYwPCahMhzQk8XUXSDNVB3DKqYuuhrhx4sNOIePcktLauoo66+Ee\nOLnRzCQhB0jRIcnd/pOe1hJDUDNLyk0nEbB4tiTkRMHpGUeerD9vGqlm430p4Wic\n4c5ALsMyK7a+SmX9TtEZAheW8tQ+3ZZwDYbZyvECgYBsALzdlvWXahQ4HsaRofut\nkNFS9UzTCJGWYI/rMSIERL7ZJdTz1MQZwd5Hgf5t+E11xP0X6xU1koEaeHTAI9l7\nc9QcuabhZGBg+8KWIghDbNaWF/cAs5gaBXmE9lXBm1mBOhk+MIeHA/Z0EoJW2AOc\nqUFr1VDQZyvGsYzBco5IIQKBgQDJKj2BpX6G7rMqp/9eDr6HC4PgPq6Q/Otb7KFP\nj0EDNMxGDPNY1h6u1Pn57k2x/R4AZejYwnIhJI10UIvns61kJRbq3y1u1j18SNey\n2fJpjMdliUeM6qmo830EVH38YcegO2J095q1QftJbn6+mQs4GMGuYgFt+tE2xSUN\n95RtkQKBgFGwn7dzKoIOzKkH2AyqUIzo/zlEMOj3J6GyVeTBfRBqWImQs7DhmDeV\nZdnTqyMBOuJ+5erR9p4EYXnaWpkDyx0Bop6dwlvVadb4toZQCOXFLfVxdwwhEUx4\noJ076QBmCssqG1HRs0RUShjQtuf6/yMNy7/aQ4q+QZQbgrU6Q7Uc\n-----END RSA PRIVATE KEY-----";qz.security.setSignaturePromise(function(b){return function(c,d){try{var e=KEYUTIL.getKey(a),f=new KJUR.crypto.Signature({alg:"SHA1withRSA"});f.init(e),f.updateString(b);var g=f.sign();c(stob64(hextorstr(g)))}catch(h){d(h)}}})}},{key:"openPhoto",value:function(a){var b=this;this.$http.get("/minio/viewObject",{params:{object:a}}).then(function(a){var c=a.data.url;b.ViewPhotoService.open(c)})}},{key:"startUploadInvoice",value:function(a){var b=this;this.uploadingPhotos=!0,this.$http.get("/minio/presignedUrl",{params:{filename:a.name}}).then(function(c){var d=c.data,e=d.object,f=d.url;d.signedUrl;b.data.object=null;var g=new XMLHttpRequest;return g.open("PUT",f,!0),g.send(a),g.onload=function(){if(200===g.status){b.toaster.pop("success","File uploaded"),b.data.object=e;var a=e.split("/");b.uploadFileExtension=a[a.length-1].split(".").pop(),b.uploadingPhotos=!1}},e})["catch"](function(){return b.toaster.pop("error","Error while uploading file")})}},{key:"submitInvoice",value:function(){var a=this,b=this.pkg.id;return this.data.object?(this.clickUpload=!0,void this.$http.put("/packages/"+b+"/invoice",{object:this.data.object,is_full_invoice_received:this.data.is_full_invoice_received}).then(function(b){b.data.message;a.toaster.pop("success","Invoice Uploaded")})):this.toaster.pop("error","Please choose invoice")}},{key:"submitFullInvoiceReceived",value:function(){var a=this,b=this.pkg.id;this.clickUpload=!0,this.$http.put("/packages/"+b+"/invoice",{fullInvoice:"check",is_full_invoice_received:this.data.is_full_invoice_received}).then(function(b){b.data.message;a.toaster.pop("success","Full Invoice Received")})}},{key:"setMessage",value:function(a){this.modal={modalButtons:[{name:"OK",type:"default"}],title:"Action Required",description:a},this.ListModal.open(this.modal,"popup")}},{key:"chatHoverText",value:function(){return"Initiate chat with "+this.data.name}},{key:"toggleBookmark",value:function(a){var b=this;this.$http.post("/packages/"+this.$stateParams.id+"/bookmarks",{status:a}).then(function(){b.data.is_bookmarked=a,b.toaster.pop("success",a?"Bookmarked Successfully":"Unbookmarked Successfully")})["catch"](function(){b.toaster.pop("error","There was problem loading data. Please contact ShoppRe team")})}},{key:"getCharges",value:function(){var a=this;this.charges||(this.chargesIcon={storage_amount:"fa-dropbox"},this.$http.get("/packages/"+this.$stateParams.id+"/charges").then(function(b){var c=b.data;a.charges=Object.keys(c).map(function(a){return{key:a,label:_.startCase(a.replace("_"," ").toLowerCase()),chargeAmount:c[a]}})}))}},{key:"uploadFiles",value:function(a){var b=this;this.$q.all(a.map(function(a){return b.$http.post("/package/"+b.$stateParams.id+"/items",{documentFile:a})})).then(function(a){var c=a.map(function(a){var b=a.data,c=b.id,d=b.filename,e=b.link;return{id:c,filename:d,link:e}});b.document=[].concat(_toConsumableArray(b.document),_toConsumableArray(c))})}},{key:"deleteDocument",value:function(a,b){var c=this;this.$http["delete"]("/package/"+a+"/items").then(function(){return c.document.splice(b,1)})}},{key:"deletePackage",value:function(a){var b=this,c=confirm,d=c("Are you sure? Deleting Your Package");return d?this.packageItems.length&&(this.packageItems[0].package_order_code||this.data.order_code)?this.toaster.pop("error","Personal Shopper Package cant be deleted , Please contact Tech Team"):this.$http["delete"]("/packages/"+a).then(function(a){var c=a.data.message;b.toaster.pop("success",c),b.$state.go("packages.index")})["catch"](function(){b.toaster.pop("error","There was problem deleting package")}):null}},{key:"selectAllPackageItems",value:function(a){var b=this;a?(this.packageItems.forEach(function(a,c){b.packageItems[c].isChecked=!0}),this.totalSelectedPackageItems=this.packageItems.length):(this.packageItems.forEach(function(a,c){b.packageItems[c].isChecked=!1}),this.totalSelectedPackageItems=0)}},{key:"selectPackageItems",value:function(){var a=0;this.packageItems.forEach(function(b){b.isChecked&&a++}),a===this.packageItems.length?this.allChecked=!0:this.allChecked=!1,this.totalSelectedItems=a}},{key:"deletePackageItem",value:function(a,b,c,d){var e=this,f=confirm,g=f("Are you sure? Deleting Your Package Item");return g?this.packageItems.length&&(this.packageItems[0].package_order_code||this.data.order_code)?this.toaster.pop("error","Personal Shopper Package Item cant be deleted , Please contact Tech Team"):this.$http["delete"]("/packages/"+a+"/item/"+b+"/delete").then(function(a){var b=a.data.message;return e.toaster.pop("success",b),e.data.PackageItems.splice(c,1),e.data.price_amount-=d,e.packageItems.splice(c,1)})["catch"](function(a){var b="";b=403===a.status?a.data.message:"There was problem deleting package item",e.toaster.pop("error",b)}):null}},{key:"createPackage",value:function(){var a=this,b={customerId:this.data.customer_id,stateId:this.data.PackageState.state_id,storeId:this.data.store_id,returnSend:this.data.return_send,splitMsg:this.data.splitting_directions};this.$http.post("/packages/special/package/create",b).then(function(b){var c=b.data,d=c.id,e=c.itemStateId,f=[];a.packageItems.map(function(a){a.isChecked&&f.push(a)}),a.$http.put("/packages/"+d+"/update/items",{items:f,itemStateId:e}).then(function(){return a.toaster.pop("success","Package Created Successfully."),a.submitting=!1,location.reload(!0)})})["catch"](function(){a.toaster.pop("error","There was problem loading data. Please contact ShoppRe team")})}}]),a}();angular.module("uiGenApp").controller("PackageShowController",PackageShowController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),dhlController=function(){function a(b,c,d,e,f,g){_classCallCheck(this,a),this.$http=b,this.Page=c,this.$stateParams=g,this.toaster=d,this.address=e,this.moment=f,this.$onInit()}return a.$inject=["$http","Page","toaster","ADDRESS","moment","$stateParams"],_createClass(a,[{key:"$onInit",value:function(){this.Page.setTitle("Proforma Invoice Create"),this.orderCode=this.$stateParams.orderCode,this.type=this.$stateParams.type,this.shipments=[],this.Packages=[],this.personalUse=!1,this.PackageItems=[],this.PackItems=[],this.Charges={total_amount:0},this.amountWords="",this.getList()}},{key:"getList",value:function(){var a=this;this.$http.get("/shipments/"+this.orderCode+"/proformaInvoice").then(function(b){var c=b.data,d=c.shipment,e=c.words,f=c.totalAmount;a.shipments=d,a.Packages=d.Packages,a.Packages.forEach(function(b){a.Packages=b,a.PackageItems=a.Packages.PackageItems,a.PackageItems.forEach(function(b){a.PackItems.push(b)})}),"category"===a.type&&!function(){var b=[],c=!1;a.PackItems.forEach(function(a){c=!1,b.length&&b.forEach(function(b){b.package_item_category_id===a.package_item_category_id&&(c=!0,b.total_amount+=a.total_amount,b.quantity+=a.quantity,b.price_amount=Math.round(b.total_amount/b.quantity))}),c||b.push(a)}),a.PackItems=[],a.PackItems=b}(),a.Charges.total_amount=f,a.amountWords=e+" Only"})["catch"](function(b){a.toaster.pop("error",b.data.message)})}},{key:"personalUseData",value:function(){this.personalUse=!this.personalUse}},{key:"removeRow",value:function(a){var b=this;this.Charges.total_amount=this.Charges.total_amount-this.PackItems[a].total_amount,this.$http.get("/shipments/"+this.Charges.total_amount+"/amountToWords").then(function(a){var c=a.data.amountInWords;b.amountWords=c+" Only"}),this.PackItems.splice(a,1)}}]),a}();angular.module("uiGenApp").controller("dhlController",dhlController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("proformaInvoice",{"abstract":!0,url:"/proformaInvoice",template:'<div ui-view=""></div>'}).state("proformaInvoice.dhl",{url:"/:orderCode/dhl?type",templateUrl:"app/routes/proformaInvoice/dhl/dhl.html",controller:"dhlController",controllerAs:"$ctrl"})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ShipmentsIndexController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){_classCallCheck(this,a),this.Page=q,this.QCONFIG=b,this.$scope=c,this.$stateParams=d,this.$location=e,this.$state=f,this.Prototype=g,this.$rootScope=h,this.$timeout=i,this.$window=j,this.$http=k,this.moment=l,this.$uibModal=m,this.ShipmentFilter=r,this.Session=n,this.toaster=s,this.sorts=[{id:1,name:"Default",key:"-"},{id:1,name:"Update Date",key:"updated_at DESC"},{id:2,name:"Created Date",key:"created_at DESC"},{id:3,name:"Name",key:"customer_name DESC"}],this.ExcelDownload=o,this.states=this.Session.read("adminShipment-states"),this.ChangeShipmentState=p,this.$onInit()}return a.$inject=["QCONFIG","$scope","$stateParams","$location","$state","Prototype","$rootScope","$timeout","$window","$http","moment","$uibModal","Session","ExcelDownload","ChangeShipmentState","Page","ShipmentFilter","toaster"],_createClass(a,[{key:"$onInit",value:function(){var a=this;return this.todayDate="",this.shipmentStateId=this.QCONFIG.SHIPMENT_STATE_IDS,this.facets={},this.initializing=!0,this.timeout=this.$timeout(function(){}),this.buckets=this.QCONFIG.SHIPMENT_STATES,this.$stateParams.bucket=this.$stateParams.bucket||this.$location.search().bucket,this.buckets.includes(this.$stateParams.bucket)?(this.Page.setTitle(this.$stateParams.bucket+" Shipments"),this.shipments=[],this.ui={lazyLoad:!0,loading:!1},this.xquery="",this.params={sort:"-",offset:0,limit:15,q:this.xquery||"",fl:"id,name,state_id,state_name",sid:this.$stateParams.sid||"",isExpress:this.$stateParams.isExpress||""},this.$scope.$watch(function(){return a.xquery},function(){a.initializing?a.$timeout(function(){a.initializing=!1}):(a.$timeout.cancel(a.timeout),a.timeout=a.$timeout(function(){a.loadShipments(!0)},800))},!0),this.$scope.$on("loadMore",function(){return a.loadShipments()}),void this.loadShipments()):void this.$state.go("shipments.index",{bucket:"ALL"})}},{key:"selectAllShipments",value:function(a){var b=this;a?(this.shipments.forEach(function(a,c){b.shipments[c].isChecked=!0}),this.totalSelectedShipments=this.shipments.length):(this.shipments.forEach(function(a,c){b.shipments[c].isChecked=!1}),this.totalSelectedShipments=0)}},{key:"selectShipments",value:function(){var a=0;this.shipments.forEach(function(b){b.isChecked&&a++}),this.totalSelectedShipments=a,a===this.shipments.length?this.allChecked=!0:this.allChecked=!1}},{key:"proceedToStateChange",value:function(a,b){var c=this,d=a.filter(function(a){return a.isChecked});d.map(function(a){var d=a;d.id&&c.$http.put("/shipments/"+d.id+"/state?state_id="+b).then(function(){return c.toaster.pop("success","successfully updated"),location.reload(!0)})["catch"](function(a){c.toaster.pop("error",a.data.message)})})}},{key:"sort",value:function(a){this.params.sort=a,this.loadShipments(!0)}},{key:"openShipmentFilter",value:function(){var a=this,b={states:(this.$stateParams.sid||"").split(",").map(Number)},c={all:{states:this.facets.stateIds.map(function(c){return{id:c,name:a.states.filter(function(a){return a&&a.id===Number(c)})[0].action,checked:b.states.includes(Number(c))}})}};this.ShipmentFilter.open(c).then(function(b){a.$state.transitionTo(a.$state.current.name,Object.assign(a.$stateParams,{sid:b.states&&b.states.join(",")}),{notify:!1}),a.$onInit()})}},{key:"ExpressShipping",value:function(){var a=!this.$stateParams.isExpress;a?this.$state.transitionTo(this.$state.current.name,Object.assign(this.$stateParams,{isExpress:!0}),{notify:!1}):this.$state.transitionTo(this.$state.current.name,Object.assign(this.$stateParams,{isExpress:!1}),{notify:!1}),this.$onInit()}},{key:"loadShipments",value:function(a){var b=this;a&&(this.params.offset=0,this.ui.lazyLoad=!0,this.shipments=[],this.$window.scrollTo(0,0)),this.ui.lazyLoad&&(this.ui={lazyLoad:!1,loading:!0},this.params.q=this.xquery||"","Interview"===this.$stateParams.bucket?(this.params.interview_time=[this.moment().startOf("day").toISOString(),this.moment().startOf("day").add(1,"months").toISOString()].join(","),this.params.fl+=",interview_time,interview_type"):this.params.bucket=this.$stateParams.bucket.replace(" ","_").toUpperCase(),this.$http.get("/shipments",{params:this.params}).then(function(c){var d,e=c.data,f=e.shipments,g=e.total,h=e.facets;return f.map(function(a){var b=_.pick(a.ShipmentMetum,function(a){return a}),c=Object.keys(b).length;return c&&a.ShipmentMetum.express_processing?Object.assign(a,{preference:!0}):Object.assign(a,{preference:!1})}),"undefined"==typeof f?(a&&(b.shipments=[]),void(b.ui.lazyLoad=!1)):f.length||"access.oauth"!==b.$rootScope.previousState?((d=b.shipments).push.apply(d,_toConsumableArray(f)),b.todayDate=new Date,b.shipments.map(function(a){var c=a,d=new Date(c.ShipmentState.created_at);return c.totalDays=Math.ceil(Math.abs(b.todayDate.getTime()-d.getTime())/864e5),c}),b.total=g,b.ui.loading=!1,b.ui.lazyLoad=angular.equals(f.length,b.params.limit),b.params.offset=b.params.offset+b.params.limit,void(h&&(b.facets.stateIds=Object.keys(h.state_id).filter(function(a){return Number(h.state_id[a])}).map(Number)))):void b.$state.go("shipments.index",{bucket:"ALL"})})["catch"](function(){a&&(b.shipments=[]),b.ui.lazyLoad=!1}))}}]),a}();angular.module("uiGenApp").controller("ShipmentsIndexController",ShipmentsIndexController);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),ShipmentsReportController=function(){function a(b,c,d,e,f,g,h,i,j,k){_classCallCheck(this,a),this.Page=j,this.QCONFIG=b,this.$scope=c,this.$stateParams=d,this.$state=e,this.$http=f,this.moment=g,this.$uibModal=h,this.toaster=k,this.$onInit()}return a.$inject=["QCONFIG","$scope","$stateParams","$state","$http","moment","$uibModal","Session","Page","toaster"],_createClass(a,[{key:"$onInit",value:function(){this.getList()}},{key:"checkDate",value:function(){this.startDate=this.data.startDate,this.endDate=this.data.endDate}},{key:"getList",value:function(){var a=this;this.$http.get("/shipments/report").then(function(b){var c=b.data.shipments;a.shipments=c})["catch"](function(b){a.toaster.pop("error",b.data.message)})}}]),a}();angular.module("uiGenApp").controller("ShipmentsReportController",ShipmentsReportController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("shipments",{"abstract":!0,url:"/shipments",template:"<div ui-view></div>"}).state("shipments.index",{url:"?bucket&sid&uid&isExpress",templateUrl:"app/routes/shipments/index/index.html",controller:"ShipmentsIndexController",controllerAs:"$ctrl"}).state("shipments.report",{url:"/report",templateUrl:"app/routes/shipments/report/report.html",controller:"ShipmentsReportController",controllerAs:"$ctrl"}).state("shipment",{"abstract":!0,url:"/shipments/:id",template:"<div ui-view></div>"}).state("shipment.show",{url:"",templateUrl:"app/routes/shipments/show/show.html",controller:"shipmentsShowController",controllerAs:"$ctrl",resolve:{pkg:["$http","$stateParams","$state",function(a,b,c){var d=["id","customer_id","created_at","weight","final_amount","packages_count","final_weight","address","order_code","transaction_id","order_code","payment_gateway_id","invoice_id"],e={fl:d.join(",")};return a.get("/shipments/"+b.id,{params:e}).then(function(a){var b=a.data;return b})["catch"](function(){return c.go("access.404")})}]}})}]);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),shipmentsShowController=function(){function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){_classCallCheck(this,a),this.Number=Number,this.URLS=d,this.$sce=e,this.$http=b,this.$state=f,this.Page=h,this.Session=i,this.$httpParamSerializer=p,this.$q=j,this.$stateParams=c,this.toaster=o,this.ChangeShipmentState=k,this.data=m,this.S3=l,this.ListModal=n,this.moment=moment,this.customer=m.Customer,this.deleteAllowedStates=[16,17,18,19,21],this.location=g.location,this.user=i.read("adminUserinfo"),this.$onInit()}return a.$inject=["$http","$stateParams","URLS","$sce","$state","$window","Page","Session","$q","ChangeShipmentState","S3","pkg","ListModal","toaster","$httpParamSerializer"],_createClass(a,[{key:"$onInit",value:function(){this.root="_root_",this.modal={},this.data.shipmentItemPhotos=[],this.states=this.Session.read("adminShipment-states"),this.user=this.Session.read("adminUserinfo"),this.paymentMode(this.data)}},{key:"setMessage",value:function(a){this.modal={modalButtons:[{name:"OK",type:"default"}],title:"Action Required",description:a},this.ListModal.open(this.modal,"popup")}},{key:"chatHoverText",value:function(){return"Initiate chat with "+this.data.name}},{key:"awfTime",value:function(){var a=this.data.comments.filter(function(a){return 1===a.state_id}),b=_slicedToArray(a,1),c=b[0];return c}},{key:"toggleBookmark",value:function(a){var b=this;this.$http.post("/shipments/"+this.$stateParams.id+"/bookmarks",{bucket:a}).then(function(){b.data.is_bookmarked=a,b.toaster.pop("success",a?"Bookmarked Successfully":"Unbookmarked Successfully")})["catch"](function(){b.toaster.pop("error","There was problem loading data. Please contact ShoppRe team")})}},{key:"paymentMode",value:function(a){var b=this;a.transaction_id&&this.$http.get("$/transactions?transactionIds="+a.transaction_id).then(function(a){var c=a.data;b.transaction=c})}},{key:"startUploadShipmentPhoto",value:function(a,b){a.S3.uploadShipmentPhoto(b,a.data,a)}},{key:"shipmentPhotoCreate",value:function(){var a=this;if(!this.data.shipmentItemPhotos)return this.toaster.pop("error","No Photos to Update");var b=this.data;this.$http.post("/shipmentPhotos",{data:b}).then(function(b){var c=b.data.message;a.toaster.pop("success",c)})["catch"](function(){a.toaster.pop("error","There was problem uploading Photos")})}},{key:"deleteShipment",value:function(a){var b=this,c=confirm,d=c("Are you sure? Deleting Your Shipment");return d?this.$http["delete"]("/shipments/"+a).then(function(a){var c=a.data.message;b.toaster.pop("success",c),b.$state.go("shipments.index")})["catch"](function(){b.toaster.pop("error","There was problem deleting shipment")}):null}},{key:"generateFinanceInvoice",value:function(a){var b=this;this.$http.get("/shipments/"+a+"/finance/invoice").then(function(a){b.toaster.pop("success","Invoice generated")})["catch"](function(){b.toaster.pop("error","There was problem loading data. Please contact ShoppRe team")})}},{key:"uploadFiles",value:function(a){var b=this;this.$q.all(a.map(function(a){return b.$http.post("/shipment/"+b.$stateParams.id+"/items",{documentFile:a})})).then(function(a){var c=a.map(function(a){var b=a.data,c=b.id,d=b.filename,e=b.link;return{id:c,filename:d,link:e}});b.document=[].concat(_toConsumableArray(b.document),_toConsumableArray(c))})}},{key:"shipmentPrint",value:function(){var a={shipmentId:this.data.id,shipmentName:this.data.Customer.first_name,w:1,cell:1,column:3};this.printHTML(a)}},{key:"printHTML",value:function(a){var b=this;qz.websocket.isActive()?this.printData(a):(this.security(),qz.websocket.connect().then(function(){return qz.printers.getDefault()}).then(function(c){return qz.printerConfig=qz.configs.create(c),b.printData(a)})["catch"](function(a){}))}},{key:"printData",value:function b(a){var b=[{type:"raw",format:"plain",data:""+("CT~~CD,~CC^~CT~\n^XA~TA000~JSN^LT0^MNW^MTT^PON^PMN^LH0,0^JMA^PR2,2~SD15^JUS^LRN^CI0^XZ\n^XA\n^MMT\n^PW609\n^LL0406\n^LS0\n^FO512,0^GFA,00768,00768,00012,:Z64:eJxjYBgFCGD/////H1A2kPn/H4TJCGL/B7HkGJjB7AaQ4gYEu/4DEvsPEvs/MvvwEGTj8BeSf+0PINjySOGDHG6o4YkSzgMLAMVC0hA=:73B2\n^FO160,288^GFA,04608,04608,00036,:Z64:eJztl7Fu40YQhmfBIxTAhVyYwAEumEdIE+AQBiFVqKcA7rscTgHEwEWKe4Q06q5Io3S+0DB5SJEixVXpmcotARfHmIo3/wxJSzJP3AvSBIgH4Joihx9//TuzWhM9xVP8p2KSYngxnuNGGJLxHL8iUmY8x4uRo8dzAnCc5t9zQub8cz3PBno24OQHl775BM5A3VDPUN2Q4w44Q3+CgVtDjrbrmRiT2jjeRzjsT7Z34SuV2TgqJi+y6EFdToojnP7ZM3zc4zzHUyX8eQV/zmHKZ0QnVONG2b5VRzIvOvFiV880TInIA3UGbMecmi2RSZUxeeWbxuCkolVK4XtmfNGZgFbQkau1jnFonCTCZT6dSk6Qw4Q8nWZ5tsGRn+TZNT7j+s4bzQ/oCJ7qBXP4hPjSnlMrY0oyRWiMucFh+CQ1Ba7TPifGc4yY40iYEzFnr2ObpqmpKfCneY3jbomhbApa3j3mzHopif4IB3q2ZN71UmqznZiK9cC2uudE7MdMw2QPX2ihYwWjhKN6lE/+z5RdZKlzHVxR+DZfU3YJy8LL/WZzwZlrPAVh3oIRwon322JyT+ZXuHG/qmh6ixIOa9ZTk29Sp+do4VCCp90FTryk5Xg6Ul0Oaqb5DW68bEpyblE95zX7U6OSCqctH5mfOb7CGXP0ASd2RQwbQ+Y93PgaKpwbCJtuez3bMBUxBxzFwtwHTjv5XDc55a+vsDSjYpw3aLDpJdfPpdyzcVzdFuP0kZ4P0ON3elDaOBlydv4kXY2ijbhwWn9etP6kD/7wzfKQs/O5m3c2L9r5w/P1rZH5YikYzD3ucq/tODJfMXP6edfSfNysqBGun++zVF3DEv9tvlFotI3KeSU6zzftpHuJQh1GqJ+EEYmLAcWo5a5wTLG6d8wvpvZRz9+ZLesrV9upWOOYWuZ9wb3wuC90a40SjoI9fzbNO7bpB+6vAEPBQ8OIpu7qZ6F3fdr2Ow/SYG2X4fW3eDfaDCYhfPaLBzGIu0zmhN/NT84e1h9xTT9wsP68yfLUR638xLXk5NkVTfgsW+PuNYmVrGO3jinuf6lyZnjCgREX0ONAQLUyfxksAIVUDq9DENZ2V8Ke4vBiD18RYFz9vXNIPsCgWjUB3lyflE5T3LVrciDrUCWLtSwcdHom2Tycdr0r2uKOcyzYMGn5kZxP4YQ/5hnqafALdsCZx54sHWN6bsppBT3FGGcW4dfry1HO8g8mBNJgxzk8WvwRQFs/RzkiROr5aARrHkft6TljKa0ey3ZROGo+mrNkjnNh1/NMjaW0ep47xViObFmi/Q3HMEL85ihS67EcF/sfd7eJORbmQ79xOR56nlo5Sye1ck6VXc/nqrByeDtm4xCtx/2RiMd9lngp/7uMR+JZU7AM2XM8y78/HE5lz3mK/3P8DamgYjo=:5F1A\n"+("^FT402,124^A0I,89,93^FH\\^FD"+a.shipmentId+"^FS\n")+"^FT452,21^A0I,28,28^FH\\^FDany issues in the shipment^FS\n^FT519,53^A0I,28,28^FH\\^FDPlease take an unboxing video to report^FS\n^FT607,141^A0I,34,33^FH\\^FDShipment ID^FS\n^FT607,249^A0I,34,33^FH\\^FDReceiver Name^FS\n"+("^FT366,240^A0I,62,62^FH\\^FD"+a.shipmentName+"^FS\n")+"^PQ1,0,1,Y^XZ\n")}];return qz.print(qz.printerConfig,b)}},{key:"security",value:function(){qz.security.setCertificatePromise(function(a,b){var c="-----BEGIN CERTIFICATE-----\nMIIDhDCCAmwCCQD4uQ6F+ltoRzANBgkqhkiG9w0BAQsFADCBgjELMAkGA1UEBhMC\nSU4xCzAJBgNVBAgMAktBMRIwEAYDVQQHDAlCYW5nYWxvcmUxCzAJBgNVBAoMAlFa\nMQswCQYDVQQLDAJRWjEWMBQGA1UEAwwNKi5zaG9wcHJlLmNvbTEgMB4GCSqGSIb3\nDQEJARYRdmlrYXNAc2hvcHByZS5jb20wIBcNMTkwMzI0MDkyMTU3WhgPMjA1MDA5\nMTYwOTIxNTdaMIGCMQswCQYDVQQGEwJJTjELMAkGA1UECAwCS0ExEjAQBgNVBAcM\nCUJhbmdhbG9yZTELMAkGA1UECgwCUVoxCzAJBgNVBAsMAlFaMRYwFAYDVQQDDA0q\nLnNob3BwcmUuY29tMSAwHgYJKoZIhvcNAQkBFhF2aWthc0BzaG9wcHJlLmNvbTCC\nASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAK026IiLnf4kyv1+UbjnpgDb\nYaDpv8HSuf3QM1mGC6CyBloALmxCVvdRD/zL0tMlTsycV01ZnyB5SFWuoiJpmDhg\nfAsZNR8V3lp+ycFqgr8WsA3GYSvd32LQxW4YEX2UL/DtkhJ3ohjUyOcbOzB8yPmx\n0ALMgW31M7x3ml5Zn86/VQ2QJw/oJdHMzvCJVGMP1AuncOkkTUQOrvSMXhK0zFMm\n6Wi4wVAo/BM6HQMTWNwrpJBD6AvbBP3Tfd08EdsgcO1XxzPazYoViJNmgl/M0925\nemSyx7DOmmv31E19IHrQiIj/6xbKXSpXj3vGkuUq8xkHqILu/uTgGKJ7wAcelqEC\nAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAZk/LSJvcyzI7I+taMJOhxkVNWK2KbIXl\npy6GcHvBpXAxj3iwxmMrxMi90SM4fo0R3emafXnzjEBD+jA9/RUwKGHb6ZgViMzF\nrRr0QVPa7Cm/mWlF0Te5TmmPDP2JLrDEusZtURFZ/2to9j8MXPRTttcLczjtNhwS\nbQu2npU7r/c2/E42xb+m+huI2BK+tXelBtrnoAXP7OdTlCk7ML1Sb1QUfdH+AMDd\nRDhZOJbwFVOc/8hbXwvT5BheZ/c/t5VMV6nzf0uuXA+4WSaQY6qcegvmnoRr528A\nVrrMm3fjD5hG/vJs1EeAO5BXghyOfaGBIbhp6gbposBC15OlWcoEWg==\n-----END CERTIFICATE-----";a(c)});var a="-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEArTboiIud/iTK/X5RuOemANthoOm/wdK5/dAzWYYLoLIGWgAu\nbEJW91EP/MvS0yVOzJxXTVmfIHlIVa6iImmYOGB8Cxk1HxXeWn7JwWqCvxawDcZh\nK93fYtDFbhgRfZQv8O2SEneiGNTI5xs7MHzI+bHQAsyBbfUzvHeaXlmfzr9VDZAn\nD+gl0czO8IlUYw/UC6dw6SRNRA6u9IxeErTMUybpaLjBUCj8EzodAxNY3CukkEPo\nC9sE/dN93TwR2yBw7VfHM9rNihWIk2aCX8zT3bl6ZLLHsM6aa/fUTX0getCIiP/r\nFspdKlePe8aS5SrzGQeogu7+5OAYonvABx6WoQIDAQABAoIBAC8fQfFrsiaikcqW\no9rewi13gT7KeI1dK5YeHuoa6mzkIZA4fmibP5d2qRfHx2oDu0U0vxde60hlVkVh\nBeDAw1WLAhPu3qG/TEdoOLDyrfEYVfrZXjQV3yC91QgXaiK0vroXl2aIv0NsF9+v\na9HMEMzFD+bDBe8JBvMdwpQqY6xVtFQ3beEctu/XbWE6G4fHfqUpSFoa90WMtuMl\nKKVYdUKJ9Gfrny29lvq/Um5zjCLlIgR1J0HX4uKvTm3HAxDPI/0NHkH4Ln5qrjor\nJEu1/JxtHZDxUCUpYlW7QEUkO1xz1WgeyqaZ/kbvPyC6lf6s4gaEinJ7pVxWsHu6\n0m0+2QECgYEA1KXC69VDUFY6UGiWIUKBexrNUKrMXZ/mJoB8ny3skXDxK8weKURu\n7Cg9OvXwlk02ZAgVBMEcwPKXnGYw41kmdvFGtu83IvUL3q8ahHkikv9SwvA2FnJa\n06qQ0sqpSseWhAjhAf91nxcpNU40VuUN9N7GnmR6qwPkmpkDqyYBprECgYEA0Icb\nYk40x0nUJzFGOYwPCahMhzQk8XUXSDNVB3DKqYuuhrhx4sNOIePcktLauoo66+Ee\nOLnRzCQhB0jRIcnd/pOe1hJDUDNLyk0nEbB4tiTkRMHpGUeerD9vGqlm430p4Wic\n4c5ALsMyK7a+SmX9TtEZAheW8tQ+3ZZwDYbZyvECgYBsALzdlvWXahQ4HsaRofut\nkNFS9UzTCJGWYI/rMSIERL7ZJdTz1MQZwd5Hgf5t+E11xP0X6xU1koEaeHTAI9l7\nc9QcuabhZGBg+8KWIghDbNaWF/cAs5gaBXmE9lXBm1mBOhk+MIeHA/Z0EoJW2AOc\nqUFr1VDQZyvGsYzBco5IIQKBgQDJKj2BpX6G7rMqp/9eDr6HC4PgPq6Q/Otb7KFP\nj0EDNMxGDPNY1h6u1Pn57k2x/R4AZejYwnIhJI10UIvns61kJRbq3y1u1j18SNey\n2fJpjMdliUeM6qmo830EVH38YcegO2J095q1QftJbn6+mQs4GMGuYgFt+tE2xSUN\n95RtkQKBgFGwn7dzKoIOzKkH2AyqUIzo/zlEMOj3J6GyVeTBfRBqWImQs7DhmDeV\nZdnTqyMBOuJ+5erR9p4EYXnaWpkDyx0Bop6dwlvVadb4toZQCOXFLfVxdwwhEUx4\noJ076QBmCssqG1HRs0RUShjQtuf6/yMNy7/aQ4q+QZQbgrU6Q7Uc\n-----END RSA PRIVATE KEY-----";qz.security.setSignaturePromise(function(b){return function(c,d){try{var e=KEYUTIL.getKey(a),f=new KJUR.crypto.Signature({alg:"SHA1withRSA"});f.init(e),f.updateString(b);var g=f.sign();c(stob64(hextorstr(g)))}catch(h){d(h)}}})}},{key:"deleteDocument",value:function(a,b){var c=this;this.$http["delete"]("/shipment/"+a+"/items").then(function(){return c.document.splice(b,1)})}}]),a}();angular.module("uiGenApp").controller("shipmentsShowController",shipmentsShowController);var _slicedToArray=function(){function a(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!b||c.length!==b);d=!0);}catch(i){e=!0,f=i}finally{try{!d&&h["return"]&&h["return"]()}finally{if(e)throw f}}return c}return function(b,c){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return a(b,c);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),VisionController=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.Session=g,this.Page=b,this.$http=e,this.$state=c,this.$stateParams=d,this.toaster=f,this.S3=h,this.URLS=i,this.$onInit()}return a.$inject=["Page","$state","$stateParams","$http","toaster","Session","S3","URLS"],_createClass(a,[{key:"$onInit",value:function(){var a=this;this.description="",this.packIds="",this.data={vision:{virtual_address_code:"",barcode_number:"",delivery_company:"",customer_id:"",name:"",store_id:"",store_name:""}},this.Store={select:function(b){a.data.vision.store_id=b.id,a.Store.model=b.name},setId:function(){if(!a.Store.lastSearchResults)return a.Store.lastSearchResults;var b=(a.Store.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.Store.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.Store.select(d):null},blur:function(){return a.Store.lastSearchResults?a.Store.setId():a.Store.get(a.Store.model).then(function(){
return a.Store.setId()})},get:function(b){return a.$http.get("/search",{params:{type:"Store",q:b}}).then(function(b){var c=b.data.items;return a.Store.lastSearchResults=c,c})},noResults:!1,loadingStore:!1},this.Customer={select:function(b,c){a.data.vision.customer_id=b.id,a.data.vision.name=b.first_name},setId:function(){if(!a.Customer.lastSearchResults)return a.Customer.lastSearchResults;var b=(a.Customer.lastSearchResults||[]).filter(function(b){return b.name.toLowerCase()===a.Customer.model.toLowerCase()}),c=_slicedToArray(b,1),d=c[0];return d?a.Customer.select(d):null},blur:function(b){return void 0==a.data[b].customer_id&&(a.data[b].name=""),a.Customer.lastSearchResults?a.Customer.setId():a.Customer.get(a.Customer.model).then(function(){return a.Customer.setId()})},get:function(b,c){return a.$http.get("/search",{params:{type:"User",q:b,field:"virtual_address_code"}}).then(function(b){var d=b.data.items;return a.Customer.lastSearchResults=d,d.length||(a.data[c].name=""),d})},noResults:!1,loadingUser:!1}}},{key:"validateForm",value:function(a){var b=this;return this.$stateParams.autofocus="",Object.keys(a).filter(function(a){return!a.startsWith("$")}).forEach(function(c){a[c]&&a[c].$invalid&&(b.$stateParams.autofocus||(b.$stateParams.autofocus=c),a[c].$setDirty())}),a.$valid}},{key:"reset",value:function(a){this.data={},a.$setPristine()}},{key:"updatePackage",value:function(a){var b=this;if(this.submitting)return null;this.submitting=!0;var c=this.validateForm(a);if(!c)return this.submitting=!1;var d=[{barcode_number:this.data.vision.barcode_number,virtual_address_code:this.data.vision.virtual_address_code}],e={store_id:this.data.vision.store_id,packages:d};this.$http.put("/packages/bulkUpdate",e).then(function(c){var d=c.data.packageIds;b.submitting=!1,b.packIds=d.toString(),b.reset(a),b.toaster.pop("success","# Package Updates Successfully.","")})["catch"](function(c){403===c.status?b.toaster.pop("error","You can not add Packages to Admin Accounts"):404===c.status?(b.toaster.pop("error",c.data.message),b.invalidBarcodes=c.data.message+" "+c.data.data):b.toaster.pop("error","There was problem creating package. Please contact Shoppre team."),b.submitting=!1,a[c.data.field].$setValidity("required",!1),b.error=c.data})}},{key:"startUpload",value:function(a,b){a.data.vision.barcode_number="",a.data.vision.virtual_address_code="",a.data.vision.delivery_company="",a.data.vision.store_name="",a.packIds="",a.S3.uploadOcr(b,a.data,a)}}]),a}();angular.module("uiGenApp").controller("VisionController",VisionController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("vision",{"abstract":!0,url:"/visions",template:"<div ui-view></div>"}).state("vision.index",{url:"/scan",templateUrl:"app/routes/vision/create/vision.html",controller:"VisionController",controllerAs:"$ctrl"})}]),angular.module("uiGenApp").directive("aside",function(){return{templateUrl:"components/aside/aside.html",restrict:"E"}});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e,f){_classCallCheck(this,a),this.moment=f,this.$http=b,this.$timeout=c,this.Session=d,this.socket=e,this.$onInit()}return a.$inject=["$http","$timeout","Session","socket","moment"],_createClass(a,[{key:"$onInit",value:function(){this.user=this.Session.read("adminUserinfo"),this.states=this.Session.read(("shipment"===this.type?"shipment-":"")+"states"),this.post={comments:""},this.followers=[],this.getList()}},{key:"isToday",value:function(a){return(new Date).toDateString()===new Date(a).toDateString()}},{key:"getList",value:function(){var a=this;this.ui={loading:!0,scrollToBottom:!1};var b="#/"+this.type+"s/"+this.id+"/comments?type=admin";this.$http.get(b).then(function(c){var d=c.data;a.data.comments=d,a.socket.syncUpdates(b,a.data.comments,!0),a.ui={loading:!1,scrollToBottom:!0}}),this.loadFollowers()}},{key:"loadFollowers",value:function(){var a=this,b="#/"+this.type+"s/"+this.id+"/followers";this.$http.get(b).then(function(b){var c=b.data;a.followers=c})}},{key:"insert",value:function(){var a=this,b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];13===b.keyCode&&b.target.blur();var c=this.post.comments;if(c){this.ui={loading:!0,scrollToBottom:!1};var d="#/"+this.type+"s/"+this.id+"/comments?type=admin";this.$http.post(d,{comments:c}).then(function(){a.post.comments="",a.ui={loading:!1,scrollToBottom:!0}})}}},{key:"hideCommentButton",value:function(){var a=this;this.$timeout(function(){return a.showCommentBtn=!1},200)}}]),a}();angular.module("uiGenApp").directive("comments",function(){return{templateUrl:"components/comment/comment.html",restrict:"E",controller:a,controllerAs:"$ctrl",bindToController:!0,scope:{id:"@",data:"=",type:"="}}})}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),CustomerNavController=function(){function a(b,c,d,e,f,g,h){_classCallCheck(this,a),this.toaster=h,this.$http=b,this.$state=c,this.$scope=d,this.$timeout=e,this.Session=f,this.Prototype=g,this.searchTypes={email:{icon:"at",label:"Email"},virtual_address_code:{icon:"dropbox",label:"Virtual Address Code"},q:{icon:"user",label:"Name"},id:{icon:"user",label:"Customer Id"},order_code:{icon:"dropbox",label:"Order Code"}},this.searchType=this.Session.read("searchType")||"virtual_address_code",this.$onInit()}return a.$inject=["$http","$state","$scope","$timeout","Session","Prototype","toaster"],_createClass(a,[{key:"$onInit",value:function(){this.reset(),this.getList(!0),this.refreshList=this.getList.bind(this)}},{key:"reset",value:function(a){this.customers={shipments:[],packages:[],orders:[],customers:[]},this.collapse={shipments:!1,packages:!1,orders:!1,customers:!1},this.ui={lazyLoad:!0,loading:!1},this.params=Object.assign(this.params||{},{start:0,rows:30,fl:["id,name"].join()}),a||(this.params.virtual_address_code="SHPR")}},{key:"changeSearchType",value:function(a){var b=this.searchType;return this.params[a]=this.params[b],this.searchType=a,this.Session.create("searchType",this.searchType),$('input[name="customerSearch"]')[0].focus(),this.search(this.searchType)}},{key:"search",value:function(a){var b=this,c=this.searchTouched;if(""===this.params[a]&&c)return this.getList(!0);if(""===this.params[a]&&!c)return null;if("email"===a&&!this.Prototype.validateEmail(this.params.email))return null;var d="virtual_address_code";if(a===d&&"SHPR-"===this.params.virtual_address_code)return null;if("q"===a){var e=/^[a-zA-Z\s]+$/g;if(!e.test(this.params.q))return this.toaster.pop("error","Only alphabets allowed in Search by Name")}this.searchTouched=!(!this.params[a]||""===this.params[a]);var f=Object.keys(this.searchTypes);if(!f.some(function(a){return b.searchTypes[a]&&""!==b.params[a]}))return null;f.forEach(function(c){c!==a&&delete b.params[c]});var g=!0;return this.getList(!0,!1,g)}},{key:"getList",value:function(){var a=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],b=this,c=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],d=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(a||this.ui.lazyLoad){a&&this.reset(d);var e="SHPR-"===this.params.virtual_address_code;this.ui={lazyLoad:!1,loading:!0};var f="virtual_address_code";this.$http.get("/users",{params:e?_.omit(this.params,[f]):this.params}).then(function(d){var e=d.data;a&&Object.keys(b.customers).forEach(function(a){return b.customers[a]=[]}),e.forEach(function(a){var c=a;c.tooltip=c.name+" / "+c[f]+(c.is_member?"Member":"");var d=void 0;d=c.Shipments.length?"shipments":c.Packages.length?"packages":c.Orders.length?"orders":"customers",b.customers[d].push(c)}),a&&(b.collapse.inactive=!b.params.q,b.collapse.passive=!b.params.q),b.ui.loading=!1,b.ui.lazyLoad=b.params.rows===e.length,b.params.start+=b.params.rows,c&&!b.customers.customers.length&&b.getList(a,c)})}}},{key:"getLink",value:function(a,b){var c={customers:"customer.view",shipments:"customer.shipments.index",packages:"customer.packages.index",orders:"customer.orders.index"},d=this.$state.params.bucket||"ALL";return this.$state.href(c[b],{id:a,status:d})}}]),a}();angular.module("uiGenApp").directive("customerNav",function(){return{templateUrl:"components/customer-nav/customer-nav.html",restrict:"E",controller:CustomerNavController,controllerAs:"$ctrl",bindToController:!0,scope:{}}}),angular.module("uiGenApp").directive("footer",function(){return{templateUrl:"components/footer/footer.html",restrict:"E",link:function(a,b){b.addClass("footer")}}}),angular.module("uiGenApp").directive("lightBox",["$document","$window",function(a,b){return{templateUrl:"components/light-box/light-box.html",restrict:"EA",scope:{data:"="},link:function(c){var d=c,e=a[0],f=e.getElementById("lightBoxVideo"),g=e.getElementById("light-box-fade");d.lightboxOpen=function(){b.scrollTo(0,0),g.style.display="block",f.play()},d.lightboxClose=function(){g.style.display="none",f.pause()}}}}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();!function(){var a=function(){function a(b,c,d,e){_classCallCheck(this,a),this.$http=b,this.$uibModalInstance=c,this.data=d,this.type=e}return a.$inject=["$http","$uibModalInstance","data","type"],_createClass(a,[{key:"$onInit",value:function(){var a=this;Promise.resolve(this.data.list).then(function(){var b=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];a.items=b})}}]),a}(),b=function(){function b(a){_classCallCheck(this,b),this.$uibModal=a}return b.$inject=["$uibModal"],_createClass(b,[{key:"open",value:function(b){var c=arguments.length<=1||void 0===arguments[1]?"payment":arguments[1],d=arguments.length<=2||void 0===arguments[2]?"md":arguments[2];return this.$uibModal.open({size:d,animation:!0,templateUrl:"components/list-modal/list-modal.html",controller:a,controllerAs:"$ctrl",resolve:{data:function(){return b},type:function(){return c}}}).result}}]),b}();angular.module("uiGenApp").service("ListModal",b)}();var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),NavbarController=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.$http=c,this.$timeout=e,this.Auth=g,this.URLS=h,this.$state=d,this.$q=f,this.Session=i,this.$rootScope=b,this.$onInit()}return a.$inject=["$rootScope","$http","$state","$timeout","$q","Auth","URLS","Session"],_createClass(a,[{key:"$onInit",value:function(){this.totalNotification=[],this.user=this.Session.read("adminUserinfo"),this.user&&(this.userInitial=this.user.first_name.substr(0,1),this.ui={count:0},this.getChatNotification())}},{key:"showComment",value:function(a,b,c){this.totalNotification.splice(c,1),1===b?this.$state.go("package.show",{id:a}):2===b?this.$state.go("shipment.show",{id:a}):3===b&&this.$state.go("order.show",{id:a});var d="#/"+b+"/"+a+"/comments?type=admin";this.$http.get(d)}},{key:"getChatNotification",value:function(){var a=this,b="#/chatNotification";this.$http.get(b).then(function(b){var c=b.data;a.totalNotification=c.notifications,a.totalCount=c.count})}}]),a}();angular.module("uiGenApp").controller("NavbarController",NavbarController),angular.module("uiGenApp").directive("navbar",function(){return{templateUrl:"components/navbar/navbar.html",replace:!1,restrict:"E",controller:"NavbarController",controllerAs:"NavBar"}}),angular.module("uiGenApp").directive("navigation",function(){return{templateUrl:"components/navigation/navigation.html",restrict:"E"}});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),QuickStateChangeController=function(){function a(b,c,d){_classCallCheck(this,a),this.$http=b,this.StateChange=c,this.Session=d,this.$onInit()}return a.$inject=["$http","StateChange","Session"],_createClass(a,[{key:"$onInit",value:function(){this.states=this.Session.read(("shipment"===this.type?"shipment-":"")+"states")}}]),a}();angular.module("uiGenApp").directive("quickStateChange",function(){return{templateUrl:"components/quick-state-change/quick-state-change.html",restrict:"E",controller:QuickStateChangeController,controllerAs:"$ctrl",bindToController:!0,scope:{data:"=",type:"="}}}),angular.module("uiGenApp").factory("socket",Socket),angular.module("uiGenApp").run(["$templateCache",function(a){a.put("app/directives/add-follower/add-follower.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Add Follower<div ng-click=AddFollower.cancel() class=close>×</div></div></div></div><div class=modal-body><label class="w-full input-group"><div class="col-xs-12 no-padder">Follower</div><div class="col-xs-12 no-padder"><div ng-repeat="follower in AddFollower.FollowerData" style="padding: 2px" ng-if="follower.showAllFollower || $index &lt; 6" class="pull-left b-a b-info text-info-dker m-r-xs m-b-xs r">{{follower.name}}</div><a ng-click="follower.showAllFollower = !follower.showAllFollower" class=pull-left><span ng-if=follower.showAllFollower class="font-bold text-info-dker">– Less</span><span ng-if=!follower.showAllFollower class="font-bold text-info-dker">+ More</span></a></div><div class="col-xs-12 no-padder">To Be Added</div><div class="col-xs-12 no-padder"><div ng-repeat="follower in AddFollower.newEmails" style="padding: 2px" ng-if="follower.showNewAllFollower || $index &lt; 6" class="pull-left b-a b-info text-info-dker m-r-xs m-b-xs r">{{follower}}</div><a ng-click="follower.showNewAllFollower = !follower.showNewAllFollower" class=pull-left><span ng-if=follower.showNewAllFollower class="font-bold text-info-dker">– Less</span><span ng-if=!follower.showNewAllFollower class="font-bold text-info-dker">+ More</span></a></div><div class="col-xs-12 no-padder"><div class="col-xs-6 no-padder input-group"><input ng-model=AddFollower.emailTobeAdded placeholder="Enter email ids of user" class="form-control"><span class=input-group-btn><button type=button ng-click=AddFollower.addNewFollower() class="btn btn-default"><i class="fa fa-plus"></i></button></span></div></div></label></div><div class=modal-footer><a ng-click=AddFollower.ok() ng-href="" target=_blank class="btn btn-primary">Add</a></div>'),a.put("app/directives/announcement-modal/announcement-modal.html",'<div style=z-index:1;position:absolute;right:0 ng-click="$ctrl.$uibModalInstance.close({ isVisited: false })" class="h2 pull-right p-xs m-r-sm pointer">×</div><div class=modal-body><div style=margin:auto;float:none class="col-md-12 no-padder flex h-full"><div style=float:none;margin:auto class="col-xs-12 wrapper-lg flex"><div class="col-xs-6 no-padder"><div class=hbox><div class=flex-box><div style=font-weight:600 class="h3 m-b-sm">{{$ctrl.data.title}}</div><div style=font-size:15px class="h4 wrapper-sm">{{$ctrl.data.text}}</div><a href={{$ctrl.data.url}} target=_blank ng-click="$ctrl.$uibModalInstance.close({ isVisited: true })" class="btn btn-success">Visit</a></div></div></div><div class="col-xs-6 no-padder"><div style=margin:auto class="col-xs-12 no-padder"><img src={{$ctrl.data.image}} class="img-responsive col-xs-12 no-padder"></div></div></div></div></div>'),a.put("app/directives/change-item-state/change-item-state.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Change Item Status of {{$ctrl.pkg.Store.name}} - # {{$ctrl.pkgItem.id}}<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div></div><div ng-if="$ctrl.stateId === 54"><div><span ng-bind=$ctrl.error ng-if=$ctrl.error class="alert alert-danger"></span><br><div class=col-xs-6Please><select name=upload_type ng-model=$ctrl.data.upload_type style="width: auto; display: -webkit-inline-box" required class="form-control p-r p-r-m"><option value=1>Upload KYC</option><option value=2>Upload Original Prescription of Medicines</option><option value=3>Upload Invoice/Bill</option><option value=4>Upload Original Prescription & Invoice of the Medicines</option></select></div></div></div><div ng-if="$ctrl.stateId === 5 &amp;&amp; !$ctrl.pkg.weight"><div><br><div class=col-xs-12Please>Enter Weight of Package</div><div style="width: 33%" class=col-xs-2><label class=input-group>Weight: &nbsp;<input ng-model=$ctrl.data.weight></label></div><div style="width: 28%" class=col-xs-2><label class="col-xs-12 input-group">Restricted Item</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_restricted_item name=is_restricted_item value=0 required><i></i><div class=hide></div>No</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_restricted_item name=is_restricted_item value=1 required><i></i><div class=hide></div>Yes</label></li></ul></div></div><div style="width: 37%" class=col-xs-3><label class="col-xs-12 input-group">Content Type</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.content_type value="1"><i></i><div class=hide></div>Normal</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.content_type value="2"><i></i><div class=hide></div>Special</label></li></ul></div></div><br></div></div></div><form name=form ng-submit=$ctrl.ok() class=form-validation><div class=modal-body><label ng-init="$ctrl.data.state_id = $ctrl.states[$ctrl.stateId].Childs[0].state_id" class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.state_id}}</strong><select ng-model=$ctrl.data.state_id ng-disabled="$ctrl.states[$ctrl.stateId].Childs.length===1" ng-if="$ctrl.stateId !== 12" class="form form-control"><option ng-repeat="state in $ctrl.states[$ctrl.stateId].Childs" ng-value=state.state_id ng-selected=$first>{{$ctrl.states[state.state_id].action}}</option></select></label><label ng-if=$ctrl.states[$ctrl.stateId].config.currency class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.currency}}</strong><select ng-model=$ctrl.data.currency ng-init="$ctrl.data.currency = &quot;INR&quot;" required class="form form-control"><option value=INR>INR India Rupees</option><option ng-repeat="(currencyKey, currency) in $ctrl.currency" ng-value=currencyKey>{{currency}}</option></select></label><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc_raw}}</strong><br><input ng-model=$ctrl.data.offered_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.offered_ctc = ($ctrl.data.offered_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc}}</strong><br><input readonly ng-model=$ctrl.data.offered_ctc class="form form-control"></label></div><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc_raw}}</strong><br><input ng-model=$ctrl.data.final_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.final_ctc = ($ctrl.data.final_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc}}</strong><br><input readonly ng-model=$ctrl.data.final_ctc class="form form-control"></label></div><div ng-if=$ctrl.ui.checking class="padder text-primary text-sm"><i class="fa fa-spin fa-circle-o-notch"></i><span class=m-l-xs>Checking slot availibility ...</span></div><div ng-if=$ctrl.showMessage ng-class="{&quot;text-danger&quot;: $ctrl.data.state_id === 5, &quot;text-warning&quot;: $ctrl.data.state_id !== 5}" class="text-sm font-bold"><span>An Interview is already scheduled for&nbsp;<span ng-if="$ctrl.user.client_id !== $ctrl.interviewee.client_id">someone</span><a ng-if="$ctrl.user.client_id === $ctrl.interviewee.client_id" ng-bind=$ctrl.interviewee.name ui-sref="package.view({packageId: $ctrl.interviewee.id})" target=_blank class="text-primary text-u-l"></a><span>&nbsp;on&nbsp;</span><span ng-bind="$ctrl.interviewee.interview_time | date: &quot;dd MMM yyyy, h:mma&quot;"></span></span></div><label class=input-group><strong>Instructions and Comments</strong><br><textarea name=textarea placeholder={{$ctrl.states[$ctrl.stateId].config.comments}} rows=7 cols=50 ng-model=$ctrl.data.comments class="form form-control"></textarea></label></div><div class=modal-footer><button type=submit ng-disabled="form.$invalid || $ctrl.submitting || ($ctrl.showMessage &amp;&amp; $ctrl.data.state_id === 5) || $ctrl.ui.checking" class="btn btn-primary"><span ng-if=!$ctrl.submitting class=text-white>Submit</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></form>'),a.put("app/directives/change-order-state/change-order-state.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Change Status of {{$ctrl.order.Store.name}} - # {{$ctrl.order.id}}<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div></div><!--div(ng-if=\'$ctrl.stateId === 63 && $ctrl.transactions.payment_gateway_id == $ctrl.paymentGateways.wire\')--><!--  div--><!--    span.alert.alert-danger(ng-bind=\'$ctrl.error\' ng-if=\'$ctrl.error\')--><!--    br--><!--    .col-xs-6Please Enter Wire payment Transaction Id--><!--    br--><!--    .col-xs-2(style="width: 34%;")--><!--      label.input-group--><!--        | Payment ID: &nbsp;--><!--        input(ng-model=\'$ctrl.data.payment_id\' type =\'text\')--><!--    .col-xs-2(style="width: 34%;")--><!--      label.input-group--><!--        | amount: &nbsp;--><!--        input(ng-model=\'$ctrl.data.amount\' type =\'text\')--><!--    .col-xs-2(style="width: 30%;")--><!--      label.input-group--><!--        | Date: &nbsp;--><!--        input(ng-model=\'$ctrl.data.date\' type=\'date\' placeholder=\'\')br--></div><form name=form ng-submit=$ctrl.ok() class=form-validation><div class=modal-body><label ng-init="$ctrl.data.state_id = $ctrl.states[$ctrl.stateId].Childs[0].state_id" class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.state_id}}</strong><select ng-model=$ctrl.data.state_id ng-disabled="$ctrl.states[$ctrl.stateId].Childs.length===1" ng-if="$ctrl.stateId !== 12" class="form form-control"><option ng-repeat="state in $ctrl.states[$ctrl.stateId].Childs" ng-value=state.state_id ng-selected=$first>{{$ctrl.states[state.state_id].action}}</option></select></label><label ng-if=$ctrl.states[$ctrl.stateId].config.currency class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.currency}}</strong><select ng-model=$ctrl.data.currency ng-init="$ctrl.data.currency = &quot;INR&quot;" required class="form form-control"><option value=INR>INR India Rupees</option><option ng-repeat="(currencyKey, currency) in $ctrl.currency" ng-value=currencyKey>{{currency}}</option></select></label><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc_raw}}</strong><br><input ng-model=$ctrl.data.offered_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.offered_ctc = ($ctrl.data.offered_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc}}</strong><br><input readonly ng-model=$ctrl.data.offered_ctc class="form form-control"></label></div><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc_raw}}</strong><br><input ng-model=$ctrl.data.final_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.final_ctc = ($ctrl.data.final_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc}}</strong><br><input readonly ng-model=$ctrl.data.final_ctc class="form form-control"></label></div><div ng-if=$ctrl.ui.checking class="padder text-primary text-sm"><i class="fa fa-spin fa-circle-o-notch"></i><span class=m-l-xs>Checking slot availibility ...</span></div><div ng-if=$ctrl.showMessage ng-class="{&quot;text-danger&quot;: $ctrl.data.state_id === 5, &quot;text-warning&quot;: $ctrl.data.state_id !== 5}" class="text-sm font-bold"><span>An Interview is already scheduled for&nbsp;<span ng-if="$ctrl.user.client_id !== $ctrl.interviewee.client_id">someone</span><a ng-if="$ctrl.user.client_id === $ctrl.interviewee.client_id" ng-bind=$ctrl.interviewee.name ui-sref="package.view({packageId: $ctrl.interviewee.id})" target=_blank class="text-primary text-u-l"></a><span>&nbsp;on&nbsp;</span><span ng-bind="$ctrl.interviewee.interview_time | date: &quot;dd MMM yyyy, h:mma&quot;"></span></span></div><label class=input-group><strong>Instructions and Comments</strong><br><textarea name=textarea placeholder={{$ctrl.states[$ctrl.stateId].config.comments}} rows=7 cols=50 ng-model=$ctrl.data.comments class="form form-control"></textarea></label></div><div class=modal-footer><button type=submit ng-disabled="form.$invalid || $ctrl.submitting || ($ctrl.showMessage &amp;&amp; $ctrl.data.state_id === 5) || $ctrl.ui.checking" class="btn btn-primary"><span ng-if=!$ctrl.submitting class=text-white>Submit</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></form>'),a.put("app/directives/change-shipment-state/change-shipment-state.html",'<div class=modal-header><div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div><div class=modal-title><div ng-if="$ctrl.data.state_id === 17"><div><span ng-if=$ctrl.validations[$ctrl.stateId].allPackageItemsScanned class="alert alert-success">All Packages Scanned.</span><span ng-bind=$ctrl.error ng-if=$ctrl.error class="alert alert-danger"></span><br><div class=col-xs-6>Please scan barcode of all the items<label class=input-group>Item Id: &nbsp;<input ng-model=$ctrl.package_item_id ng-keypress="$ctrl.scan($event, $ctrl.package_item_id);"></label></div><div class=col-xs-2><h3 class=no-margin><span ng-bind=$ctrl.scanCompletedCount></span><span>/</span><span ng-bind=$ctrl.packageItems.length></span></h3></div><div class=col-xs-4><img ng-show=$ctrl.scannedImage ng-src={{$ctrl.scannedImage}} width=150px height="130px"></div></div><br><table style="width: 100%;background-color: #ffddb28f"><thead><tr><th>Store</th><th class=hide>Item ID</th><th>Package ID</th><th>Item Name</th></tr></thead><tbody><tr ng-mouseenter="packageItem.hover = true" ng-mouseleave="packageItem.hover = false" ng-repeat="packageItem in $ctrl.packageItems | orderBy: &quot;-scanned&quot;" ng-class="{invert: packageItem.scanned, hover: packageItem.hover }" tooltip-placement=left uib-tooltip-html="&quot;&lt;img width=250 src=&quot; + packageItem.signed_object + &quot;&gt;&quot;"><td ng-bind=packageItem.Package.Store.name ng-click=$ctrl.viewItemPhoto(packageItem)></td><td class=hide><a href={{packageItem.signed_object}} target=_blank ng-bind=packageItem.id></a></td><td><a href={{packageItem.signed_object}} target=_blank ng-bind=packageItem.Package.id></a></td><td ng-bind=packageItem.name></td></tr></tbody></table></div><hr><div class="h4 text-info">Change Status of Shipment- # {{$ctrl.shipment.id}}</div></div></div><form name=form ng-submit=$ctrl.ok() class=form-validation><div class=modal-body><label ng-init="$ctrl.data.state_id = $ctrl.states[$ctrl.stateId].Childs[0].state_id" class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.state_id}}</strong><select ng-model=$ctrl.data.state_id ng-disabled="$ctrl.states[$ctrl.stateId].Childs.length===1" ng-if="$ctrl.stateId !== 12" class="form form-control"><option ng-repeat="state in $ctrl.states[$ctrl.stateId].Childs" ng-value=state.state_id ng-selected=$first>{{$ctrl.states[state.state_id].action}}</option></select></label><label ng-if=$ctrl.states[$ctrl.stateId].config.scheduled_on class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.scheduled_on}}</strong><div class=input-group><input uib-datepicker-popup=dd-MMMM-yyyy ng-model=$ctrl.exData.scheduled_on_date ng-change=$ctrl.setScheduledOn() is-open=$ctrl.ui.scheduledOn close-text=Close ng-click="$ctrl.ui.scheduledOn = true" required ng-model-options="{debounce: 300}" class="form form-control"></div></label><label ng-if=$ctrl.states[$ctrl.stateId].config.scheduled_on ng-show="$ctrl.stateId === 12" class=input-group><strong>Time</strong><div class=input-group><div ng-model=$ctrl.exData.scheduled_on_time uib-timepicker=uib-timepicker ng-change=$ctrl.setScheduledOn() hour-step=1 minute-step=15 show-meridian=true ng-model-options="{debounce: 300}" class=w-sm></div></div></label><label ng-if=$ctrl.states[$ctrl.stateId].config.suggested_join_date class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.suggested_join_date}}</strong><div class=input-group><input uib-datepicker-popup=dd-MMMM-yyyy ng-model=$ctrl.data.suggested_join_date is-open=$ctrl.ui.suggestedJoinDate close-text=Close ng-click="$ctrl.ui.suggestedJoinDate = true" required class="form form-control"></div></label><label ng-if=$ctrl.states[$ctrl.stateId].config.currency class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.currency}}</strong><select ng-model=$ctrl.data.currency ng-init="$ctrl.data.currency = &quot;INR&quot;" required class="form form-control"><option value=INR>INR India Rupees</option><option ng-repeat="(currencyKey, currency) in $ctrl.currency" ng-value=currencyKey>{{currency}}</option></select></label><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc_raw}}</strong><br><input ng-model=$ctrl.data.offered_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.offered_ctc = ($ctrl.data.offered_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc}}</strong><br><input readonly ng-model=$ctrl.data.offered_ctc class="form form-control"></label></div><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc_raw}}</strong><br><input ng-model=$ctrl.data.final_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.final_ctc = ($ctrl.data.final_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc}}</strong><br><input readonly ng-model=$ctrl.data.final_ctc class="form form-control"></label></div><div ng-if=$ctrl.ui.checking class="padder text-primary text-sm"><i class="fa fa-spin fa-circle-o-notch"></i><span class=m-l-xs>Checking slot availibility ...</span></div><div ng-if=$ctrl.showMessage ng-class="{&quot;text-danger&quot;: $ctrl.data.state_id === 5, &quot;text-warning&quot;: $ctrl.data.state_id !== 5}" class="text-sm font-bold"><span>An Interview is already scheduled for&nbsp;<span ng-if="$ctrl.user.client_id !== $ctrl.interviewee.client_id">someone</span><a ng-if="$ctrl.user.client_id === $ctrl.interviewee.client_id" ng-bind=$ctrl.interviewee.name ui-sref="package.view({packageId: $ctrl.interviewee.id})" target=_blank class="text-primary text-u-l"></a><span>&nbsp;on&nbsp;</span><span ng-bind="$ctrl.interviewee.interview_time | date: &quot;dd MMM yyyy, h:mma&quot;"></span></span></div><label class=input-group><strong>Instructions and Comments</strong><br><textarea name=textarea placeholder={{$ctrl.states[$ctrl.stateId].config.comments}} rows=7 cols=50 ng-model=$ctrl.data.comments class="form form-control"></textarea></label></div><div class=modal-footer><button type=submit ng-disabled="form.$invalid || $ctrl.submitting || ($ctrl.showMessage &amp;&amp; $ctrl.data.state_id === 5) || $ctrl.ui.checking" class="btn btn-primary"><span ng-if=!$ctrl.submitting class=text-white>Submit</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></form>'),
a.put("app/directives/change-state/change-state.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Change Status of {{$ctrl.pkg.Store.name}} - # {{$ctrl.pkg.id}}<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div></div><div ng-if="$ctrl.stateId === 54"><div><span ng-bind=$ctrl.error ng-if=$ctrl.error class="alert alert-danger"></span><br><div class=col-xs-6Please><select name=upload_type ng-model=$ctrl.data.upload_type style="width: auto; display: -webkit-inline-box" required class="form-control p-r p-r-m"><option value=1>Upload KYC</option><option value=2>Upload Original Prescription of Medicines</option><option value=3>Upload Invoice/Bill</option><option value=4>Upload Original Prescription & Invoice of the Medicines</option></select></div></div></div><div ng-if="$ctrl.stateId === 5 &amp;&amp; (!$ctrl.pkg.invoice_code || !$ctrl.pkg.weight)"><div><br><div class=col-xs-12Please>Enter Reference Code</div><div style="width: 33%" class=col-xs-2><label class=input-group>Reference Code: &nbsp;<input ng-model=$ctrl.data.invoice_code></label></div><div class=col-xs-12>Enter Weight of Package</div><div style="width: 33%" class=col-xs-2><label class=input-group>Weight: &nbsp;<input ng-model=$ctrl.data.weight></label></div></div></div><br><div ng-if="$ctrl.stateId === 5 &amp;&amp; !$ctrl.pkg.is_full_invoice_received"><div><br><div style="width: 28%" class=col-xs-2><label class="col-xs-12 input-group">Is full invoice received</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_full_invoice_received name=is_full_invoice_received value=0 required><i></i><div class=hide></div>No</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_full_invoice_received name=is_full_invoice_received value=1 required><i></i><div class=hide></div>Yes</label></li></ul></div></div></div></div><div ng-if="$ctrl.stateId === 5 &amp;&amp; !$ctrl.pkg.content_type"><div><br><div style="width: 28%" class=col-xs-2><label class="col-xs-12 input-group">Restricted Item</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_restricted_item name=is_restricted_item value=0 required><i></i><div class=hide></div>No</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_restricted_item name=is_restricted_item value=1 required><i></i><div class=hide></div>Yes</label></li></ul></div></div><div style="width: 37%" class=col-xs-3><label class="col-xs-12 input-group">Content Type</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.content_type value="1"><i></i><div class=hide></div>Normal</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.content_type value="2"><i></i><div class=hide></div>Special</label></li></ul></div></div><br></div></div></div><form name=form ng-submit=$ctrl.ok() class=form-validation><div class=modal-body><label ng-init="$ctrl.data.state_id = $ctrl.states[$ctrl.stateId].Childs[0].state_id" class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.state_id}}</strong><select ng-model=$ctrl.data.state_id ng-disabled="$ctrl.states[$ctrl.stateId].Childs.length===1" ng-if="$ctrl.stateId !== 12" class="form form-control"><option ng-repeat="state in $ctrl.states[$ctrl.stateId].Childs" ng-value=state.state_id ng-selected=$first>{{$ctrl.states[state.state_id].action}}</option></select></label><label ng-if=$ctrl.states[$ctrl.stateId].config.currency class=input-group><strong>{{$ctrl.states[$ctrl.stateId].config.currency}}</strong><select ng-model=$ctrl.data.currency ng-init="$ctrl.data.currency = &quot;INR&quot;" required class="form form-control"><option value=INR>INR India Rupees</option><option ng-repeat="(currencyKey, currency) in $ctrl.currency" ng-value=currencyKey>{{currency}}</option></select></label><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc_raw}}</strong><br><input ng-model=$ctrl.data.offered_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.offered_ctc = ($ctrl.data.offered_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.offered_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.offered_ctc}}</strong><br><input readonly ng-model=$ctrl.data.offered_ctc class="form form-control"></label></div><div class=input-group><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc_raw}}</strong><br><input ng-model=$ctrl.data.final_ctc_raw step=0.1 min=0.1 type=number ng-change="$ctrl.data.final_ctc = ($ctrl.data.final_ctc_raw/100000).toFixed(2)" required class="form form-control"></label><label ng-if=$ctrl.states[$ctrl.stateId].config.final_ctc_raw><strong>{{$ctrl.states[$ctrl.stateId].config.final_ctc}}</strong><br><input readonly ng-model=$ctrl.data.final_ctc class="form form-control"></label></div><div ng-if=$ctrl.ui.checking class="padder text-primary text-sm"><i class="fa fa-spin fa-circle-o-notch"></i><span class=m-l-xs>Checking slot availibility ...</span></div><div ng-if=$ctrl.showMessage ng-class="{&quot;text-danger&quot;: $ctrl.data.state_id === 5, &quot;text-warning&quot;: $ctrl.data.state_id !== 5}" class="text-sm font-bold"><span>An Interview is already scheduled for&nbsp;<span ng-if="$ctrl.user.client_id !== $ctrl.interviewee.client_id">someone</span><a ng-if="$ctrl.user.client_id === $ctrl.interviewee.client_id" ng-bind=$ctrl.interviewee.name ui-sref="package.view({packageId: $ctrl.interviewee.id})" target=_blank class="text-primary text-u-l"></a><span>&nbsp;on&nbsp;</span><span ng-bind="$ctrl.interviewee.interview_time | date: &quot;dd MMM yyyy, h:mma&quot;"></span></span></div><label class=input-group><strong>Instructions and Comments</strong><br><textarea name=textarea placeholder={{$ctrl.states[$ctrl.stateId].config.comments}} rows=7 cols=50 ng-model=$ctrl.data.comments class="form form-control"></textarea></label></div><div class=modal-footer><button type=submit ng-disabled="form.$invalid || $ctrl.submitting || ($ctrl.showMessage &amp;&amp; $ctrl.data.state_id === 5) || $ctrl.ui.checking" class="btn btn-primary"><span ng-if=!$ctrl.submitting class=text-white>Submit</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></form>'),a.put("app/directives/click-tocopy/click-tocopy.html",'<div class=modal-header><div class=modal-title><!--.h4.text-info Payment Details - {{JobPayment.job._root_.payment}}--><div class="h4 text-info">Click To Copy<!--.h4.text-info Fixed Module - Standard--><div ng-click=ClickToCopy.cancel() class="close text-dark">×</div></div></div></div><div class=modal-body><div class="foo text-black"><button ngclipboard="" data-clipboard-target=.foo class="pull-right btn btn-info">Copy to Clipboard</button><h3 class=text-black>{{ClickToCopy.job.role}}</h3><div ng-if=ClickToCopy.job._root_.short_description><b>About Company :</b><p>{{ClickToCopy.job._root_.short_description}}</p></div><div ng-if=ClickToCopy.job.job_location><b>Location :</b> {{ClickToCopy.job.job_location}}</div><div ng-if=ClickToCopy.job.min_exp><b>Experience :</b> {{ClickToCopy.job.min_exp}} – {{ClickToCopy.job.max_exp}} Years</div><div ng-if=ClickToCopy.job.functional_area><b>Function :</b> {{ClickToCopy.job.functional_area}}</div><div ng-if=ClickToCopy.job.vacancy><b>Vacancy :</b> {{ClickToCopy.job.vacancy}}</div><div><b>Job Description :</b><p ng-bind-html=ClickToCopy.trustAsHtml(ClickToCopy.job.responsibility) style="word-break: break-all"></p></div><div ng-if=ClickToCopy.job.degrees><b>Qualification :</b><span ng-repeat="value in ClickToCopy.job.degrees">&nbsp;{{value}}&nbsp;</span></div><div ng-if=ClickToCopy.job.days_per_week><b>Working Days :</b> {{ClickToCopy.job.days_per_week}} Days a Week ({{ClickToCopy.job.start_work_time}} to {{ClickToCopy.job.end_work_time}})</div><div ng-if=ClickToCopy.job.job_nature><b>Job Nature :</b> {{ClickToCopy.job.job_nature}}</div></div></div><div class=modal-footer><button ngclipboard="" data-clipboard-target=.foo class="btn btn-info">Copy to Clipboard</button><a ng-click=ClickToCopy.cancel() class="btn btn-danger">Close</a></div>'),a.put("app/directives/confirm-dialog/confirm-dialog.html",'<div class="modal-header bg-light dk"><div class=modal-title><div ng-bind=$ctrl.title class="text-info-dker h4"></div></div></div><div class="modal-body bg-white-only"><div ng-bind=$ctrl.description class="wrapper-xs h4 text-black"></div><div class=clear><div class="pull-right wrapper-xs"><strong><a ng-click=$ctrl.$uibModalInstance.close(true) class="btn btn-lg text-info-dker">Yes</a></strong><strong><a ng-click=$ctrl.$uibModalInstance.dismiss() class="btn btn-lg text-info-dker">No</a></strong></div></div></div>'),a.put("app/directives/createCategory/createCategory.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Create Category<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div></div></div><div class="m-t-xl no-margin"><div class=hbox><div class="wrapper-md bg-white-only"><form name=newCategoryForm novalidate ng-submit=$ctrl.create() autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class="col-md-12 col-sm-12 col-xs-12 no-padder"><div class=row><label class="col-xs-12 input-group">Enter New Category<span class=text-danger>*</span><input name=name placeholder="eg. Mobile" ng-model=$ctrl.PackageItemCategory.name autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newCategoryForm.name.$dirty &amp;&amp; newCategoryForm.name.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Category</span></label></div><div class=modal-footer><button type=submit ng-disabled=$ctrl.submitting class="btn btn-success"><span ng-if=!$ctrl.submitting class=text-white>Save Category</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></form></div></div></div>'),a.put("app/directives/createStore/createStore.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Create Store<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div></div></div><div class="m-t-xl no-margin"><div class=hbox><div class="wrapper-md bg-white-only"><form name=newStoreForm novalidate ng-submit=$ctrl.create() autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class="col-md-12 col-sm-12 col-xs-12 no-padder"><div class=row><label class="col-xs-12 input-group">Enter Store<span class=text-danger>*</span><input name=name placeholder="eg. flipkart.com" ng-model=$ctrl.data.name autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newStoreForm.name.$dirty &amp;&amp; newStoreForm.name.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Store</span></label></div><div class=modal-footer><button type=submit ng-disabled=$ctrl.submitting class="btn btn-success"><span ng-if=!$ctrl.submitting class=text-white>Save Store</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></form></div></div></div>'),a.put("app/directives/directive-header/directive-header.html",'<!-- Changing this directive will impact: job.applicants job.applicants.new job.references.list--><div class=directive-header><div style="position:fixed;z-index: 6;height: 42px" ng-if=page.customerPackages class="bg-light b-b padder w-full bg-white-only m-t-xl"><ul ng-if=page.customerPackages class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in options.buckets" ui-sref-active=active ng-show=buttons.buckets><a ui-sref="customer.packages.index({ id: options.customer.id, bucket: bucket })" ng-bind=bucket></a></li></ul></div><div style="position: fixed;right: 5px;z-index: 9;margin-top: 7px"><ul class="nav nav-pills nav-sm"><li class="m-r-xs pull-right"><a ng-class="buttons.highlight == \'view-applicants\'?\'btn-success b-success\':\'b-info text-info\' " ng-show=buttons.viewPackages ui-sref="customer.packages.index({ id: options.customer.id, bucket: &quot;ALL&quot; })" uib-popover="for {{options.customer.virtual_address_code}} - {{options.customer.name}}" class="h5 font-bold b-a"><i class="fa fa-list"></i></a></li><li class="m-r-xs pull-right"><a ng-class="buttons.highlight == \'view\'?\'btn-info\':\'b-info text-info \' " ng-show=buttons.view ui-sref="package.show({ id: options.pkg.id })" class="h5 font-bold b-a"><i class="fa fa-eye"></i></a></li><li ng-if=buttons.packageCreate class="m-r-xs pull-right"><a ui-sref="package.items({ id: options.$stateParams.id })" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span>Add Package Items</span></a></li><li ng-if="!options.customer.create &amp;&amp; options.customer.personalShopperCount" class="m-r-xs pull-right"><a ui-sref="customer.orders.index({ customer_id: options.customer.id, bucket: &quot;TASKS&quot;, create: true })" uib-popover="for {{options.customer.virtual_address_code}} - {{options.customer.name}}" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span>View PersonalShopper Packages</span><i ng-bind=options.customer.personalShopperCount style=line-height:29px;width:30px;height:30px;font-style:normal class=pull-right></i></a></li><li ng-if="options.customer.create || !options.customer.packageCount" class="m-r-xs pull-right"><a ui-sref="customer.packages.create({ id: options.customer.id, create: false })" uib-popover="for {{options.customer.virtual_address_code}} - {{options.customer.name}}" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span>Add Package</span></a></li><li ng-if="options.customer.create || !options.customer.packageCount" class="m-r-xs pull-right"><a ui-sref="customer.packages.bulk({ customer_id: options.customer.id, create: false })" uib-popover="for {{options.customer.virtual_address_code}} - {{options.customer.name}}" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span>Bulk Package Upload</span><!--i.pull-right(ng-bind=\'options.customer.packageCount\' style=\'line-height:29px;width:30px;height:30px;font-style:normal\')--></a></li></ul></div><div class="h5 btn-info b-a b-info font-bold"></div></div>'),a.put("app/directives/download-resume/download-resume.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Download CV<div ng-click=DownloadResume.cancel() class=close>×</div></div></div></div><div class=modal-body><div class="radio m-b-md"><label class="i-checks i-checks-sm"><input type=radio ng-model=DownloadResume.concat value="true"><i></i> Download CV with CTC</label></div><div class=radio><label class="i-checks i-checks-sm"><input type=radio ng-model=DownloadResume.concat value="false"><i></i> Download CV without CTC</label></div></div><div class=modal-footer><a ng-click=DownloadResume.ok() ng-href="{{DownloadResume.downloadUrl}}&amp;concat={{DownloadResume.concat}}" target=_blank class="btn btn-primary">Download</a></div>'),a.put("app/directives/email-candidate/email-candidate.html",'<div class="hbox hbox-auto-xs hbox-auto-sm bg-white-only"><form name=searchCandidateForm ng-submit=$ctrl.emailCandidate() class="form-horizontal wrapper-md"><div class=row><!-- Form Block--><div style=margin:auto;float:inherit class="col-md-7 col-lg-10 col-lg-10"><!-- Form Items--><div style=cursor:pointer ng-click=$ctrl.cancel() class="streach-text pull-right m-r-xs">X</div><div class="row flex centerFlex"><div class="col-md-6 col-sm-6 col-xs-6 h-center"><div style=font-weight:500;margin-left:10px class="h4 text-info">To Candidate</div></div></div><div style=height:1px class="line bg-light"></div><div class="row m-t-md flex centerFlex"><div class="col-md-6 col-sm-6 col-xs-6 h-center"><label class="col-xs-12 input-group">Name<input placeholder="" ng-model=$ctrl.email.name required class="form form-control"></label></div></div><div class="row m-t-xs flex centerFlex"><div class="col-md-6 col-sm-6 col-xs-6"><label class="col-xs-12 input-group">Reply-to Email<input type=email placeholder="" ng-model=$ctrl.email.replyTo required class="form form-control"></label></div></div><div class="row m-t-xs flex centerFlex"><div class="col-md-6 col-sm-6 col-xs-6"><label class="col-xs-12 input-group">To<input type=email placeholder="" ng-model=$ctrl.email.to required class="form form-control"></label></div></div><div class="row m-t-xs flex centerFlex"><div class="col-md-6 col-sm-6 col-xs-6"><label class="col-xs-12 input-group">Subject<input placeholder="" ng-model=$ctrl.email.subject autofocus required class="form form-control"></label></div></div><div class="row m-t-xs flex centerFlex"><div class="col-md-6 col-sm-6 col-xs-12"><label class="col-xs-12 input-group">Message<!--.col-xs-12.no-padder.m-l-xs.m-t-xs: label.i-checks.small-checkinput(type=\'checkbox\' ng-model="$ctrl.email.add_salutation")\ni.m-r-none.pull-left\n.h6.pull-left Add Personalized Salutation--><div class=h6>Dear Candidate, (Candidate will be replaced by candidates actual name)</div><textarea type=text placeholder="" ng-model=$ctrl.email.message style=resize:none;min-height:80px required class="m-t-xs form form-control"></textarea></label></div></div><div class="row m-t-xs flex centerFlex"><div class="col-md-6 col-sm-6 col-xs-6"><div style=background:#EBECEE class="col-md-12 col-sm-12 col-xs-12 no-padder"><label class="btn btn-default pull-left"><div class="i-checks i-checks-sm pull-left"><input type=file ng-model=$ctrl.email.attachments base-sixty-four-input=base-sixty-four-input maxsize=10000 name=file class="form-control"><input type=checkbox ng-checked="$ctrl.email.attachments"><i class=m-r-none></i></div><div class=pull-left>Choose File</div></label><div class="m-l-xs m-t-xs pull-left">{{$ctrl.email.attachments.filename}}</div></div></div></div><div class="row text-center m-t-lg"><div class="col-md-12 col-xs-12"><button type=submit style=padding-top:2px;padding-bottom:2px class="btn btn-info">Send</button></div></div></div></div><div ng-bind=Profile.errorMessage.data.message class="col-md-8 text-danger font-bold"></div><div class=clearfix></div></form></div>'),a.put("app/directives/full-screen-content/full-screen-content.html",""),a.put("app/directives/job-comment/job-comment.html",'<div class="wrapper-xs no-padder"><div ng-click="$ctrl.collapse.broadcast = !$ctrl.collapse.broadcast" style="height: 25px" class="h5 pointer wrapper-xs m-b-xs"><i ng-class="{ &quot;fa-chevron-down&quot;: $ctrl.collapse.broadcast, &quot;fa-chevron-up&quot;: !$ctrl.collapse.broadcast }" style="font-size: 12px" class="fa pull-right fa-chevron-up"></i><div ng-style="{color: $ctrl.collapse.broadcast ? &quot;#58666e&quot; : &quot;#5585B9&quot; }" class="pull-left m-l-xs">JD BROADCAST MESSAGE<i class="fa fa-comments pull-left"></i></div></div><div uib-collapse=$ctrl.collapse.broadcast aria-expanded=false aria-hidden=true class="wrapper-xs clearfix m-b-xs"><div ng-if=!$ctrl.data.length class="span m-b-xs">No New JD Broadcast Messages</div><div ng-if=$ctrl.data.length style="position: relative; height: 90%; width: 100%; top: 0; bottom: 50px; overflow-x: hidden;overflow-wrap: break-word" scroll-to-bottom=$ctrl.ui.scrollToBottom class="list-group list-group-sp"><div ng-repeat="comment in $ctrl.data | orderBy: [&quot;created_at&quot;, &quot;id&quot;] track by $index" class="list-group-item m-n clearfix padder-v m-b-sm b-b"><a class="pull-left thumb m-r-sm pull-left m-l-n-sm m-r-sm"><div class="fa-stack fa-2x text-info"><i style="font-size: 1.7em" class="fa fa-circle fa-stack-2x"></i><span style="color: #fff;line-height: 2em" class="fa fa-stack-1x h3">{{comment.user.name[0]}}</span></div></a><div ng-class="{&quot;clear&quot;: !$ctrl.job._root_.is_drive,  &quot;inline m-t-xs&quot;: $ctrl.job._root_.is_drive }" style="max-width: 90%"><div class="text-sm text-info-dker">{{comment.user.name}}<div class=text-danger-dker>{{$ctrl.states[comment.state_id].action}}</div><p ng-if=comment.body ng-bind=comment.body class="m-n text-muted-q"></p><em class="text-xs text-muted pull-right">{{comment.created_at | date: \'d MMM yyyy, h:mm a\'}}</em></div></div></div></div></div></div>'),a.put("app/directives/job-detail/job-detail.html",'<div title="{{$ctrl.job.client_name}} - {{$ctrl.job.role}} – {{$ctrl.job.job_location}}" style=max-width:255px class="pull-left wrapper-sm no-padder-top truncate"><span ng-bind="$ctrl.job.qrex_client_name || $ctrl.job.client_name" class="h4 text-info"></span><span ng-bind="&quot; - &quot;+ $ctrl.job.role" class="h4 text-info"></span><span ng-bind="&quot; - &quot; + $ctrl.job.job_location" class=h4></span></div><div class="pull-left wrapper-sm"><span class="b-1x b-r b-l b-ligth-dker"></span></div><div title="Salary range" class="pull-left wrapper-sm no-padder-top ng-binding"><i class="fa fa-lg fa-inr text-light-dker"></i><span ng-bind=$ctrl.job.min_sal class=m-l-xs></span><span class=m-l-xs>–</span><span ng-bind=$ctrl.job.max_sal class=m-l-xs></span><span>Lakhs</span></div><div title="Minumux/Maximum experience" class="pull-left wrapper-sm no-padder-top"><i class="fa fa-md fa-line-chart text-light-dker"></i><span>&nbsp;&nbsp;</span><span ng-bind=$ctrl.job.min_exp class=m-l-xs></span><span class=m-l-xs>-</span><span ng-bind=$ctrl.job.max_exp class=m-l-xs></span><span>Years</span></div><div title="Total vacancy" class="pull-left wrapper-sm no-padder-top"><i class="fa fa-md fa-users text-light-dker"></i><span>&nbsp;&nbsp;Vacancy</span><span ng-bind=$ctrl.job.vacancy class=m-l-xs></span></div><div title="Job status" class="pull-left wrapper-sm no-padder-top"><span ng-if="!(job.job_status === &quot;Closed&quot;)" class="b-a rounded text-success b-success bg-white-only"><span ng-bind="job.job_status === &quot;Closed&quot; ? &quot;Closed&quot; : &quot;Open&quot;" class="padder h5"></span></span></div>'),a.put("app/directives/job-payment/job-payment.html",'<div class=modal-header><div class=modal-title><!--.h4.text-info Payment Details - {{JobPayment.job._root_.payment}}--><div class="h4 text-info">Payment Details<!--.h4.text-info Fixed Module - Standard--><div ng-click=JobPayment.$uibModalInstance.dismiss(&quot;cancel&quot;); class="close text-dark">×</div></div></div></div><div class=modal-body><div ng-show=JobPayment.paymentDetails ng-repeat="group2 in JobPayment.groupsPaymentDetails" ng-init="count1 = JobPayment.groupsPaymentDetails.length-$index"><div class=clearfix></div><div ng-repeat="titlep in JobPayment._.uniq(JobPayment.paymentDetails) | filter: {start_time: group2}" ng-if="$index===0" style="{{JobPayment.isActiveAgreement(titlep) ? &quot;border: 3px solid #7EC55F;&quot; : &quot;&quot;}}" class=breadcrumb><h4 ng-if="(!JobPayment.job.open_platform || JobPayment.is_closed_commercial)" style="{{JobPayment.isActiveAgreement(titlep) ? &quot;color: #7EC55F;&quot; : &quot;&quot;}}"><i ng-if=JobPayment.isActiveAgreement(titlep) class="fa fa-check-circle-o m-r-sm"></i><span>Agreement {{count1}} - {{JobPayment.JOB_TYPE[titlep.isFixed]}}</span></h4><h4 ng-if="JobPayment.job.open_platform &amp;&amp; !JobPayment.is_closed_commercial" style="{{JobPayment.isActiveAgreement(titlep) ? &quot;color: #7EC55F;&quot; : &quot;&quot;}}"><i ng-if=JobPayment.isActiveAgreement(titlep) class="fa fa-check-circle-o m-r-sm"></i><span>Agreement {{count1}} - Commission</span></h4><table class="table table-bordered table-condensed table-bordered table-hover table-striped table-condensed table-striped-column text-center"><thead><tr style="background-color: #7EC55F;color: white"><th class=text-center>Start Date</th><th class=text-center>End Date</th><th ng-show="[0, 1].includes(titlep.isFixed)" class=text-center>CTC Range</th><th ng-show="[2, 3].includes(titlep.isFixed)" class=text-center>CTC Range</th><th ng-if="!JobPayment.job.open_platform || JobPayment.is_closed_commercial" ng-show="[4, 5].includes(titlep.isFixed)" class=text-center>Designation</th><th ng-if="(JobPayment.job.open_platform &amp;&amp; titlep.isFixed === 5 &amp;&amp; !JobPayment.is_closed_commercial) " class=text-center>Amount (INR)</th><th ng-if="(!JobPayment.job.open_platform || JobPayment.is_closed_commercial) || (JobPayment.job.open_platform &amp;&amp; titlep.isFixed === 4)" class=text-center>Percent (%)</th><th class=text-center>Payment Days</th><th class=text-center>Replacement Days</th></tr></thead><tbody><tr ng-repeat="item in JobPayment.paymentDetails | filter: {start_time: group2}" ng-if="[0, 1, 2, 3].includes(titlep.isFixed)"><td>{{ item.start_time | date:\'longDate\' }}</td><td>{{ item.end_time | date:\'longDate\' }}</td><td>{{item.currency}} {{item.start_range}}-{{item.end_range}} LPA</td><td ng-if="(!JobPayment.job.open_platform || JobPayment.is_closed_commercial) || (JobPayment.job.open_platform &amp;&amp; titlep.isFixed === 4)" ng-bind=item.percent></td><td>{{item.payment_days}}</td><td>{{ item.replacement_days}}</td></tr><tr ng-repeat="item in JobPayment.paymentDetails | filter: {start_time: group2}" ng-if="([4, 5].includes(titlep.isFixed)) &amp;&amp; ((JobPayment.job.open_platform &amp;&amp; !JobPayment.is_closed_commercial) || (JobPayment.jobDesignationId === item.id))"><td>{{ item.start_time | date:\'longDate\' }}</td><td ng-if="(item.end_time | date:\'longDate\') === \'January 1, 2099\'">-</td><td ng-if="!((item.end_time | date:\'longDate\') === \'January 1, 2099\')">{{ item.end_time | date:\'longDate\' }}</td><td ng-if="!JobPayment.job.open_platform || JobPayment.is_closed_commercial">{{item.start_range}}</td><td>{{ item.percent}}</td><td>{{item.payment_days}}</td><td>{{ item.replacement_days}}</td></tr></tbody></table></div><div ng-repeat="item in JobPayment._.uniq(JobPayment.paymentDetails) | filter: {start_time: group2}" ng-if="$index === 0"><div ng-if=item.consultant_comment class=col-sm-6><h4>Payment Comments</h4><p>{{item.consultant_comment}}</p></div><div class=clearfix></div><br><br></div><div class=clearfix></div></div></div><div class=modal-footer><a ng-click=JobPayment.$uibModalInstance.dismiss(&quot;cancel&quot;); class="btn btn-danger">Close</a></div>'),a.put("app/directives/ng-cropperjs/ng-cropperjs.html",'<div><!--h1 Image Upload Mobile Friendly/Touch Friendly--><div><video id=video width=640 height=480 autoplay ng-show="STATUS===\'INIT\'"></video><button id=snap ng-click=snap() ng-show="STATUS===\'INIT\'">Snap Photo</button><canvas id=canvas width=640 height=480 ng-show="STATUS===\'PREVIEW\'"></canvas></div><input type=file accept="image/*;capture=camera" ng-model=image ngf-select=loadImage($file) ng-show="STATUS ===&quot;START&quot;"><img id=image style="display:block;width:50%"><ul><li><button ng-click=done() ng-show="STATUS ===&quot;CROP&quot;">Done</button><button ng-click=upload() ng-show="STATUS ===&quot;PREVIEW&quot;">Upload</button><button ng-click=startCropping() ng-show="STATUS ===&quot;PREVIEW&quot;">Crop</button></li></ul></div>'),a.put("app/directives/notify-count/notify-count.html",'<i class="fa fa-lg fa-bell-o"></i><span class=visible-xs-inline>&nbsp; Notifications</span><i ng-if=$ctrl.counts.recent_count ng-bind=$ctrl.counts.recent_count class="badge badge-sm up bg-danger lter pull-right-xs"></i><i ng-if="!$ctrl.counts.recent_count &amp;&amp; $ctrl.counts.count" ng-bind=$ctrl.counts.count class="badge badge-sm up bg-light pull-right-xs"></i>'),a.put("app/directives/order-filter/order-filter.html",'<div style="overflow-x:hidden; font-size:15px" class=wrapper-md><div class="hbox m-b-sm m-t-md"><div class=row><div class="col-sm-3 no-padder-right m-t-xs"><span>Filter by</span></div><div class="col-sm-9 no-padder-left"><div class="v-middle w-full"><div class="m-l-md bg-light padder rounded"><input placeholder=Search ng-model=$ctrl.searchText class="w-full no-border bg-light wrapper-xs input-md"></div></div><div style="right: 0;top: 0" class="padder pos-fix"><div ng-click="$ctrl.$uibModalInstance.dismiss(\'cancel\')" class="pointer pull-right fa-2x font-thin">×</div></div></div></div></div><div class=row><div style="min-height: 280px" class="col-sm-3 no-padder-right m-t-sm b-r"><div ng-repeat="(type, facets) in $ctrl.ui.filtered" ng-if=$ctrl.ui.filtered[type].length ng-class="{&quot;bg-light&quot;: $ctrl.facet === type}" class=wrapper-xs><div ng-click="$ctrl.facet = type; $ctrl.searchText=&quot;&quot;" class="col v-middle"><a ng-model=$ctrl.facet ng-class="{&quot;text-primary font-bold&quot;: $ctrl.facet === type}" class=text-capitalize><span ng-if="type === &quot;states&quot;">Status</span></a></div></div></div><div class="col-sm-9 no-padder-left m-t-sm"><div ng-repeat="(type, facets) in $ctrl.ui.filtered" ng-if=$ctrl.ui.filtered[type].length><div ng-if="$ctrl.facet === type"><div class=w-full><div ng-if="type === &quot;states&quot; || type === &quot;vendors&quot;" class="b-b font-thin wrapper-sm"><label class="i-checks i-checks-sm block"><input type=checkbox ng-checked="$ctrl.ui.selected[type] === $ctrl.all[type].length" ng-model=$ctrl.ui.selectAll[type] ng-click="$ctrl.selectAll(type)"><i></i><div class=inline>Select all</div></label></div><div style="overflow-x: hidden" ng-if="type === &quot;states&quot; || type === &quot;vendors&quot; || type === &quot;locations&quot; || type === &quot;channels&quot;" class=w-full><div style="max-height: 240px;overflow-y:auto;width:100.2%" class="m-l-sm b-b"><ul class=nav><li ng-repeat="facet in facets | filter: $ctrl.searchText" class="wrapper-sm b-b"><label class="i-checks i-checks-sm m-b-none block"><input type=checkbox ng-checked=facet.checked ng-change="$ctrl.changed(facet.checked, type)" ng-model=facet.checked ng-value="1"><i></i><div ng-bind="$ctrl.RENAMED_STATES[facet.id] || facet.name" class=inline></div></label></li></ul></div></div></div></div></div></div></div><div class="text-center m-t-sm"><button ng-click=$ctrl.reset() class="btn padder-md m-r-md">Reset</button><button ng-click=$ctrl.apply() class="btn btn-blue padder-md">Apply</button></div></div>'),a.put("app/directives/package-filter/package-filter.html",'<div style="overflow-x:hidden; font-size:15px" class=wrapper-md><div class="hbox m-b-sm m-t-md"><div class=row><div class="col-sm-3 no-padder-right m-t-xs"><span>Filter by</span></div><div class="col-sm-9 no-padder-left"><div class="v-middle w-full"><div class="m-l-md bg-light padder rounded"><input placeholder=Search ng-model=$ctrl.searchText class="w-full no-border bg-light wrapper-xs input-md"></div></div><div style="right: 0;top: 0" class="padder pos-fix"><div ng-click="$ctrl.$uibModalInstance.dismiss(\'cancel\')" class="pointer pull-right fa-2x font-thin">×</div></div></div></div></div><div class=row><div style="min-height: 280px" class="col-sm-3 no-padder-right m-t-sm b-r"><div ng-repeat="(type, facets) in $ctrl.ui.filtered" ng-if=$ctrl.ui.filtered[type].length ng-class="{&quot;bg-light&quot;: $ctrl.facet === type}" class=wrapper-xs><div ng-click="$ctrl.facet = type; $ctrl.searchText=&quot;&quot;" class="col v-middle"><a ng-model=$ctrl.facet ng-class="{&quot;text-primary font-bold&quot;: $ctrl.facet === type}" class=text-capitalize><span ng-if="type === &quot;states&quot;">Status</span></a></div></div></div><div class="col-sm-9 no-padder-left m-t-sm"><div ng-repeat="(type, facets) in $ctrl.ui.filtered" ng-if=$ctrl.ui.filtered[type].length><div ng-if="$ctrl.facet === type"><div class=w-full><div ng-if="type === &quot;states&quot; || type === &quot;vendors&quot;" class="b-b font-thin wrapper-sm"><label class="i-checks i-checks-sm block"><input type=checkbox ng-checked="$ctrl.ui.selected[type] === $ctrl.all[type].length" ng-model=$ctrl.ui.selectAll[type] ng-click="$ctrl.selectAll(type)"><i></i><div class=inline>Select all</div></label></div><div style="overflow-x: hidden" ng-if="type === &quot;states&quot; || type === &quot;vendors&quot; || type === &quot;locations&quot; || type === &quot;channels&quot;" class=w-full><div style="max-height: 240px;overflow-y:auto;width:100.2%" class="m-l-sm b-b"><ul class=nav><li ng-repeat="facet in facets | filter: $ctrl.searchText" class="wrapper-sm b-b"><label class="i-checks i-checks-sm m-b-none block"><input type=checkbox ng-checked=facet.checked ng-change="$ctrl.changed(facet.checked, type)" ng-model=facet.checked ng-value="1"><i></i><div ng-bind="$ctrl.RENAMED_STATES[facet.id] || facet.name" class=inline></div></label></li></ul></div></div></div></div></div></div></div><div class="text-center m-t-sm"><button ng-click=$ctrl.reset() class="btn padder-md m-r-md">Reset</button><button ng-click=$ctrl.apply() class="btn btn-blue padder-md">Apply</button></div></div>'),
a.put("app/directives/reapply/reapply.html",'<div ng-init="flag=false" class=modal-header><div class=modal-title><div ng-show=flag class="h4 text-info">Are you sure ?<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div><div ng-hide=flag class="h4 text-info">Upload "{{$ctrl.applicant.name}}\'s" CV for another Position<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div></div></div><div class=modal-body><p style="text-align: center;padding: 14px" ng-if=$ctrl.error ng-bind=$ctrl.error class=alert-danger></p><form role=form name=ReApplyForm ng-submit=$ctrl.submit() class=form-horizontal><div ng-show=flag><h4><span class="font-bold col-md-4">Candidate Name</span>: {{$ctrl.applicant.name}}</h4><p></p><h4><span class="font-bold col-md-4">Client Name</span>: {{$ctrl.Clients.model}}</h4><p></p><h4><span class="font-bold col-md-4">Position</span>: {{$ctrl.Positions.model}}</h4><p></p><h4 ng-if=$ctrl.Positions.is_drive><span class="font-bold col-md-4">Interview Date</span>:&nbsp;<span ng-bind="$ctrl.data.scheduled_on.toISOString() | date:\'dd MMM yyyy\'"></span></h4><button ng-disabled=$ctrl.uploading class="m-l btn btn-primary pull-right">Submit</button><div ng-click="flag = false" class="btn btn-primary pull-right">Back</div></div><div ng-hide=flag><div class=form-group><label class="col-sm-2 control-label">Client Name</label><div class=col-sm-10><input required placeholder="Client Name" ng-model=$ctrl.Clients.model uib-typeahead="industry.name for industry in $ctrl.Clients.get($viewValue)" typeahead-loading=$ctrl.Clients.loadingClients typeahead-no-results=$ctrl.Clients.noResults typeahead-on-select=$ctrl.Clients.select($item) class="form-control"></div></div><div class=form-group><label class="col-sm-2 control-label">Position</label><div class=col-sm-10><input placeholder=Job typeahead-focus=typeahead-focus ng-model=$ctrl.Positions.model uib-typeahead="industry.name for industry in $ctrl.Positions.get($viewValue)" typeahead-loading=$ctrl.Positions.loadingClients typeahead-no-results=$ctrl.Positions.noResults typeahead-on-select=$ctrl.Positions.select($item,$model,$label,$event) required class="form-control"></div></div><div ng-if=$ctrl.Positions.is_drive class=form-group><label class="col-sm-2 control-label">Select Interview Date</label><div class=col-sm-10><div class=input-group><input uib-datepicker-popup=dd-MMMM-yyyy ng-model=$ctrl.scheduled_on_date ng-change=$ctrl.setScheduledOn() is-open=$ctrl.ui.scheduledOn close-text=Close datepicker-options=$ctrl.dateOptions ng-click="$ctrl.ui.scheduledOn = true" required ng-model-options="{debounce: 300}" class="form-control"></div></div></div><div ng-click="flag = true" ng-disabled=ReApplyForm.$invalid class="btn btn-primary pull-right">Continue</div></div></form><!----><div class=clearfix></div></div>'),a.put("app/directives/reauth/reauth.html",'<div class="modal-header bg-light dk"><div class=modal-title><div class="text-info-dker h4">Re-Login Required</div></div></div><div class="modal-body clear bg-white-only"><div class=pull-left><div class="wrapper-xs h4 text-black">You are no longer logged in. Please Re-authenticate.</div></div><div class=pull-right><a ng-href={{ReAuth.href}} class="btn btn-success btn-md">Log In</a></div></div>'),a.put("app/directives/shipment-filter/shipment-filter.html",'<div style="overflow-x:hidden; font-size:15px" class=wrapper-md><div class="hbox m-b-sm m-t-md"><div class=row><div class="col-sm-3 no-padder-right m-t-xs"><span>Filter by</span></div><div class="col-sm-9 no-padder-left"><div class="v-middle w-full"><div class="m-l-md bg-light padder rounded"><input placeholder=Search ng-model=$ctrl.searchText class="w-full no-border bg-light wrapper-xs input-md"></div></div><div style="right: 0;top: 0" class="padder pos-fix"><div ng-click="$ctrl.$uibModalInstance.dismiss(\'cancel\')" class="pointer pull-right fa-2x font-thin">×</div></div></div></div></div><div class=row><div style="min-height: 280px" class="col-sm-3 no-padder-right m-t-sm b-r"><div ng-repeat="(type, facets) in $ctrl.ui.filtered" ng-if=$ctrl.ui.filtered[type].length ng-class="{&quot;bg-light&quot;: $ctrl.facet === type}" class=wrapper-xs><div ng-click="$ctrl.facet = type; $ctrl.searchText=&quot;&quot;" class="col v-middle"><a ng-model=$ctrl.facet ng-class="{&quot;text-primary font-bold&quot;: $ctrl.facet === type}" class=text-capitalize><span ng-if="type === &quot;states&quot;">Status</span></a></div></div></div><div class="col-sm-9 no-padder-left m-t-sm"><div ng-repeat="(type, facets) in $ctrl.ui.filtered" ng-if=$ctrl.ui.filtered[type].length><div ng-if="$ctrl.facet === type"><div class=w-full><div ng-if="type === &quot;states&quot; || type === &quot;vendors&quot;" class="b-b font-thin wrapper-sm"><label class="i-checks i-checks-sm block"><input type=checkbox ng-checked="$ctrl.ui.selected[type] === $ctrl.all[type].length" ng-model=$ctrl.ui.selectAll[type] ng-click="$ctrl.selectAll(type)"><i></i><div class=inline>Select all</div></label></div><div style="overflow-x: hidden" ng-if="type === &quot;states&quot; || type === &quot;vendors&quot; || type === &quot;locations&quot; || type === &quot;channels&quot;" class=w-full><div style="max-height: 240px;overflow-y:auto;width:100.2%" class="m-l-sm b-b"><ul class=nav><li ng-repeat="facet in facets | filter: $ctrl.searchText" class="wrapper-sm b-b"><label class="i-checks i-checks-sm m-b-none block"><input type=checkbox ng-checked=facet.checked ng-change="$ctrl.changed(facet.checked, type)" ng-model=facet.checked ng-value="1"><i></i><div ng-bind="$ctrl.RENAMED_STATES[facet.id] || facet.name" class=inline></div></label></li></ul></div></div></div></div></div></div></div><div class="text-center m-t-sm"><button ng-click=$ctrl.reset() class="btn padder-md m-r-md">Reset</button><button ng-click=$ctrl.apply() class="btn btn-blue padder-md">Apply</button></div></div>'),a.put("app/directives/social-share/social-share.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Share Job<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;cancel&quot;) class="close text-dark">×</div></div></div></div><div class=modal-body><label class="w-full input-group"><div class="col-xs-12 no-padder"><div class=input-group><input ng-model=::$ctrl.jobLink class="col-sm-12 jobLink form-control"><a ngclipboard=ngclipboard data-clipboard-target=.jobLink class="btn btn-xs bg-success text-white input-group-addon">Copy Link</a></div></div><div class="col-xs-12 no-padder m-t-xs"><a ng-href={{$ctrl.links.linkedIn}} style="background: #0077b5;width: 38px" target=_blank title="Share on Linked In" class="btn btn-sm pull-right m-l-xs"><i class="fa fa-linkedin text-white"></i></a><a ng-href={{$ctrl.links.twitter}} style="background: #1da1f2;width: 38px" target=_blank title="Share on Twitter" class="btn btn-sm pull-right m-l-xs"><i class="fa fa-twitter fa-lg text-white"></i></a><a ng-href={{$ctrl.links.facebook}} style="background: #3b5998;width: 38px" target=_blank title="Share on Facebook" class="btn btn-sm pull-right m-l-xs"><i class="fa fa-facebook fa-lg text-white"></i></a><a ng-href={{$ctrl.links.google}} style="background: #d34836;width: 38px" target=_blank title="Share on Google Plus" class="btn btn-sm pull-right m-l-xs"><i class="fa fa-google-plus fa-lg text-white"></i></a></div><div class="col-xs-12 no-padder m-t-lg"><b>Note:</b><span>&nbsp;You can share this URL with your candidates on your email / social profiles to receive more applications. The CV\'s received through this unique URL will be displayed in the CVs Received tab of this JD</span></div></label></div><div class=modal-footer><a ng-click=$ctrl.$uibModalInstance.dismiss(&quot;cancel&quot;) class="btn btn-danger">Close</a></div>'),a.put("app/directives/upload-excel/upload-excel.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">Upload Excel<div ng-click=$ctrl.$uibModalInstance.dismiss() class=close>×</div></div></div></div><form name=form ng-submit=$ctrl.upload() class=form-validation><div class=modal-body><label class="input-group m-b"><strong>Upload your candidates complete information in the Excel template provided below</strong><a href=https://cdn.quezx.com/docs/Bulk_Upload_Template.xlsx target=_blank class="b-a font-bold b-success text-success wrapper-xs inline m-t-xs"><span class=text-success>Download Excel Template</span></a></label><label class="input-group m-b"><strong>Select Interview Date</strong><div class=input-group><input uib-datepicker-popup=dd-MMMM-yyyy ng-model=$ctrl.exData.scheduled_on_date ng-change=$ctrl.setScheduledOn() is-open=$ctrl.ui.scheduledOn close-text=Close ng-click="$ctrl.ui.scheduledOn = true" required ng-model-options="{debounce: 300}" class="form form-control m-t-xs"></div></label><div style="background: #FFD8A9" class="alert alert-warning text-black">Note - Select one interview date and upload excel with candidates to be scheduled for that date. Repeat process for multiple dates.</div><label for=file><strong>Upload Excel</strong></label><span ng-if=$ctrl.error ng-bind=$ctrl.error class="text-danger m-r-sm wrapper-xs"></span><div ng-class="$ctrl.file.$touched &amp;&amp; $ctrl.file.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="($ctrl.file.$touched &amp;&amp; $ctrl.file.$valid) || $ctrl.data.file"><span ng-bind=$ctrl.data.file.filename class=text-muted></span></span><p ng-hide="($ctrl.file.$touched &amp;&amp; $ctrl.file.$valid) || $ctrl.data.file" class=no-margin><span class=text-bold>Choose a file</span> or Drag it here.</p><span ng-hide="($ctrl.file.$touched &amp;&amp; $ctrl.file.$valid) || $ctrl.data.file" class=file-support>Supported Formats: xls,xlsx</span><input type=file id=file accept=.xls,.xlsx ng-model=$ctrl.data.file name=file required base-sixty-four-input=base-sixty-four-input class="form-control"></div></div></div><div class="modal-footer wrapper-sm"><div ng-if=$ctrl.ui.url class="inline wrapper-xs pull-left text-danger"><span ng-bind=" $ctrl.ui.failed + &quot;/&quot; + $ctrl.ui.total"></span><span>&nbsp;records failed,&nbsp;</span><a ng-href={{$ctrl.ui.url}} target=_blank class="text-primary text-u-l">Click Here</a><span>&nbsp;to download the error report.</span></div><button type=submit ng-disabled="form.$invalid || $ctrl.uploading" class="btn btn-primary"><span ng-if=!$ctrl.uploading class=text-white>Upload</span><span ng-if=$ctrl.uploading><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Uploading...</span></span></button></div></form>'),a.put("app/directives/viewPhoto/viewPhoto.html",'<div class=modal-header><div class=modal-title><div class="h4 text-info">View Photos<div ng-click=$ctrl.$uibModalInstance.dismiss(&quot;close&quot;) class=close>×</div></div></div></div><div class="m-t-xl no-margin"><center class=hbox><img ng-src={{$ctrl.photoUrl}} height=500 width="500"></center></div>'),a.put("app/routes/access/404/404.html",'<div ng-init="App.app.settings.container = false;" class="container w-xxl w-auto-xs"><div class="text-center m-b-lg"><!--h1.text-shadow.text-white 404--><!--.h4.text-muted the page that you are looking for does not exist.--><div ng-cropperjs=ng-cropperjs></div></div><div class="list-group bg-info auto m-b-sm m-b-lg"><a ui-sref=packages.index class=list-group-item><i class="fa fa-chevron-right text-muted"></i><i class="fa fa-fw fa-mail-forward m-r-xs"></i>Goto application</a></div><!--.text-center(ng-include="\'html/blocks/footer.html\'")--></div>'),a.put("app/routes/access/access.html",'<div ng-init="App.app.settings.extra=true">Not used. access.js using inline template</div>'),a.put("app/routes/access/oauth/oauth.html",'<div ng-init="App.app.settings.container = false;" class="container w-xxl w-auto-xs"></div>'),a.put("app/routes/accounts/transactions/create/create.html",'<div style="position: fixed" class="hbox h-full"><div class="col bg-white-only b-r w-md"><ul class=nav><li class=wrapper-xs><a ui-sref="transactions.create({type: &quot;DR&quot;})">Payment</a></li><li class=wrapper-xs><a ui-sref="transactions.create({type: &quot;CR&quot;})">Credit</a></li></ul></div><div><div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class=m-t-lg></div><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3">{{$ctrl.EDIT ? \'Edit\' : \'Create\'}} Transaction</div></div><div class=back-button-shipment><ul class="nav nav-pills nav-sm pull-right"><li class="m-r-xs pull-right"><a ui-sref=packages.index popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span class="fa fa-backward"></span><span style="botom: 0">Go Back</span></a></li></ul></div><form name=transactionForm novalidate ng-submit=$ctrl.create(transactionForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Select From Ledger<select ng-model=$ctrl.data.from_ledger_id name=from_ledger_id ng-options="ledger.id as ledger.name for ledger in $ctrl.ledgers" class="form form-control"></select></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Select To Ledger<select ng-model=$ctrl.data.to_ledger_id name=to_ledger_id ng-options="ledger.id as ledger.name for ledger in $ctrl.ledgers" class="form form-control"></select><span ng-show="transactionForm.to_ledger_id.$dirty &amp;&amp; transactionForm.to_ledger_id.$invalid" class="wrapper-xs text-xs text-danger">Please Select To Account</span></label></div></div></div></div></div><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Amount<span class=text-danger>*</span><input name=amount placeholder="eg. 0000.00" ng-model=$ctrl.data.amount required class="form form-control"><span ng-show="transactionForm.amount.$dirty &amp;&amp; transactionForm.amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Amount</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Settlement Comment<input name=settlement_comments placeholder="" ng-model=$ctrl.data.settlement_comments class="form form-control text-uppercase"><span ng-show="transactionForm.settlement_comments.$dirty &amp;&amp; transactionForm.settlement_comments.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Comment</span></label></div></div></div></div></div><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-12 col-sm-12 col-xs-12 no-padder"><label class="col-xs-12 input-group">Description<input name=description placeholder="eg. abc/xyz" ng-model=$ctrl.data.description required class="form form-control"><span ng-show="transactionForm.description.$dirty &amp;&amp; transactionForm.description.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Description</span></label></div></div></div></div></div><div class=clearfix></div><div class="row wrapper-md"><div class="col-md-5 col-sm-5 col-xs-5"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled=$ctrl.submitting class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>{{$ctrl.EDIT ? \'Update \' : \' Create \' }} Transaction</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></div></form></div></div></div></div></div>'),a.put("app/routes/barcodes/create/create.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class="wrapper-md bg-white-only"><div class=row><div class="col-md-3 col-sm-4"><label>Number of Barcodes</label><span class=text-danger>*</span><input name=number_of_barcodes placeholder="eg. 1 or 2" ng-model=$ctrl.data.number_of_barcodes required class="form form-control"></div><div ng-if=$ctrl.fromBarcode class="col-md-6 col-sm-4"><span>From Number: &nbsp;</span><span ng-bind=$ctrl.fromBarcode></span><span class="m-l-md m-l-md">To Number: &nbsp;</span><span ng-bind=$ctrl.toBarcode></span></div></div><div class="row m-t"><div class="col-md-5 col-sm-5 col-xs-5"><button ng-click=$ctrl.CheckPrint() class="btn btn-success right-margin-20"><span class=text-white>Check Print</span></button><button type=submit ng-if=$ctrl.enablePrint ng-disabled=$ctrl.barcodeSubmit ng-click=$ctrl.createBarcode() class="btn btn-success"><span ng-if=!$ctrl.barcodeSubmit class=text-white>Generate Barcodes & Print</span><span ng-if=$ctrl.barcodeSubmit class=text-white>Printing......</span></button></div></div></div></div></div><div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class="wrapper-md bg-white-only"><div class=row><div class="col-md-5 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Courier From<span class=text-danger>*</span><input name=delivery_company_id ng-model=$ctrl.DeliveryCompanies.model placeholder="eg: Flipkart" uib-typeahead="deliveryCompanies.name for deliveryCompanies in $ctrl.DeliveryCompanies.get($viewValue)" typeahead-loading=$ctrl.DeliveryCompanies.loadingDeliveryCompanies typeahead-no-results=$ctrl.DeliveryCompanies.noResults typeahead-on-select=$ctrl.DeliveryCompanies.select($item) ng-blur=$ctrl.DeliveryCompanies.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><i ng-show=$ctrl.DeliveryCompanies.loadingDeliveryCompanies class="fa fa-refresh fa-spin m-l-xs"></i><div ng-show=$ctrl.DeliveryCompanies.noResults><i class="fa fa-remove"></i> No Results Found</div></label></div><form name=newPackageForm novalidate ng-submit=$ctrl.concatBarcode() autocomplete=off class="form form-validation form-horizontal"><div class="col-md-4 col-sm-4 col-xs-12"><label class="col-xs-12 input-group">Scan Barcodes<span class=text-danger>*</span><input name=barcodes placeholder="eg. 1 or 2" ng-model=$ctrl.data.barcodes ng-blur="$ctrl.quickMode ? $ctrl.concatBarcodeOnblur(): &quot;&quot;" required class="form form-control"></label></div></form></div><div class="row m-t"><div class=col-md-12><span ng-bind=$ctrl.invalidCodes ng-if=$ctrl.invalidCodes class=text-danger></span><span ng-bind=$ctrl.duplicateCodes ng-if=$ctrl.duplicateCodes class=text-danger></span></div><div class="col-md-5 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Delivery Person Name<span class=text-danger>*</span><input name=delivery_person_name placeholder="eg. Cristiano" ng-model=$ctrl.data.person_name required class="form form-control"></label></div><div class="col-md-4 col-sm-4 col-xs-12"><label class="col-xs-12 input-group">Delivery Person Contact Number<span class=text-danger>*</span><input type=number name=delivery_person_contact_number placeholder="eg. 9734XXXXXX" ng-model=$ctrl.data.person_contact required class="form form-control"></label></div><div class="col-md-5 col-sm-5 col-xs-5"><button type=submit ng-click=$ctrl.createPackage() ng-disabled=$ctrl.submitPackage class="btn btn-success"><span ng-if=!$ctrl.submitPackage class=text-white>Create Package & Print</span><span ng-if=$ctrl.submitPackage class=text-white>Creating..</span></button></div></div></div></div></div><div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class="wrapper-md bg-white-only"><div class=row><div class="col-md-4 col-sm-4"><label>Scan Barcode</label><span class=text-danger>*</span><input name=barcode_number placeholder="eg. 1 or 2" ng-model=$ctrl.data.barcode_number required class="form form-control"></div></div><div class="row m-t"><div class="col-md-5 col-sm-5 col-xs-5"><button type=submit ng-click=$ctrl.viewPkg() class="btn btn-success"><span class=text-white>Detail View Package</span></button></div></div></div></div></div>'),a.put("app/routes/barcodes/grnVerification/grnVerification.html",'<div class="hbox m-t"><div style="min-height: 500px" class="bg-white-only b-b container"><div class="row m-l m-t"><h4>Delivery Company Name: &nbsp;&nbsp;<span>{{$ctrl.grnDetails.DeliveryCompany.name}}</span></h4><h4>Grn Timestamp: &nbsp;&nbsp;<span>{{$ctrl.grnDetails.created_at | date:\'MMM d, y\'}} IST {{$ctrl.grnDetails.created_at | date:\'h:mm a\'}}</span></h4></div><div class="row m-l-lg m-r-lg m-t"><table style="border-color: black; width: 50%"><thead><tr><th style="border-color: black" class="text-md text-center table-bordered">PackageId</th><th style="border-color: black" class="text-md text-center table-bordered">Timestamp</th></tr></thead><tbody><tr ng-repeat="pkg in $ctrl.grnDetails.Packages"><td style="border-color: black" class="text-md text-center table-bordered">{{ pkg.id }}</td><td style="border-color: black" class="text-md text-center table-bordered">{{pkg.created_at | date:\'MMM d, y\'}} IST {{pkg.created_at | date:\'h:mm a\'}}</td></tr></tbody></table></div><div class="row m-l m-t"><h4>Signature:</h4><h4>Mobile Number:</h4></div></div></div>'),a.put("app/routes/campaigns/create/create.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class=m-t-lg></div><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3">{{$ctrl.EDIT ? \'Edit\' : \'Create\'}} Campaign</div></div><div class=back-button-shipment><ul class="nav nav-pills nav-sm pull-right"><li class="m-r-xs pull-right"><a ui-sref="campaigns.index({ id: $ctrl.data.id })" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span class="fa fa-backward"></span><span style="botom: 0">Go Back</span></a></li></ul></div><form name=newCampaignForm novalidate ng-submit=$ctrl.create(newCampaignForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Name<span class=text-danger>*</span><input name=name placeholder="eg. Diwali" ng-model=$ctrl.data.name required class="form form-control"><span ng-show="newCampaignForm.name.$dirty &amp;&amp; newCampaignForm.name.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Campaign Name</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Maximum Discount Amount<span class=text-danger>*</span><input type=number name=maximum_discount_amount placeholder="eg. 200" ng-model=$ctrl.data.maximum_discount_amount required class="form form-control"><span ng-show="newCampaignForm.maximum_discount_amount.$dirty &amp;&amp; newCampaignForm.maximum_discount_amount.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Maximum discount Amount</span></label></div></div></div></div></div><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Discount Code<input name=discount_code placeholder="eg. FRST50" ng-model=$ctrl.data.discount_code class="form form-control text-uppercase"></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Cashback Code<input name=cashback_code placeholder="eg. CRST40" ng-model=$ctrl.data.cashback_code class="form form-control text-uppercase"></label></div></div></div></div></div><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Discount Percentage<input type=number name=discount_percentage placeholder="eg. 50" ng-model=$ctrl.data.discount_percentage class="form form-control"></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Cashback Percentage<input type=number name=cashback_percentage placeholder="eg. 40" ng-model=$ctrl.data.cashback_percentage class="form form-control"></label></div></div></div></div></div><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Start Date<span class=text-danger>*</span><input type=date name=start_date ng-model=$ctrl.data.start_date required class="form form-control"><span ng-show="newCampaignForm.start_date.$dirty &amp;&amp; newCampaignForm.start_date.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Campaign Start date</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Expiry Date<span class=text-danger>*</span><input type=date name=expiry_date data-date="" data-date-format="DD MM YYYY" ng-model=$ctrl.data.expiry_date required class="form form-control"><span ng-show="newCampaignForm.expiry_date.$dirty &amp;&amp; newCampaignForm.expiry_date.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Campaign Expiry date</span></label></div></div></div></div></div><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Select Campaign Type<select ng-model=$ctrl.data.type name=type ng-options="type.value as type.type for type in $ctrl.types" class="form form-control"></select></label></div></div></div></div></div><div class="col-md-10 col-sm-10 col-xs-10"><div class="col-md-5 col-sm-5 col-xs-5"><div class=hbox><label class=col>Photo<span class=text-danger>*</span><div ng-class="newCampaignForm.file.$touched &amp;&amp; newCampaignForm.file.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="(newCampaignForm.file.$touched &amp;&amp; newCampaignForm.file.$valid) || $ctrl.data.file"><span ng-bind=$ctrl.file.name class=text-muted></span></span><p ng-hide="(newCampaignForm.file.$touched &amp;&amp; newCampaignForm.file.$valid) || $ctrl.data.file" class=no-margin><span class=text-bold>Choose a file</span> or Drag it here.</p><span ng-hide="(newCampaignForm.file.$touched &amp;&amp; newCampaignForm.file.$valid) || $ctrl.data.file" class=file-support>Supported Formats: .png, .jpeg, .jpg, .bmp, .pdf\'</span><input accept=image/* type=file ng-model=$ctrl.file name=file ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.uploadingPhotos=true;" onclick="this.value = null" ng-image-compress=ng-image-compress image=myAwesomeImage ctrl=$ctrl upload-fn=$ctrl.startUpload resize-max-height=1000 resize-max-width=1000 resize-quality=0.7 resize-type=image/jpg required class="form-control"></div></div><span ng-show="$ctrl.clickUpload &amp;&amp; !$ctrl.data.object" class="wrapper-xs text-xs text-danger">Please choose file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newCampaignForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newCampaignForm.file.$dirty &amp;&amp; newCampaignForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span></label></div></div><div class="col-md-3 col-sm-3 col-xs-3 wrapper-sm m-t-xs"><img ng-if=$ctrl.data.object ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.data.object}}" style="height: 85px;width: 80px" class="pull-left m-r"></div></div><div class=clearfix></div><div class="row wrapper-md"><div class="col-md-5 col-sm-5 col-xs-5"><h4 ng-bind=$ctrl.error.message style=color:red></h4><h4 ng-bind=$ctrl.message style=color:red></h4><button type=submit ng-disabled="$ctrl.submitting || (!$ctrl.submitting &amp;&amp; !newCampaignForm.$dirty)" class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>{{$ctrl.EDIT ? \'Update \' : \' Create \' }} Campaign</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></div></form></div></div></div>'),a.put("app/routes/campaigns/index/index.html",'<div><div class=hbox><div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="campaigns.index({ bucket: bucket })" ng-bind=bucket ng-hide="bucket == \'Bookmarked\' &amp;&amp; App.app.settings.isAdmin"></a></li><li class="m-r-xs pull-right"><a ui-sref=campaigns.create() popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span>Create campaign</span></a></li></ul></div></div><div style="padding-bottom: 4px" class=m-t-xl></div><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr class=m-l-xs-md><th class="col-md-1 col-xs-1">ID</th><th class="col-md-1 col-xs-1">Name</th><th class="col-md-2 col-xs-2">Start Date</th><th class="col-md-2 col-xs-2">Expiry Date</th><th class="col-md-2 col-xs-1">Campaign Code</th><th class="col-md-2 col-xs-1">Discount/Cashback</th><th class="col-md-2 col-xs-1">Maximum Discount</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.campaigns.length === 0" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Campaigns Created</h1></td></div><div ng-repeat="campaign in $ctrl.campaigns" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-md-1 col-xs-1 wrapper-sm text-ellipsis m-t-xs"><a ui-sref="campaigns.create({ id: campaign.id })">{{campaign.id}}</a></div><div class="col-md-1 col-xs-1 wrapper-sm m-t-xs"><a ui-sref="campaigns.create({ id: campaign.id })">{{campaign.name}}</a></div><div ng-bind=campaign.start_date class="col-md-2 col-xs-2 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind=campaign.expiry_date class="col-md-2 col-xs-2 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind="campaign.discount_code ? campaign.discount_code : campaign.cashback_code" class="col-md-2 col-xs-2 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind="campaign.discount_code ? \'Discount\' : \'Cashback\'" class="col-md-2 col-xs-1 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind=campaign.maximum_discount_amount class="col-md-2 col-xs-1 wrapper-sm text-ellipsis m-t-xs"></div><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadPackages() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div></div>'),a.put("app/routes/customers/customer-header/customer-header.html",'<div title="{{$ctrl.customer.name}} - {{$ctrl.customer.email}}" style=max-width:255px class="pull-left wrapper-sm no-padder-top truncate"><a ui-sref="customer.view({ id: $ctrl.customer.id })"><span ng-bind=$ctrl.customer.name class="h4 text-info"></span></a></div><div class="pull-left wrapper-sm"><span class="b-1x b-r b-l b-ligth-dker"></span></div><div title="Locker: {{$ctrl.customer.Locker}}" ng-if=$ctrl.customer.Locker class="pull-left wrapper-sm no-padder-top ng-binding"><i class="fa fa-md fa-suitcase text-light-dker"></i><span ng-bind=$ctrl.customer.Locker.short_name class=m-l-xs></span></div><div title="Country: {{$ctrl.customer.Country.name}}" class="pull-left wrapper-sm no-padder-top ng-binding"><span ng-class="&quot;flag-icon-&quot;+ $ctrl.customer.Country.iso2.toLowerCase()" class="flag-icon m-l-xs"></span><span ng-bind=$ctrl.customer.Country.name class=m-l-xs></span></div><div title="Virtual Address Code" class="pull-left wrapper-sm no-padder-top ng-binding"><i class="fa fa-lg fa-dropbox text-light-dker"></i><span ng-bind=$ctrl.customer.virtual_address_code class=m-l-xs></span></div><div title=Email class="pull-left wrapper-sm no-padder-top"><i class="fa fa-md fa-at text-light-dker"></i><span>&nbsp;&nbsp;</span><a ng-href=mailto:{{$ctrl.customer.email}}><span ng-bind=$ctrl.customer.email class=m-l-xs></span></a></div><div title=Mobile/Phone ng-if=$ctrl.customer.phone class="pull-left wrapper-sm no-padder-top"><i class="fa fa-phone"></i><a ng-href=tel:{{$ctrl.customer.phone}}><span ng-bind=$ctrl.customer.phone class=m-l-xs></span></a></div><div class="pull-left wrapper-sm no-padder-top"><span><a ng-click=$ctrl.LoginAs.init($ctrl.customer.email);>Login</a></span></div><uib-progressbar ng-init="max=20;elapsed=$ctrl.moment().diff($ctrl.moment($ctrl.customer.Locker.allocated_at), &quot;days&quot;)" ng-if=$ctrl.customer.Locker max=max type="{{elapsed &lt; max ? &quot;success&quot; : &quot;danger&quot;}}" value=elapsed style="position: fixed; height: 5px; z-index: 100" uib-tooltip="Storage Limit - {{elapsed}} Days" tooltip-placement=bottom tooltip-append-to-body=true class="w-full bg-light dker progress-striped active m-t-xl"></uib-progressbar>'),
a.put("app/routes/customers/list/list.html",'<div style="position: fixed" class="hbox h-full"><div class="col bg-white-only b-r w-md"><ul style="overflow-y: scroll;height: 88%;overflow-x: hidden;width: 251px" class=nav><li class=wrapper-xs><input ng-model=$ctrl.params.q placeholder="Search User" ng-change=$ctrl.getCustomers(true) ng-model-options="{ debounce: 600 }" class="w form-control rounded m-l-xs text-no-glow"></li><li class=wrapper-xs><input ng-model=$ctrl.params.email placeholder="Search by Email" ng-change=$ctrl.getCustomers(true) ng-model-options="{ debounce: 600 }" class="w form-control rounded m-l-xs text-no-glow"></li></ul></div><div class="col bg-light h-full"><div style="z-index: 100;padding-right: 32px !important" class="padder m-t-sm"><div style="height: 36px" class=bg-white-only><ul class="nav nav-pills nav-sm"><li class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm bg-white-only b-gray">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></li><li ng-repeat="group in $ctrl.GROUPS" ui-sref-active=active class=m-r-xs><a ui-sref="customers.list({ groupId: group.id })"><span ng-bind=group.name></span></a></li></ul></div></div><div style="overflow-y: scroll;height: 85%" class="col-md-12 col-sm-12 col-xs-12"><div ng-if="!$ctrl.list.length &amp;&amp; !$ctrl.ui.loading" class="col-md-12 b-a m-t-sm bg-white-only"><h1 class=text-center>No {{ $ctrl.$stateParams.groupId == 1 ? \'Admins\' : \'Customers\'}} Found</h1></div><div ng-if=$ctrl.list.length ng-repeat="customer in $ctrl.list | orderBy:$ctrl.order |  filter:query track by $index" class="col-md-12 col-sm-12 col-xs-12 b-a m-t-sm customer-item bg-white-only"><div class="col-md-12 col-sm-12 col-xs-12 b-b no-padder"><img ng-if=customer.profile_photo_url ng-src={{customer.profile_photo_url}} style="height: 30px;width: 30px;border-radius: 50%;position: absolute; left:-30px;bottom:3px" class="pull-left"><a ng-bind=customer.name ui-sref="customer.view({id: customer.id})" target=_blank class="m-b-xs m-t-xs pull-left wrapper-xs font-bold text-info"></a><span><a ng-click=$ctrl.LoginAs.init(customer.email);>Login</a></span><span class="m-b-xs m-t-xs pull-right wrapper-xs m-r-sm text-sm"><span ng-if=customer.Shipments.length ui-sref="customer.shipments.index({ id: customer.id })" class="pointer padder">&nbsp;SHIPMENTS</span><span ng-if=customer.Packages.length ui-sref="customer.packages.index({ id: customer.id })" class="pointer padder b-l">&nbsp;PACKAGES</span></span></div><div style="font-size: 10px" class="col-sm-12 m-t-sm text-gray no-padder"><div class="no-padder col-sm-1 col-xs-3 text-ellipsis"></div><div class="no-padder col-sm-3 col-xs-2">Email</div><div class="no-padder col-sm-2 col-xs-2">Locker Code</div><div class="no-padder col-sm-2 col-xs-2">Phone/Mobile</div></div><div style="font-weight: 500" class="col-sm-12 m-b-sm no-padder"><div class="no-padder col-sm-1 col-xs-3 text-ellipsis"><span title={{customer.Country.name}} ng-class="&quot;flag-icon-&quot;+ customer.Country.iso2.toLowerCase()" class="flag-icon m-l-xs"></span></div><div class="no-padder col-sm-3 col-xs-2"><span ui-sref="customer.view({id: customer.id})" target=_blank ng-bind=customer.email></span></div><div class="no-padder col-sm-2 col-xs-2"><span ui-sref="customer.view({id: customer.id})" target=_blank title="Virtual Locker" ng-bind=customer.virtual_address_code></span><span style="background-color: #FF8017" ng-if=customer.Locker title="Original Locker" ng-bind=customer.Locker.short_name class=badge></span></div><div class="no-padder col-sm-2 col-xs-2"><span ui-sref="customer.view({id: customer.id})" target=_blank ng-bind=customer.mobile></span></div></div></div><div class="text-center m-t-xs"><button title="Loading ..." ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></button><button title="Load more" ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.getCustomers() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></button></div><div class="col-md-12 col-sm-12 col-xs-12 m-t-xxl"></div></div></div></div>'),a.put("app/routes/customers/orders/index/index.html",'<div><div class=hbox><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"><div style="min-height: 200px" class=bg-light><directive-header options=$ctrl page={customerPackages:true} buttons="{buckets:true,create:true,highlight:\'upload\'}" app=App></directive-header></div></customer-header><div style="padding-top: 2px"><div class="wrapper-md bg-white-only"><ul role=tablist style="padding-top: 28px" class="nav nav-tabs"><li ng-class="$ctrl.ps ? &quot;order-menu-active&quot; : &quot;&quot;"><a ng-class="$ctrl.ps ? &quot;order-menu-active&quot; : &quot;&quot;" ui-sref="customer.orders.index({ bucket: bucket, type: &quot;assisted_purchased&quot; })">Assisted Purchase</a></li><li ng-class="$ctrl.cod ? &quot;order-menu-active&quot; : &quot;&quot;"><a ng-class="$ctrl.cod ? &quot;order-menu-active&quot; : &quot;&quot;" ui-sref="customer.orders.index({ bucket: bucket, type: &quot;self_purchased&quot; })">Self Purchase</a></li></ul><div class=clearfix></div></div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="customer.orders.index({ bucket: bucket })" ng-bind=bucket ng-hide="bucket == \'Bookmarked\' &amp;&amp; App.app.settings.isAdmin"></a></li></ul></div><div style="position: fixed; right: 0;background: #fff; z-index: 3;width:30%" class="wrapper-xs bg-light"><div ng-if=$ctrl.orders.length class="pull-right col m-r-xs m-t-xs">{{$ctrl.orders.length}} of {{$ctrl.total}} Orders(s)</div><div ng-click=$ctrl.ExcelDownload.download($ctrl.params) class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default hide"><span class="fa fa-file-excel-o"></span></button></div><div ng-click=$ctrl.openOrderFilter() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-filter"></span></button></div><div class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm btn-default">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></div></div></div><div style="padding-bottom: 4px" class=m-t-xl></div><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr><th class=col-xs-1>ID</th><th class=col-xs-2>Store</th><th class=col-xs-2>OrderCode</th><th class=col-xs-2>Created</th><th class=col-xs-2>Updated</th><th class=col-xs-3>Status</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.orders.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Orders</h1></td></div><div ng-repeat="order in $ctrl.orders" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><a ui-sref="order.show({ id: order.order_code, profilePhotoUrl: order.Customer.profile_photo_url })" target=_blank>{{order.id}}</a></div><div class="col-xs-2 wrapper-sm m-t-xs"><a ui-sref="order.show({ id: order.order_code, profilePhotoUrl: order.Customer.profile_photo_url })" target=_blank>{{order.Store.name}}</a></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs">{{order.order_code}}</div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><span>{{order.created_at | date:\'MMM d, y\'}} IST {{order.created_at | date:\'h:mm a\'}}</span></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><span>{{order.updated_at | date:\'MMM d, y\'}} IST {{order.updated_at | date:\'h:mm a\'}}</span></div><div ng-class="{&quot;col-xs-3&quot;: !$ctrl.isAdmin}" class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=w-full><button uib-dropdown-toggle="" style="text-align:left;padding: 2px 8px;width:auto" ng-disabled="App.orderStates[order.state_id].Actions.length===0 || (order.state_id === 43 &amp;&amp; !!$ctrl.prescreen)" title={{order.state_name}} class="text-ellipsis btn bg-white-only b-{{App.orderStates[order.state_id].config.color || &quot;gray&quot;}} text-{{App.orderStates[order.state_id].config.color || &quot;gray&quot;}}"><span ng-bind=App.orderStates[order.state_id].action class=m-r-xs></span><span ng-if="App.orderStates[order.state_id].Actions.length &gt; 0" class=caret></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.orderStates[order.state_id].Actions" ng-if=App.orderStates[state.state_id].action><a href="" ng-click="$ctrl.ChangeOrderState.open(order, (order._root_.is_drive &amp;&amp; order.state_id === 44) ? 12 : state.state_id, order._root_.id)" ng-bind=::App.orderStates[state.state_id].action></a></li></ul></div></div><div ng-if=$ctrl.isAdmin class="col-xs-1 wrapper-sm m-t-xs"><div class=w-full><span style="border: 1px solid #aaa" ng-bind=order.owner_name title={{order.owner_name_full}} class="b-a m-r-xs pointer pull-left text-xs text-center btn-circle m-b-xs m-l-sm"></span></div></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadOrders() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div></div>'),a.put("app/routes/customers/packages/bulk/bulk.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><form name=newPackageForm novalidate ng-submit=$ctrl.create(newPackageForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=col-md-7><div class=row><div class=col-md-12><label class="col-xs-12 input-group"><div>Popular Stores :</div><div ng-repeat="store in $ctrl.popularStores" ng-click="$ctrl.data.store_id = store.id; $ctrl.Store.model = store.name;$ctrl.focus(&quot;invoice_code&quot;);" class="pull-left text-info-dker b-a b-info m-t-xs m-r-xs pointer"><span ng-bind=store.name class=wrapper-xs></span></div></label></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=text-danger>Note: Sign to delivery boy after successful creation.</div><div class=row><div class=col-md-12><div class="col-md-5 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Store<span class=text-danger>*</span><input name=store_id ng-model=$ctrl.Store.model placeholder="eg: Flipkart" uib-typeahead="store.name for store in $ctrl.Store.get($viewValue)" typeahead-loading=$ctrl.Store.loadingStore typeahead-no-results=$ctrl.Store.noResults typeahead-on-select=$ctrl.Store.select($item) ng-blur=$ctrl.Store.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.store_id.$dirty &amp;&amp; newPackageForm.store_id.$invalid" class="wrapper-xs text-xs text-danger">Please select Store</span><i ng-show=$ctrl.Store.loadingStore class="fa fa-refresh fa-spin m-l-xs"></i><div ng-show=$ctrl.Store.noResults><i class="fa fa-remove"></i> No Results Found</div></label></div></div></div><div class=row><div class=col-md-12><div class="col-md-5 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Reference Code<span class=text-danger>*</span><input name=invoice_code placeholder="eg. 404-5608143-1808328" ng-model=$ctrl.data.invoice_code ng-blur="$ctrl.quickMode ? $ctrl.addNewPackage(newPackageForm): &quot;&quot;" required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.invoice_code.$dirty &amp;&amp; newPackageForm.invoice_code.$invalid" class="wrapper-xs text-xs text-danger">Please enter Reference Code</span></label></div></div></div></div></div></div></form><!--br--><!--br--><!--div--><!--  .h1.m-l-md.font-thin.h3--><!--    | List Of Packages--><!--  br--><!--  .row--><!--    .col-md-8.no-padder-right--><!--      table.table.m-b-none--><!--        thead--><!--          tr--><!--            th.col-xs-2 Id--><!--            th.col-xs-5 Reference Code--><!--            th.col-xs-5--><!--      .col-xs-12(ng-show=\'$ctrl.invoice.length === 0\')--><!--        td(colspan="5")--><!--          h1.text-center.text-muted No Packages--><!--          .text-center: ul.nav.nav-pills.nav-sm.center-pills--><!--      .col-xs-12(style=\'padding: 10px;\')--><!--        .col-xs-12.no-padder.bg-white.b-a.m-b-sm(ng-repeat=\'invo in $ctrl.invoice\' ng-if=\' $ctrl.invoice\')--><!--          .col-xs-2.wrapper-sm.text-ellipsis.m-t-xs(ng-bind="invo.id")--><!--          .col-xs-5.wrapper-sm.text-ellipsis.m-t-xs(ng-bind="invo.invoice_code")--><!--          .col-xs-5.wrapper-sm.text-ellipsis.m-t-xs--><!--            button.m-l.btn.btn-success--><!--              span.fa.fa-forward.m-r-sm--><!--              a.text-white(ui-sref=\'customer.package.update({ id: $ctrl.$stateParams.id, packageId: invo.id })\' target="_blank") Continue Updating--><div class=clearfix></div></div></div>'),a.put("app/routes/customers/packages/create/create.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"></customer-header><directive-header options=$ctrl buttons="{ buckets: false, view: $ctrl.pkg, viewPackages: true }" app=App></directive-header><div class=m-t-lg></div><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3">{{$ctrl.EDIT ? \'Edit\' : \'Create\'}} Package</div></div><form name=newPackageForm novalidate ng-submit=$ctrl.create(newPackageForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=col-md-7><div ng-if=!$ctrl.EDIT class=row><div class=col-md-12><ul class=nav><li><label class="i-checks i-checks-sm"><input type=checkbox ng-model=$ctrl.quickMode ng-change="$ctrl.changeMode()"><i></i><div class=hide></div>Quick Mode<div uib-popover="By selecting this Barcode Scanner will with automatically save" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div></div></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=col-md-7><!--.row(ng-if=\'!$ctrl.EDIT\').col-md-12\n  ul.nav\n    li: label.i-checks.i-checks-sm\n      input(\n      type="checkbox"\n      ng-model="$ctrl.internalBarcode"\n      ng-change="$ctrl.changeBarcodeMode()"\n      )\n      i\n      .hide\n      | Internal Barcode\n      .fa.fa-info-circle.m-l-xs(\n      uib-popover=\'Use internal barcode to scan\'\n      popover-trigger="\'mouseenter\'"\n      popover-placement=\'bottom\'\n      popover-append-to-body=\'true\'\n      )\n  label.col-xs-12.input-group\n    div Popular Stores :\n    .pull-left.text-info-dker.b-a.b-info.m-t-xs.m-r-xs.pointer(\n    ng-repeat=\'store in $ctrl.popularStores\'\n    ng-click=\'$ctrl.data.store_id = store.id; $ctrl.Store.model = store.name;$ctrl.focus("invoice_code");\'\n    )\n      span.wrapper-xs(ng-bind=\'store.name\')--><div style="margin: 5px 0" ng-if=!$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=!$ctrl.EDIT class=text-danger>Note: Sign to delivery boy after successful creation.</div><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Store<span class=text-danger>*</span><input name=store_id ng-model=$ctrl.Store.model placeholder="eg: Flipkart" uib-typeahead="store.name for store in $ctrl.Store.get($viewValue)" typeahead-loading=$ctrl.Store.loadingStore typeahead-no-results=$ctrl.Store.noResults typeahead-on-select=$ctrl.Store.select($item) ng-blur=$ctrl.Store.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.store_id.$dirty &amp;&amp; newPackageForm.store_id.$invalid" class="wrapper-xs text-xs text-danger">Please select Store</span><i ng-show=$ctrl.Store.loadingStore class="fa fa-refresh fa-spin m-l-xs"></i><div ng-show=$ctrl.Store.noResults><i class="fa fa-remove"></i> No Results Found</div></label></div></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Reference Code<span class=text-danger>*</span><input name=invoice_code placeholder="eg. 404-5608143-1808328" ng-model=$ctrl.data.invoice_code ng-blur="$ctrl.quickMode ? $ctrl.invoiceCode(): &quot;&quot;" required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.invoice_code.$dirty &amp;&amp; newPackageForm.invoice_code.$invalid" class="wrapper-xs text-xs text-danger">Please enter Reference Code</span><span ng-show="$ctrl.isDuplicatedInvoice " class="wrapper-xs text-xs text-danger pull-right">Duplicate code</span></label></div></div></div><div ng-if=$ctrl.internalBarcode class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Internal Barcode<span class=text-danger>*</span><input name=barcode_number placeholder="eg. SP0000001" ng-model=$ctrl.data.barcode_number required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.barcode_number.$dirty &amp;&amp; newPackageForm.invoice_code.$invalid" class="wrapper-xs text-xs text-danger">Please enter Reference Code</span><span ng-show="$ctrl.invalidBarcode " class="wrapper-xs text-xs text-danger pull-right">Invalid Barcode</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Price<span></span><input type=number name=price_amount placeholder="eg. 300" ng-model=$ctrl.data.price_amount class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.price_amount.$dirty &amp;&amp; newPackageForm.price_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Price</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Weight<span class=text-danger>*</span><input type=number name=weight placeholder="eg. 2" ng-model=$ctrl.data.weight required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.weight.$dirty &amp;&amp; newPackageForm.weight.$invalid" class="wrapper-xs text-xs text-danger">Please enter Weight</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-4 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Consignment Type</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=checkbox ng-model="$ctrl.data.is_doc"><i></i><div class=hide></div>Document<div uib-popover="Check if the package is Document" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div><div class="col-md-4 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Content Type</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.content_type value="1"><i></i><div class=hide></div>Normal<div uib-popover="Other than Special" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.content_type value="2"><i></i><div class=hide></div>Special<div uib-popover="Liquid, Cream, Home Food" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Restricted Item<span class=text-danger>*</span><div uib-popover="" popover-trigger="\'mouseenter\'" popover-placement=top popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.is_restricted_item.$dirty &amp;&amp; newPackageForm.is_restricted_item.$invalid" class="wrapper-xs text-xs text-danger">Please Select Option</span></label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_restricted_item name=is_restricted_item value=0 required><i></i><div class=hide></div>No</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_restricted_item name=is_restricted_item value=1 required><i></i><div class=hide></div>Yes</label></li></ul></div></div></div><div class=clearfix></div><div class=row></div><div class="col-md-12 no-padder"><!--.col-md-4.col-sm-5.col-xs-12label.col-xs-12.input-group\n  | Is Valentine Day Offer applicable\n  span.text-danger *\n  .fa.fa-info-circle.m-l-xs(\n  uib-popover=\'\'\n  popover-trigger="\'mouseenter\'"\n  popover-placement=\'top\'\n  popover-append-to-body=\'true\'\n  )\n.col-xs-12: ul.nav\n  li.inline: label.i-checks.i-checks-sm\n    input(\n    type="radio"\n    ng-model="$ctrl.data.is_independence_offer"\n    name=\'is_independence_offer\'\n    value=0\n    required\n    )\n    i\n    .hide\n    | No\n  li.inline.m-l: label.i-checks.i-checks-sm\n    input(\n    type="radio"\n    ng-model="$ctrl.data.is_independence_offer"\n    name=\'is_independence_offer\'\n    value=1\n    required\n    )\n    i\n    .hide\n    | Yes--><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Wrong Item</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_wrong_item name=is_wrong_item value="0"><i></i><div class=hide></div>No</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_wrong_item name=is_wrong_item value="1"><i></i><div class=hide></div>Yes</label></li></ul></div></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Medicine</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_medicine name=is_medicine value="0"><i></i><div class=hide></div>No</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_medicine name=is_medicine value="1"><i></i><div class=hide></div>Yes</label></li></ul></div></div></div></div><div class=row><div class=col-md-8><div ng-if=newPackageForm.file.$error.maxSize class="text-danger font-bold">Please select file less than 5MB</div></div><div class="col-md-12 col-xs-12"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled="$ctrl.submitting || (!$ctrl.submitting &amp;&amp; !newPackageForm.$dirty)" class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>{{$ctrl.EDIT ? \'\' : \'Quick \' }} Save</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button><button ng-if="!$ctrl.EDIT &amp;&amp; $ctrl.pkg.id" class="m-l btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ui-sref="customer.package.update({ id: $ctrl.$stateParams.id, packageId: $ctrl.pkg.id })" class=text-white>Continue Updating</span></button><a ng-if="!$ctrl.EDIT || !$ctrl.data.Store" ng-click=$ctrl.open() class="btn btn success">Create Store</a></div><div ng-if=!$ctrl.EDIT class="col-md-12 col-xs-12"><h4>Package Id - {{$ctrl.pkg.id}}</h4></div></div></div></div></div></form></div><div class=clearfix></div></div></div><!--div(ng-show=\'$ctrl.submitting\')--><!--  span(ng-include="\'app/routes/jobs/cv-uploading/cv-uploading.html\'")-->'),a.put("app/routes/customers/packages/index/index.html",'<div><div before-bottom=$ctrl.loadPackages() style=position:relative class=hbox><div style="position: fixed;right: 5px;z-index: 9;padding-top: 2px" class=m-t-xl><ul class="nav nav-pills nav-sm m-t-xs"><li class="m-r-xs pull-right"><a ng-if=$ctrl.packages.length>{{$ctrl.packages.length}} of {{$ctrl.total}} Packages(s)</a></li><li class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm bg-white-only b-gray">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></li></ul></div><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"></customer-header><div style="min-height: 200px" class=bg-light><directive-header options=$ctrl page={customerPackages:true} buttons="{buckets:true,create:true,highlight:\'upload\'}" app=App></directive-header><div style="height: 1px" class="m-t-xxl m-b-md"></div><div class=wrapper-md><storage-limit data=$ctrl.customer></storage-limit><div ng-if=!$ctrl.packages.length class=wrapper-md><div class=hbox><div class=col><h1 ng-if=!$ctrl.ui.loading class="m-t-lg text-center text-muted">No Packages</h1></div></div></div><div ng-repeat="package in $ctrl.packages" class="m-t-sm hbox"><div class="col bg-white b-a"><div class="col-xs-12 col-md-8 no-padder"><div class="tl-content m-none padder w-full w-auto-xs"><div class=m-b-sm><label class="sm m-b-none"><i></i><a ui-sref="package.show({ id: package.id})" target=_blank><strong class=text-primary-lt>PackageID - {{package.id}}</strong></a></label><div class="col-xs-4 text-ellipsis"><i></i><a ui-sref="package.show({ id: package.id})" target=_blank><strong class=text-primary-lt>{{package.Store.name}}</strong></a></div></div><div class="panel-body pull-in b-t wrapper-xs"><div class="col-xs-4 text-ellipsis"><i style="margin:0 2px" class="fa fa-cubes"></i>{{package.PackageItems.length || 0}}</div><div ng-show=package.invoice_code class="col-xs-4 text-ellipsis"><i class="fa fa-barcode"></i><span class=m-l-sm>{{package.invoice_code}}</span></div><div ng-show=package.price_amount class="col-xs-4 text-ellipsis"><i class="fa fa-inr"></i> Rs. {{package.price_amount}}</div><div ng-show=package.weight class="col-xs-4 text-ellipsis"><i class="fa fa-balance-scale"></i> {{package.weight}} KG</div><div ng-show=package.content_type class="col-xs-4 text-ellipsis"><i ng-class="package.content_type == \'1\' ? \'text-success\' : \'text-danger\'" class="fa fa-tint"></i><span ng-class="package.content_type == \'1\' ? \'text-success\' : \'text-danger\'">{{package.content_type === \'1\' ? \'Normal\' : \'Special\'}}</span></div><div class="col-xs-4 text-ellipsis"><i ng-class="package.is_doc ? \'fa-book\' : \'fa-archive\'" class=fa></i> {{package.is_doc ? \'Document\' : \'Non Document\'}}</div></div></div></div><div class="col-xs-12 col-md-2 no-padder"><div class="m-none wrapper-lg w-full w-auto-xs"><div class=clearfix><span ng-if="package.state_id !== $ctrl.packageStateId.ADDED_SHIPMENT" title="{{package.totalDays}} days" ng-class="package.totalDays &gt; 20 ? \'text-danger\' : \'text-success\'"><div class="pull-right padder m-t-xxs">{{package.created_at | date:\'MMM d, y\'}} IST {{package.created_at | date:\'h:mm a\'}}</div></span><span ng-if="package.state_id === $ctrl.packageStateId.ADDED_SHIPMENT" title="{{package.totalDays}} days" class=text-success><div class="pull-right padder m-t-xxs">{{package.created_at | date:\'MMM d, y\'}} IST {{package.created_at | date:\'h:mm a\'}}</div></span><span class="pull-right m-b m-t"></span></div></div></div><div class="col-xs-12 col-md-2 no-padder"><div class="m-none wrapper-lg w-full w-auto-xs"><div class=clearfix><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class="btn-group pull-right m-t-n-xs"><button uib-dropdown-toggle="" ng-disabled="!App.states[package.state_id].Actions.length || (package.state_id === 43 &amp;&amp; !!$ctrl.prescreen) " style="padding: 4px 8px" class="w-full btn b-{{App.states[package.state_id].config.color}} text-{{App.states[package.state_id].config.color}} bg-white-only"><span ng-bind=App.states[package.state_id].action></span><span ng-if=App.states[package.state_id].Actions.length&gt;0 class="caret m-l-xs"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class=dropdown-menu><li role=menuitem ng-repeat="state in App.states[package.state_id].Actions"><a href="" ng-click="$ctrl.ChangeState.open(package, state.state_id, $ctrl.$stateParams.id)" ng-bind=::App.states[state.state_id].action></a></li></ul><span ng-if=package.updated_at uib-tooltip="{{package.updated_at | date:\'MMM d, y\'}} IST {{package.updated_at | date:\'h:mm a\'}}" tooltip-placement=bottom-center tooltip-append-to-body=true class="pull-right no-padder"><i class="fa text-{{App.interviewUI[package.consignment_type].color}}-dker fa-{{App.interviewUI[package.interview_type].icon}}"></i><span ng-bind=$ctrl.moment(package.updated_at).fromNow()></span></span></div></div></div></div></div></div></div><div class="col-xs-2 col-xs-offset-5"><button ng-if=$ctrl.ui.loading class="pull-left btn active m-t-md"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></button><button ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadPackages() class="pull-left btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></button></div></div></div></div>'),a.put("app/routes/customers/shipments/create/create.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"></customer-header><directive-header options=$ctrl buttons="{ buckets: false, view: $ctrl.shipment, viewShipments: true }" app=App></directive-header><div class=m-t-lg></div><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3">{{$ctrl.EDIT ? \'Edit\' : \'Create\'}} Shipment &nbsp; &nbsp;<span ng-if="$ctrl.data.Customer.is_member &amp;&amp; $ctrl.Validitydate &gt;= $ctrl.todayDate" class="text-success font-bold">(Membership Plan - Active)</span><span ng-if="$ctrl.data.Customer.is_member &amp;&amp; $ctrl.Validitydate &lt; $ctrl.todayDate" class="text-danger font-bold">(Membership Plan - Expired)</span></div></div><br><div class="h1 m-l-md font-thin h3"><div ng-if=$ctrl.bestPrice class="text-orange font-bold">Best Price for 5.5Kg - {{$ctrl.final_cost}}</div><div ng-if=$ctrl.bestPrice class="text-orange font-bold">Price for {{$ctrl.data.final_weight}}Kg - {{$ctrl.data.final_cost}}</div></div><div class=back-button-shipment><ul style="margin-bottom: 75px" class="nav nav-pills nav-sm pull-right"><li class="m-r-xs pull-right"><a ui-sref="shipment.show({ id: $ctrl.data.id })" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span class="fa fa-backward"></span><span style="botom: 0">Go Back</span></a></li></ul></div><form name=newShipmentForm novalidate ng-submit=$ctrl.create(newShipmentForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-10><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Name<span class=text-danger>*</span><input name=customer_name placeholder="eg. Abhinav" ng-model=$ctrl.data.customer_name required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.customer_name.$dirty &amp;&amp; newShipmentForm.customer_name.$invalid" class="wrapper-xs text-xs text-danger">Please enter Customer Name</span></label></div><div class="col-md-3 col-sm-3 col-xs-6"><label class="col-xs-12 input-group">Phone<span class=text-danger>*</span><input name=phone placeholder="eg. 90000000000" ng-model=$ctrl.data.phone required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.phone.$dirty &amp;&amp; newShipmentForm.phone.$invalid" class="wrapper-xs text-xs text-danger">Please enter Phone number.col-md-3.col-sm-3.col-xs-6</span></label></div><div class="col-md-3 col-sm-3 col-xs-6"><label class="col-xs-12 input-group">Phone Code<span class=text-danger>*</span><input name=phone_code placeholder="eg. +91" ng-model=$ctrl.data.Country.phone_code required class="form form-control"></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-9 col-sm-9 col-xs-9 no-padder"><label class="col-xs-12 input-group">Address<span class=text-danger>*</span><input name=address placeholder="eg. xyz" ng-model=$ctrl.data.address required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.address.$dirty &amp;&amp; newShipmentForm.address.$invalid" class="wrapper-xs text-xs text-danger">Please enter address10.col-sm-10.col-xs-10.no-padder</span></label></div><div class="col-md-3 col-sm-3 col-xs-3"><label class="col-xs-12 input-group">Country<input name=country placeholder="eg. India" ng-model=$ctrl.data.Country.name required disabled class="form form-control text-danger"></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Item Count<span class=text-danger>*</span><input name=packages_count placeholder="eg. 1" ng-model=$ctrl.data.packages_count required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.packages_count.$dirty &amp;&amp; newShipmentForm.packages_count.$invalid" class="wrapper-xs text-xs text-danger">Please enter packages count</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Weight<span class=text-danger>*</span><input type=number min=0.5 name=final_weight placeholder="eg. 2" ng-model=$ctrl.data.final_weight ng-change=$ctrl.fetchPrice() required disabled class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.final_weight.$dirty &amp;&amp; newShipmentForm.final_weight.$invalid" class="wrapper-xs text-xs text-danger">Please enter Weight</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-4 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Actual weight<span class=text-danger>*</span><input type=number min=0.5 name=weight placeholder="eg. 1" ng-model=$ctrl.data.weight ng-blur=$ctrl.calculateFinalWeight() required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.weight.$dirty &amp;&amp; newShipmentForm.weight.$invalid" class="wrapper-xs text-xs text-danger">Please enter weight</span></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Volumetric Weight<span class=text-danger>*</span><input type=number min=0.5 name=volumetric_weight placeholder="eg. 2" ng-model=$ctrl.data.volumetric_weight required disabled class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.volumetric_weight.$dirty &amp;&amp; newShipmentForm.volumetric_weight.$invalid" class="wrapper-xs text-xs text-danger">Please enter volumetric weight</span></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Item Value<span class=text-danger>*</span><input type=number name=value_amount placeholder="eg. 2000" ng-model=$ctrl.data.value_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.value_amount.$dirty &amp;&amp; newShipmentForm.value_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter value Amount</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Box Length<span class=text-danger>*</span><input type=number min=1 name=box_length placeholder="eg. 12 " ng-model=$ctrl.data.box_length ng-blur=$ctrl.calculateFinalWeight() required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.box_length.$dirty &amp;&amp; newShipmentForm.box_length.$invalid" class="wrapper-xs text-xs text-danger">Please enter Box Length</span></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Box Height<span class=text-danger>*</span><input type=number min=1 name=box_height placeholder="eg. 20  " ng-model=$ctrl.data.box_height ng-blur=$ctrl.calculateFinalWeight() required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.box_height.$dirty &amp;&amp; newShipmentForm.box_height.$invalid" class="wrapper-xs text-xs text-danger">Please enter Box Height</span></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Box Width<span class=text-danger>*</span><input type=number min=1 name=box_width placeholder="eg. 5 " ng-model=$ctrl.data.box_width ng-blur=$ctrl.calculateFinalWeight() required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.box_width.$dirty &amp;&amp; newShipmentForm.box_width.$invalid" class="wrapper-xs text-xs text-danger">Please enter Box Width</span></label></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Sub Total<span class=text-danger>*</span><input type=number name=sub_total_amount placeholder="eg. 1000" ng-model=$ctrl.data.sub_total_amount required ng-change=$ctrl.updateCountryDiscount() class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.sub_total_amount.$dirty &amp;&amp; newShipmentForm.sub_total_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Sub total Amount</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Country Discount<span class=text-danger>*</span><span ng-if=$ctrl.discountMessage class=text-success>&nbsp;&nbsp;&nbsp;&nbsp; {{$ctrl.discountMessage}}</span><input type=number name=discount_amount placeholder="eg. 200" ng-model=$ctrl.data.discount_amount required disabled ng-change=$ctrl.updateSubtotal() class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.discount_amount.$dirty &amp;&amp; newShipmentForm.discount_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Discount Amount</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Package Level charges<span class=text-danger>*</span><input type=number name=package_level_charges_amount placeholder="eg. 1000" ng-model=$ctrl.data.package_level_charges_amount required disabled class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.package_level_charges_amount.$dirty &amp;&amp; newShipmentForm.package_level_charges_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter package level charges</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Pickup charges<span class=text-danger>*</span><input type=number name=pick_up_charge_amount placeholder="eg. 200" ng-model=$ctrl.data.pick_up_charge_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.pick_up_charge_amount.$dirty &amp;&amp; newShipmentForm.pick_up_charge_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter pick up charge</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Other charges<span class=text-danger></span><input ng-init="$ctrl.data.ShipmentMetum.other_charge_amount = $ctrl.data.ShipmentMetum.other_charge_amount ? $ctrl.data.ShipmentMetum.other_charge_amount: 0" type=number name=other_charge_amount placeholder="eg. 200" disabled ng-model=$ctrl.data.ShipmentMetum.other_charge_amount class="form form-control"></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Consolidation Charge<span class=text-danger></span><input ng-init="$ctrl.data.ShipmentMetum.consolidation_charge_amount = $ctrl.data.ShipmentMetum.consolidation_charge_amount ? $ctrl.data.ShipmentMetum.consolidation_charge_amount: 0" type=number name=consolidation_charge_amount placeholder="eg. 200" ng-model=$ctrl.data.ShipmentMetum.consolidation_charge_amount class="form form-control"></label></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Remote Area Charges<input type=number name=remote_area_charge_amount placeholder="eg. 100" ng-model=$ctrl.data.ShipmentMetum.remote_area_charge_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.remote_area_charge_amount.$dirty &amp;&amp; newShipmentForm.remote_area_charge_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Box Length</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Commercial Charges<input type=number name=commercial_charge_amount placeholder="eg. 100" ng-model=$ctrl.data.ShipmentMetum.commercial_charge_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.commercial_charge_amount.$dirty &amp;&amp; newShipmentForm.commercial_charge_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Box Height</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Special charges amount<span class=text-danger>*</span><input ng-init="$ctrl.data.ShipmentMetum.liquid_charge_amount = $ctrl.data.ShipmentMetum.liquid_charge_amount ? $ctrl.data.ShipmentMetum.liquid_charge_amount: 0" type=number name=liquid_charge_amount placeholder="eg. 1000" ng-model=$ctrl.data.ShipmentMetum.liquid_charge_amount class="form form-control"></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Estimated charges<span class=text-danger>*</span><input type=number name=estimated_amount placeholder="eg. 1000" ng-model=$ctrl.data.estimated_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.estimated_amount.$dirty &amp;&amp; newShipmentForm.estimated_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Estimated Amount</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Loyalty charges<span class=text-danger>*</span><input type=number name=loyalty_amount placeholder="eg. 1000" ng-model=$ctrl.transaction.data.loyalty_amount disabled class="form form-control"></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Payment Gateway Fee<span class=text-danger>*</span><input type=number text=0 name=payment_gateway_fee_amount placeholder="eg. 200" ng-model=$ctrl.transaction.data.payment_gateway_fee_amount disabled class="form form-control"></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">wallet Amount Used<span class=text-danger>*</span><input type=number name=wallet_amount placeholder="eg. 1000" ng-model=$ctrl.transaction.data.wallet_amount disabled class="form form-control"></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Final Amount<span class=text-danger>*</span><input type=number name=amount placeholder="eg. 200" ng-model=$ctrl.transaction.data.amount disabled class="form form-control"></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label ng-if=$ctrl.transaction.data.cashback_amount class="col-xs-12 input-group">CashBack Rewards<span class=text-danger>*</span><input type=number name=cashback_amount placeholder="eg. 1000" ng-model=$ctrl.transaction.data.cashback_amount disabled class="form form-control"></label><label ng-if=!$ctrl.transaction.data.cashback_amount class="col-xs-12 input-group">Discount Rewards<input type=number name=discount_amount placeholder="eg. 1000" ng-model=$ctrl.transaction.data.discount_amount disabled class="form form-control"><!--label.col-xs-12.input-group--></label><!--  | Is Axis Banned Items--><!--  .fa.fa-info-circle.m-l-xs(--><!--  uib-popover=\'Axis Banned Items are Alcohol,organs or other body parts,Adult goods and services,Bulk marketing tools,Drugs,Tobacco,Weapons,Wholesale currency,Traffic devices,financial products,Government IDs,Illegal goodsCopyrighted software, Copyrighted media,Copyright unlocking devices etc.\'--><!--  popover-trigger="\'mouseenter\'"--><!--  popover-placement=\'top\'--><!--  popover-append-to-body=\'true\'--><!--  )--><!--.col-xs-12: ul.nav--><!--  li.inline: label.i-checks.i-checks-sm--><!--    input(--><!--    type="radio"--><!--    ng-model="$ctrl.data.is_axis_banned_item"--><!--    name=\'is_axis_banned_item\'--><!--    value=0--><!--    required--><!--    )--><!--    i--><!--    .hide--><!--    | No--><!--  li.inline.m-l: label.i-checks.i-checks-sm--><!--    input(--><!--    type="radio"--><!--    ng-model="$ctrl.data.is_axis_banned_item"--><!--    name=\'is_axis_banned_item\'--><!--    value=1--><!--    required--><!--    )--><!--    i--><!--    .hide--><!--    | Yes--><!--span.wrapper-xs.text-xs.text-danger(ng-show=\'$ctrl.clickUpload && newShipmentForm.is_axis_banned_item.$dirty && newShipmentForm.is_axis_banned_item.$invalid\') Please Select Is Axis banned items--></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><!--.row(ng-if=\'$ctrl.EDIT\').col-md-12\n  .col-md-4.col-sm-5.col-xs-12\n    label.col-xs-12.input-group\n      | Select Campaign\n    select.form-control(multiple=\'\' ng-model="$ctrl.data.offers")\n      option(value=\'diwali-sweets\') Diwali Sweets\n      option(value=\'valentine\') Valentine\n      option(value=\'rakhi\') Rakhi\n      option(value=\'onam\') Onam\n      option(value=\'indday\') Independence\n  .col-md-5.text-danger(ng-show=\'$ctrl.independence_offer_eligible\')\n    | This shipment is eligible for Valentine day offer.--><!--.line.line-dashed.b-b.line-lg.pull-in(style=\'margin: 5px 0;\' ng-if=\'$ctrl.EDIT\')--><div class=row><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled="$ctrl.submitting || (!$ctrl.submitting &amp;&amp; !newShipmentForm.$dirty)" class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>{{$ctrl.EDIT ? \'\' : \'Quick \' }} Update</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></div></div></form></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><br><br><div class="wrapper-md bg-white-only"><div class="h1 m-l-md font-thin h3">Update Shipment Tracking.</div><div><br><form name=trackingForm novalidate ng-submit=$ctrl.trackingUpdate(trackingForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Select Carrier<select ng-model=$ctrl.data.shipping_carrier name=carton_box_used ng-options="afterShip.carrier as afterShip.carrier for afterShip in $ctrl.afterShipCarriers" class="form form-control"></select></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">No Of Boxes<span class=text-danger>*</span><input type=number name=phone placeholder="eg. 2" ng-model=$ctrl.data.number_of_packages required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; trackingForm.number_of_packages.$dirty &amp;&amp; trackingForm.number_of_packages.$invalid" class="wrapper-xs text-xs text-danger">Please enter number of packages</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Package weight<span class=text-danger>*</span><input type=number name=weight_by_shipping_partner placeholder="eg. 2" ng-model=$ctrl.data.weight_by_shipping_partner required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; trackingForm.weight_by_shipping_partner.$dirty &amp;&amp; trackingForm.weight_by_shipping_partner.$invalid" class="wrapper-xs text-xs text-danger">Please enter Weight</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Live Tracking Code<span class=text-danger>*</span><input name=tracking_code placeholder="eg. 3203915982" ng-model=$ctrl.data.tracking_code required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; trackingForm.tracking_code.$dirty &amp;&amp; trackingForm.tracking_code.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Tracking Code</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Tracking URL<span class=text-danger>*</span><input name=tracking_url placeholder="eg. dhl.co.in/en/express/tracking.html" ng-model=$ctrl.data.tracking_url required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; trackingForm.tracking_url.$dirty &amp;&amp; trackingForm.tracking_url.$invalid" class="wrapper-xs text-xs text-danger">Please enter Tracking URL</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Connecting Tracking Code<span class=text-danger>*</span><input name=connecting_tracking_code placeholder="eg. 2018-08-12" ng-model=$ctrl.data.connecting_tracking_code disabled class="form form-control"></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Dispatch Date<span class=text-danger>*</span><input name=dispatch_date placeholder="eg. 2018-08-12" ng-model=$ctrl.data.dispatch_date disabled class="form form-control"></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">IS CS5 Shipment</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_cs5 name=is_cs5 value=0 required><i></i><div class=hide></div>No</label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_cs5 name=is_cs5 value=1 required><i></i><div class=hide></div>Yes</label></li></ul></div><span ng-show="$ctrl.clickUpload &amp;&amp; trackingForm.is_cs5.$dirty &amp;&amp; trackingForm.is_cs5.$invalid" class="wrapper-xs text-xs text-danger">Please Select Is CS5 Option</span></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div class=row><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled="$ctrl.submittingTracking || (!$ctrl.submittingTracking &amp;&amp; !trackingForm.$dirty)" class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>Update Tracking</span><span ng-if=$ctrl.submittingTracking><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></div></div></form></div></div><br><div class="wrapper-md bg-white-only"><div class="h1 m-l-md font-thin h3">Update Shipment Upstream Cost.</div><div><br><form name=upstreamCost novalidate autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-10 col-sm-10 col-xs-10"><div class=col-md-7><div ng-if=$ctrl.EDIT class=row><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Weight<span class=text-danger>*</span><input type=number name=final_weight placeholder="eg. 2" ng-model=$ctrl.data.final_weight required disabled class="form form-control"></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Shipment Type</label><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=checkbox ng-model="$ctrl.data.is_doc"><i></i><div class=hide></div>Document<div uib-popover="Check if the shipment is Document" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div></div><div ng-if=$ctrl.EDIT class=row><div class=col-md-12><div class="col-md-4 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Upstream Cost<span class=text-danger>*</span><input type=number name=upstream_cost placeholder="eg. 1000" ng-model=$ctrl.data.upstream_cost required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.upstream_cost.$dirty &amp;&amp; newShipmentForm.upstream_cost.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Upstream</span></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Fuel Sur Charge<span class=text-danger>*</span><input type=number name=fuel_sur_charge placeholder="eg. 200" ng-model=$ctrl.data.fuel_sur_charge required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.fuel_sur_charge.$dirty &amp;&amp; newShipmentForm.fuel_sur_charge.$invalid" class="wrapper-xs text-xs text-danger">Please Enter fuel Sur Charge</span></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">GST Amount<span class=text-danger>*</span><input type=number name=gst_amount placeholder="eg. 200" ng-model=$ctrl.data.gst_amount class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newShipmentForm.gst_amount.$dirty &amp;&amp; newShipmentForm.gst_amount.$invalid" class="wrapper-xs text-xs text-danger">Please Enter GST Amount</span></label></div></div></div><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Select Carton Box<select ng-model=$ctrl.data.carton_box_used name=carton_box_used ng-options="carton.kg as carton.kg for carton in $ctrl.cartonBox" ng-click=$ctrl.cartonValue(carton.kg) class="form form-control"></select></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Carton Box Amount<span class=text-danger>*</span><input type=number name=carton_box_Amount placeholder=45.5 ng-model=$ctrl.data.carton_box_Amount class="form form-control"><span ng-show="trackingForm.carton_box_Amount.$dirty &amp;&amp; trackingForm.carton_box_Amount.$invalid" class="wrapper-xs text-xs text-danger">Please Enter Carton Box Amount</span></label></div></div></div><div style="margin: 5px 0" ng-if=$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div ng-show="$ctrl.data.carton_box_used === \'Other\'" class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Carton Box Weight<span class=text-danger>*</span><input type=number name=carton_box_weight placeholder=15 ng-model=$ctrl.data.carton_box_weight class="form form-control"></label></div></div></div><div style="margin: 5px 0" ng-if="$ctrl.EDIT &amp;&amp; $ctrl.data.carton_box_used === &quot;Other&quot;" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class="col-md-4 col-sm-5 col-xs-12"><button ng-click=$ctrl.getUpstreamPrice() class="btn btn-success"><span class=text-white>&nbsp;&nbsp;Get Upstream Price</span></button></div><div class="col-md-4 col-sm-5 col-xs-12"><button ng-click=$ctrl.updateUpstreamPrice() class="btn btn-success"><span class=text-white>&nbsp;&nbsp;Update Upstream Price</span></button></div></div></div></div></div></form></div></div></div></div>'),
a.put("app/routes/customers/shipments/index/index.html",'<div><div before-bottom=$ctrl.loadShipments() style=position:relative class=hbox><div><div style="position: absolute;width: 100%; height: 44px;padding-top: 4px" class="m-t-xl bg-white-only"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="customer.shipments.index({jobId:$ctrl.job.id,bucket: bucket})" ng-bind=bucket></a></li><li class=pull-right><a ng-if=$ctrl.shipments.length>{{$ctrl.shipments.length}} of {{$ctrl.total}} Shipments(s)</a></li><li class=pull-right><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm bg-white-only b-gray">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></li></ul></div></div><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"></customer-header><div style="min-height: 200px" class=bg-light><directive-header options=$ctrl page={customerShipments:true} buttons="{buckets:true,create:true,highlight:\'upload\'}" app=App></directive-header><div style="height: 1px" class="m-t-xxl m-b-md"></div><div class=wrapper-md><storage-limit data=$ctrl.customer></storage-limit><div ng-if=!$ctrl.shipments.length class=wrapper-md><div class=hbox><div class=col><h1 ng-if=!$ctrl.ui.loading class="m-t-lg text-center text-muted">No Shipments</h1></div></div></div><div ng-repeat="shipment in $ctrl.shipments" class="m-t-sm hbox"><div class="col bg-white b-a"><div class="col-xs-12 col-md-8 no-padder"><div class="tl-content m-none padder w-full w-auto-xs"><div class=m-b-sm><label class="sm m-b-none"></label><div class="col-xs-4 text-ellipsis"><i></i><a ui-sref="shipment.show({ id: shipment.id})" target=_blank><strong class=text-primary-lt>ShipmentID - {{shipment.id}}</strong></a></div></div><div class="panel-body pull-in b-t wrapper-xs"><div class="col-xs-4 text-ellipsis"><i style="margin:0 2px" class="fa fa-cubes"></i>{{shipment.Packages.length || 0}}</div><div ng-show=shipment.final_weight class="col-xs-4 text-ellipsis"><i class="fa fa-balance-scale"></i> {{shipment.final_weight}} KG</div><div ng-show=shipment.country_id class="col-xs-4 text-ellipsis"><i class="fa fa-map-marker"></i> {{shipment.Country.name}}</div><div ng-show=shipment.payment_gateway_id class="col-xs-4 text-ellipsis"><i class="fa fa-money"></i> {{shipment.PaymentGateway.value}}</div><div ng-show=shipment.final_amount class="col-xs-4 text-ellipsis"><i class="fa fa-inr"></i> Rs. {{shipment.final_amount}}</div><div ng-show=shipment.tracking_url class="col-xs-4 text-ellipsis"><i class="fa fa-truck"></i><a href={{shipment.tracking_url}} target=_blank><span class=text-primary-lt>&nbsp; {{shipment.tracking_code}} &nbsp; &nbsp;{{shipment.shipping_carrier}}</span></a></div></div></div></div><div class="col-xs-12 col-md-2 no-padder"><div class="m-none wrapper-lg w-full w-auto-xs"><div class=clearfix><span ng-if="shipment.state_id === $ctrl.shipmentStateId.PAYMENT_REQUESTED" title="{{shipment.totalDays}} days" ng-class="shipment.totalDays &gt; 7 ? \'text-danger\' : \'text-success\'"><div class="pull-right padder m-t-xxs">{{shipment.created_at | date:\'MMM d, y\'}} IST {{shipment.created_at | date:\'h:mm a\'}} &nbsp;</div></span><span class="pull-right m-b m-t"></span><span ng-if="shipment.state_id !== $ctrl.shipmentStateId.PAYMENT_REQUESTED" title="{{shipment.totalDays}} days" class=text-success><div class="pull-right padder m-t-xxs">{{shipment.created_at | date:\'MMM d, y\'}} IST {{shipment.created_at | date:\'h:mm a\'}} &nbsp;</div></span><span class="pull-right m-b m-t"></span></div></div></div><div class="col-xs-12 col-md-2 no-padder"><div class="m-none wrapper-lg w-full w-auto-xs"><div class=clearfix><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class="btn-group pull-right m-t-n-xs"><button uib-dropdown-toggle="" ng-disabled=!$ctrl.states[shipment.state_id].Actions.length style="padding: 4px 8px" class="w-full btn b-{{$ctrl.states[shipment.state_id].config.color}} text-{{$ctrl.states[shipment.state_id].config.color}} bg-white-only"><span ng-bind=$ctrl.states[shipment.state_id].action></span><span ng-if=$ctrl.states[shipment.state_id].Actions.length&gt;0 class="caret m-l-xs"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class=dropdown-menu><li role=menuitem ng-repeat="state in $ctrl.states[shipment.state_id].Actions"><a href="" ng-click="$ctrl.ChangeShipmentState.open(shipment, state.state_id, $ctrl.$stateParams.id)" ng-bind=::$ctrl.states[state.state_id].action></a></li></ul><span ng-if=shipment.updated_at uib-tooltip="{{shipment.updated_at | date:\'MMM d, y\'}} IST {{shipment.updated_at | date:\'h:mm a\'}}" tooltip-placement=bottom-center tooltip-append-to-body=true class="pull-right no-padder"><i class="fa text-{{App.interviewUI[shipment.consignment_type].color}}-dker fa-{{App.interviewUI[shipment.interview_type].icon}}"></i><span ng-bind=$ctrl.moment(shipment.updated_at).fromNow()></span></span></div></div></div></div></div></div></div><div class="col-xs-2 col-xs-offset-5"><button ng-if=$ctrl.ui.loading class="pull-left btn active m-t-md"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></button><button ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadShipments() class="pull-left btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></button></div></div></div></div>'),a.put("app/routes/customers/view/view.html",'<div class="m-t-xl no-margin"><div class=hbox><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3"><b>CUSTOMER PROFILE</b><div class=pull-right><div ui-sref=customer.packages.create uib-popover="for {{$ctrl.data.virtual_address_code}} - {{$ctrl.data.first_name}}" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="a h4 btn btn-success"><span class="fa fa-forward m-r-sm"></span><span class=text-white>Add Package</span></div></div><div class="m-r-md pull-right"><div ui-sref=customer.packages.bulk uib-popover="for {{$ctrl.data.virtual_address_code}} - {{$ctrl.data.first_name}}" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="a h4 btn btn-success"><span class="fa fa-forward m-r-sm"></span><span class=text-white>Bulk Package Upload</span></div></div></div></div><hr class="no-margin-bottom"><form name=profileForm novalidate ng-submit=$ctrl.update(profileForm) class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 no-padder"><div class=col-md-11><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><h4><strong>PRIMARY ACCOUNT HOLDER NAME</strong></h4></div></div><div class=row><div class="col-md-2 col-sm-2 col-xs-12"><label class="col-xs-12 input-group">Salutation<select ng-model=$ctrl.data.salutation name=salutation required class="form form-control"><option value="">Salutation</option><option>Mr</option><option>Ms</option><option>Mrs</option></select><span ng-show="$ctrl.clickUpload &amp;&amp; profileForm.salutation.$dirty &amp;&amp; profileForm.salutation.$invalid" class="wrapper-xs text-xs text-danger">Please select Salutation</span></label></div><div class="col-md-2 col-sm-2 col-xs-12 no-padder"><label class="col-xs-12 input-group">First Name<input name=first_name placeholder="eg. Aditya" ng-model=$ctrl.data.first_name q-text-maxlength=60 autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; profileForm.first_name.$dirty &amp;&amp; profileForm.first_name.$invalid" class="wrapper-xs text-xs text-danger">Please enter First Name</span></label></div><div class="col-md-2 col-sm-2 col-xs-12 no-padder-right"><label class="col-xs-12 input-group">Last Name<input name=last_name placeholder="eg. Sharma" ng-model=$ctrl.data.last_name q-text-maxlength=60 autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; profileForm.last_name.$dirty &amp;&amp; profileForm.last_name.$invalid" class="wrapper-xs text-xs text-danger">Please enter Last Name</span></label></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><h4><strong>EMAIL ADDRESS</strong></h4></div></div><div class=row><div class="col-md-3 col-sm-2 col-xs-12 no-padder-right"><label class="col-xs-12 input-group">Email<input type=email name=email placeholder="eg. adithya@gmail.com" ng-model=$ctrl.data.email q-text-maxlength=60 autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; profileForm.email.$dirty &amp;&amp; profileForm.email.$invalid" class="wrapper-xs text-xs text-danger">Please enter Email</span></label></div><div class="col-md-3 col-sm-2 col-xs-12 no-padder-right"><label class="col-xs-12 input-group">Alternate Email<input type=email name=alternate_email placeholder="eg. alt_adithya@gmail.com" ng-model=$ctrl.data.alternate_email q-text-maxlength=60 class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; profileForm.alternate_email.$dirty &amp;&amp; profileForm.alternate_email.$invalid" class="wrapper-xs text-xs text-danger">Please enter Alternate Email</span></label></div></div><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><h4><strong>PHONE NUMBERS</strong></h4></div></div><div class=row><div class="col-md-7 col-sm-7 col-xs-12"><label class="col-xs-12 input-group">Primary Phone / Mobile Number<span class=text-danger>*</span></label></div></div><div class=row><div class="col-md-4 col-sm-5 col-xs-12"><input id=tel name=phone ng-model=$ctrl.data.phone ng-intl-tel-input="" class="form-control"><span ng-show="profileForm.phone.$pristine &amp;&amp; profileForm.phone.$untouched" class=help-block>Please type a telephone number</span><span ng-show="profileForm.phone.$invalid &amp;&amp; profileForm.phone.$touched" class=help-block>Invalid :(</span><span ng-show="profileForm.phone.$valid &amp;&amp; profileForm.phone.$touched" class=help-block>Valid :)</span></div></div><div class=row><div class="col-md-7 col-sm-7 col-xs-12"><label class="col-xs-12 input-group">Secondary Phone / Mobile Number</label></div></div><div class=row><div class="col-md-4 col-sm-5 col-xs-12"><input id=tel1 name=secondary_phone ng-model=$ctrl.data.secondary_phone ng-intl-tel-input="" class="form-control"><span ng-show="profileForm.secondary_phone.$pristine &amp;&amp; profileForm.secondary_phone.$untouched" class=help-block>Please type a telephone number</span><span ng-show="profileForm.secondary_phone.$invalid &amp;&amp; profileForm.secondary_phone.$touched" class=help-block>Invalid :(</span><span ng-show="profileForm.secondary_phone.$valid &amp;&amp; profileForm.secondary_phone.$touched" class=help-block>Valid :)</span></div></div><div class="row hide"><div class="col-md-7 col-sm-7 col-xs-12"><h4><b>EMAIL ADDRESS VERIFIED?</b></h4></div></div><div class="row hide"><div class="col-md-2 col-sm-2 col-xs-12 no-padder"><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.email_verify value="yes"><i></i><div class=hide></div>Yes<div uib-popover="Email Verified" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.email_verify value="no"><i></i><div class=hide></div>No<div uib-popover="Email Not Yet Verified" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div></div><div class=row><div class="col-md-7 col-sm-7 col-xs-12"><h4><b>Membership</b></h4></div></div><div class=row><div class="col-md-2 col-sm-2 col-xs-12 no-padder"><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_member value=2 name="is_member"><i></i>Yes<div uib-popover="Membership Customers" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li><li class="inline m-l"><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.is_member value=0 name="is_member"><i></i>No<div uib-popover="Non Membership Customers" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div></div><div class=row><div class="col-md-3 col-sm-2 col-xs-12 no-padder-right"><label class="col-xs-12 input-group">Membership Start date<input type=date name=membership_start_date ng-model=$ctrl.membership_start_date ng-value="$ctrl.data.membership_start_date | date: &quot;yyyy-MM-dd&quot;" class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; profileForm.membership_start_date.$dirty &amp;&amp; profileForm.membership_start_date.$invalid" class="wrapper-xs text-xs text-danger">Please enter membership Start Date</span></label></div><div class="col-md-3 col-sm-2 col-xs-12 no-padder-right"><label class="col-xs-12 input-group">Membership End date<input type=date name=membership_validity ng-model=$ctrl.membership_validity ng-value="$ctrl.data.membership_validity | date: &quot;yyyy-MM-dd&quot;" class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; profileForm.membership_validity.$dirty &amp;&amp; profileForm.membership_validity.$invalid" class="wrapper-xs text-xs text-danger">Please enter membership End Date</span></label></div></div><div class=row><div class="col-md-6 col-xs-12"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled=$ctrl.submitProfile class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitProfile class=text-white>Save Changes</span><span ng-if=$ctrl.submitProfile><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;SubmittingProfile...</span></span></button></div></div></div></div></div></form><div class=hide><div class="h1 m-l-md font-thin h3"><b>RACK NUMBER</b></div></div><div class="hide well m-t m-l bg-light hover-wrap"><div class=row><div class=col-md-2><label class=input-group><input name=lockerCode placeholder="eg. 25" ng-model=$ctrl.lockerCode q-text-maxlength=60 class="form form-control"></label></div><div class="col-md-6 col-xs-12"><button ng-click=$ctrl.updateLockerCode() class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitlocker class=text-white>Update Rack Number</span><span ng-if=$ctrl.submitlocker><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;SubmittingRack...</span></span></button></div></div></div><div class=hide><div class="h1 m-l-md font-thin h3"><b>ADDRESS BOOK</b></div></div><hr><div ng-repeat="address in $ctrl.addresses" ng-class="address.is_default ? &quot;dker&quot;: &quot;lt&quot;" class="hide well m-t m-l bg-light hover-wrap"><div class=row><div class=col-md-12><h4><span ng-bind="(address.city ? address.city.toUpperCase() : &quot;&quot;) + &quot; ADDRESS&quot;" class="h4 font-thin"></span><span ng-class="&quot;flag-icon-&quot;+ address.Country.iso2.toLowerCase()" class="flag-icon m-l-xs"></span><strong ng-bind="address.first_name + &quot; &quot; + address.last_name"></strong></h4><p><span ng-bind=address.line1 class=block></span><span ng-bind=address.line2 class=block></span><span ng-bind="address.city + &quot;, &quot; + address.state" class=block></span><span ng-bind="address.Country.name + &quot; - &quot; + address.pincode" class=block></span><span ng-if=address.phone ng-bind=address.phone class=block></span><span ng-if=address.is_default class="label pull-left padding-5 m-t-xs bg-primary">DEFAULT SHIPPING ADDRESS</span></p></div></div></div><div class=hide><div class="h1 m-l-md font-thin h3"><b>SHIPPING PREFERENCES</b></div></div><hr><div class="hide well m-t m-l bg-light hover-wrap"><div class=row><div class=col-md-8><div class="panel no-border"><div class="panel-heading wrapper b-b b-light"><h4 class=font-bold>LOG IN OPTIONS</h4><br><ul class="list-group list-group-lg m-b-none list-unstyled ship-prefer"><li><div ng-if=$ctrl.shippingPreference.is_basic_photo class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_basic_photo class="fa fa-times"></div><span>Always take standard photos of item at login</span></li><li><div ng-if=$ctrl.shippingPreference.is_advanced_photo class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_advanced_photo class="fa fa-times"></div><span>Always take advanced photos of item at login</span></li><li><div ng-if=$ctrl.shippingPreference.is_scan_document class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_scan_document class="fa fa-times"></div><span>Always scan all pages of my documents</span></li></ul></div></div></div></div><div class="row hide"><div class=col-md-8><div class="panel no-border"><div class="panel-heading wrapper b-b b-light"><h4 class=font-bold>PACKING OPTIONS</h4><br><ul class="list-group list-group-lg m-b-none list-unstyled ship-prefer"><li><div ng-if=$ctrl.shippingPreference.is_repacking class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_repacking class="fa fa-times"></div><span>Discard shoe boxes</span></li><li><div ng-if=$ctrl.shippingPreference.is_extra_packing class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_extra_packing class="fa fa-times"></div><span>Add extra packing material</span></li><li><div ng-if=$ctrl.shippingPreference.is_original_box class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_original_box class="fa fa-times"></div><span>Ship in original shipping boxes</span></li><li><div ng-if=$ctrl.shippingPreference.is_gift_wrap class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_gift_wrap class="fa fa-times"></div><span>Gift Wrap</span></li><li><div ng-if=$ctrl.shippingPreference.is_gift_note class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_gift_note class="fa fa-times"></div><span>Gift Note</span></li><li><div class=form-group><div class="col-lg-1 no-padder"><input disabled ng-model=$ctrl.shippingPreference.max_weight class="form-control no-padder text-center"></div><label class="col-lg-10 control-label m-t-xs">Max weight per box/Multi-piece shipment (MPS) 1 kilogram is about 2.2046 pounds</label></div></li><div class=clearfix></div></ul></div></div></div></div><div class="row hide"><div class=col-md-8><div class="panel no-border"><div class="panel-heading wrapper b-b b-light"><h4 class=font-bold>PERFORMA INVOICE OPTIONS</h4><br><ul class="list-group list-group-lg m-b-none list-unstyled ship-prefer"><li><div ng-if=$ctrl.shippingPreference.is_mark_personal_use class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_mark_personal_use class="fa fa-times"></div><span>Mark items for "Personal Use Only"</span></li><li><div ng-if=$ctrl.shippingPreference.is_include_invoice class="fa fa-check"></div><div ng-if=!$ctrl.shippingPreference.is_include_invoice class="fa fa-times"></div><span>Please include a printed Proforma Invoice in my shipment</span></li><li><div class=form-group><label class="col-lg-1 control-label m-t-xs no-padder">Tax ID</label><div class="col-lg-3 no-padder-left"><input disabled ng-model=$ctrl.shippingPreference.tax_id class="form-control"></div></div></li><div class=clearfix></div></ul></div></div></div></div></div><!-- - todo -wallet transction required in IPFS 4.0--><div><div class="h1 m-l-md font-thin h3">Wallet Balance:<b ng-class="$ctrl.walletAmount &gt;=0 ? \'text-success\': \'text-danger\'">{{$ctrl.walletAmount}}</b></div><div class="col-md-12 col-sm-2 col-xs-12"><span>&nbsp; Parcel Balance: &nbsp;<span ng-class="$ctrl.userBalance.parcel_wallet_amount &gt;=0 ? \'text-success\': \'text-danger\'" ng-bind=$ctrl.userBalance.parcel_wallet_amount class=h4></span></span><span>&nbsp; PS Balance: &nbsp;<span ng-class="$ctrl.userBalance.ps_wallet_amount &gt;=0 ? \'text-success\': \'text-danger\'" ng-bind=$ctrl.userBalance.ps_wallet_amount class=h4></span></span><span>&nbsp; Courier Balance: &nbsp;<span ng-class="$ctrl.userBalance.courier_wallet_amount &gt;=0 ? \'text-success\': \'text-danger\'" ng-bind=$ctrl.userBalance.courier_wallet_amount class=h4></span></span><span>&nbsp; Marketing Balance: &nbsp;<span ng-class="$ctrl.userBalance.marketing_wallet_amount &gt;=0 ? \'text-success\': \'text-danger\'" ng-bind=$ctrl.userBalance.marketing_wallet_amount class=h4></span></span></div></div><hr><form name=walletForm novalidate ng-submit=$ctrl.createWallet(walletForm) class="form form-validation form-horizontal wrapper-md"><div class="well m-t m-l bg-light hover-wrap"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><h4><strong>Wallet Transactions</strong></h4></div></div><div class=row><div class="col-md-4 col-sm-12 col-xs-12"><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.object_type ng-click="$ctrl.viewWallet(\'parcel\')" value="parcel"><i></i><div class=hide></div>Parcel</label></li><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model=$ctrl.data.object_type ng-click="$ctrl.viewWallet(\'ps\')" value="ps"><i></i><div class=hide></div>Ps</label></li><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model="$ctrl.data.object_type " ng-click="$ctrl.viewWallet(\'courier\')" value="courier"><i></i><div class=hide></div>Courier</label></li><li class=inline><label class="i-checks i-checks-sm"><input type=radio ng-model="$ctrl.data.object_type " ng-click="$ctrl.viewWallet(\'marketing\')" value="marketing"><i></i><div class=hide></div>Marketing</label></li></ul></div></div></div><div class=row><div class="col-md-4 col-sm-2 col-xs-12"><label class="col-xs-12 input-group">Description<span class=text-danger>*</span><input name=description placeholder="eg. for feedback" ng-model=$ctrl.data.description required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; wallet.description.$dirty &amp;&amp; wallet.description.$invalid" class="wrapper-xs text-xs text-danger">Please enter description</span></label></div><div class="col-md-4 col-sm-2 col-xs-12"><label class="col-xs-12 input-group">Amount<span class=text-danger>*</span><input type=number name=amount placeholder="eg. 2" ng-model=$ctrl.data.amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; wallet.amount.$dirty &amp;&amp; wallet.amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter amount</span></label></div><div class="col-md-2 col-sm-2 col-xs-12 save"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled=$ctrl.submitWallet class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitWallet class=text-white>Submit</span><span ng-if=$ctrl.submitWallet><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;submitting Wallet...</span></span></button></div></div><div class=row><div class=col-md-12></div><div class=no-padder-right><table class="table m-b-none"><thead><tr><th class=col-xs-2>Description</th><th class=col-xs-2>Amount</th><th class=col-xs-2>Opening Balace</th><th class=col-xs-2>closing Balace</th><th class=col-xs-1>Created By</th><th class=col-xs-2>Date</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.transactions.length === 0" class=col-xs-12><td colspan=5><h2 class="text-center text-muted">No Wallet Transaction Details</h2></td></div><table class="table m-b-none default footable-loaded footable"><!--tr(ng-click=\'$ctrl.MoreOption[$index]=!$ctrl.MoreOption[$index]\' ng-repeat=\'transaction in $ctrl.transactions\')--><tbody ng-repeat="transaction in $ctrl.transactions" style="cursor: pointer"><tr ng-click="$ctrl.MoreOption[$index]=!$ctrl.MoreOption[$index]" class=bg-white><td uib-tooltip=transaction.description class="col-md-2 col-xs-2 wrapper-sm text-ellipsis m-t-xs">{{transaction.description.substr(0,25)}}</td><td ng-bind=transaction.amount class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"></td><td ng-bind=transaction.SubTransactions[0].opening_balance class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"></td><td ng-bind=transaction.SubTransactions[0].closing_balance class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"></td><td ng-bind=transaction.Creater.first_name class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"></td><td class="col-xs-2 wrapper-sm text-ellipsis m-t-xs">{{ transaction.created_at | date:\'MMM d, y\' }} IST {{ transaction.created_at | date:\'h:mm a\' }}</td></tr><tr ng-repeat="subtransaction in transaction.SubTransactions" vstyle=background:#f1f5fa ng-if=$ctrl.MoreOption[$parent.$index]><td>{{subtransaction.object_type}}: &nbsp; {{subtransaction.amount}}</td><td colspan=3>{{transaction.description}}: &nbsp;</td></tr></tbody><!--.col-xs-1.wrapper-sm.text-ellipsis.m-t-xs.fa.fa-trash(ng-click="$ctrl.deleteWalletTransaction($ctrl.$stateParams.id, transaction.id, transaction.amount, transaction.type, $index)")--><!--.col-xs-2.wrapper-sm.text-ellipsis.m-t-xs.fa.fa-edit(ng-click="$ctrl.editWalletTransaction($ctrl.$stateParams.id, transaction.id, transaction.amount, transaction.description, $index)")--></table></div></div></div></div></form><!--div--><!--  .h1.m-l-md.font-thin.h3--><!--    b Miscellaneous Rewards--><!----><!--hr--><!--form.form.form-validation.form-horizontal.wrapper-md(--><!--name="LoyaltyForm"--><!--novalidate--><!--ng-submit=\'$ctrl.postLoyalty(LoyaltyForm)\'--><!--)--><!--  .well.m-t.m-l.bg-light.hover-wrap--><!--    .row--><!--      .col-md-12.col-sm-12.col-xs-12--><!--        h5--><!--          p Add miscellaneous loyalty points to this profile.--><!--          p Points to Redeem : {{ $ctrl.loyaltyPoints.points }}--><!--          p Total Points: {{ $ctrl.loyaltyPoints.total_points }}--><!--            span(ng-if=\'$ctrl.loyaltyPoints.total_points < 1000\')--><!--              |   ( BRONZE SHIPPR )--><!--            span(ng-if=\'$ctrl.loyaltyPoints.total_points >= 1000 && $ctrl.loyaltyPoints.total_points < 6000\')--><!--              |   ( SILVER SHIPPR )--><!--            span(ng-if=\'$ctrl.loyaltyPoints.total_points >= 6000 && $ctrl.loyaltyPoints.total_points < 26000\')--><!--              |   ( GOLD SHIPPR )--><!--            span(ng-if=\'$ctrl.loyaltyPoints.total_points >= 26000\')--><!--              |   ( PLATINUM SHIPPR )--><!--    .row--><!--      .col-md-4.col-sm-2.col-xs-12--><!--        label.col-xs-12.input-group--><!--          | Reason/Information--><!--          span.text-danger *--><!--          input.form.form-control(--><!--          type=\'text\'--><!--          name=\'description\'--><!--          placeholder=\'eg. for feedback\'--><!--          ng-model=\'$ctrl.data.description\'--><!--          required--><!--          )--><!--          span.wrapper-xs.text-xs.text-danger(ng-show=\'$ctrl.clickUpload && LoyaltyForm.description.$dirty && LoyaltyForm.description.$invalid\') Please enter description--><!----><!--      .col-md-4.col-sm-2.col-xs-12--><!--        label.col-xs-12.input-group--><!--          | Reward Points--><!--          span.text-danger *--><!--          input.form.form-control(--><!--          type=\'number\'--><!--          name=\'points\'--><!--          placeholder=\'eg. 2\'--><!--          ng-model=\'$ctrl.data.points\'--><!--          required--><!--          )--><!--          span.wrapper-xs.text-xs.text-danger(ng-show=\'$ctrl.clickUpload && LoyaltyForm.points.$dirty && LoyaltyForm.points.$invalid\') Please enter points--><!----><!--      .col-md-2.col-sm-2.col-xs-12.save--><!--        h4(ng-bind="$ctrl.error.message" style="color:red;")--><!--        button.btn.btn-success(type=\'submit\' ng-disabled="$ctrl.submitLoyalty")--><!--          span.fa.fa-forward.m-r-sm--><!--          span.text-white(ng-if=\'!$ctrl.submitLoyalty\') Save Changes--><!--          span(ng-if=\'$ctrl.submitLoyalty\')--><!--            i.fa.fa-spin.fa-circle-o-notch--><!--            span.text-white &nbsp;&nbsp;SubmittingLoyalty...--><!--    .row--><!--      .col-md-12.no-padder-right--><!--        table.table.m-b-none--><!--          thead--><!--            tr--><!--              th.col-xs-3 Date--><!--              th.col-xs-3 Reason/Information--><!--              th.col-xs-3 Reward Points--><!--              th.col-xs-1 Delete--><!--              th.col-xs-2 Edit--><!----><!--        .col-xs-12(style=\'padding: 10px;\')--><!--          .col-xs-12(ng-show=\'$ctrl.loyaltyHistories.length === 0\')--><!--            td(colspan="5")--><!--              h2.text-center.text-muted No Loyatly Rewards Details--><!----><!--          .col-xs-12.no-padder.bg-white.b-a.m-b-sm(ng-repeat=\'loyaltyHistory in $ctrl.loyaltyHistories\')--><!--            .col-xs-3.wrapper-sm.text-ellipsis.m-t-xs {{ loyaltyHistory.created_at | date:\'MMM d, y\' }} IST {{ loyaltyHistory.created_at | date:\'h:mm a\' }}--><!--            .col-xs-3.wrapper-sm.text-ellipsis.m-t-xs(ng-bind=\'loyaltyHistory.description\')--><!--            .col-xs-3.wrapper-sm.text-ellipsis.m-t-xs(ng-bind=\'loyaltyHistory.points\')--><!--            .col-xs-1.wrapper-sm.text-ellipsis.m-t-xs.fa.fa-trash(ng-click="$ctrl.deleteLoyaltyPoints($ctrl.$stateParams.id, loyaltyHistory.id, loyaltyHistory.points, $index)")--><!--            .col-xs-2.wrapper-sm.text-ellipsis.m-t-xs.fa.fa-edit(ng-click="$ctrl.editLoyaltyPoints($ctrl.$stateParams.id, loyaltyHistory.id, loyaltyHistory.points, loyaltyHistory.description, $index)")--></div></div></div><div class=clearfix></div>'),a.put("app/routes/feeds/index/index.html",'<div><div class=hbox><div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="feeds.index({ bucket: bucket })" ng-bind=bucket></a></li></ul></div></div><div style="padding-bottom: 4px" class=m-t-xl></div><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr class=m-l-xs-md><th class="col-md-1 col-xs-1">ID</th><th class="col-md-1 col-xs-1">Comment</th><th class="col-md-2 col-xs-2">Customer Name</th><th class="col-md-2 col-xs-2">Acting User</th><th class="col-md-2 col-xs-1">Created At</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.comments.length === 0" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Comments</h1></td></div><div ng-repeat="comment in $ctrl.comments" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-md-1 col-xs-1 wrapper-sm m-t-xs"><a ui-sref="{{$ctrl.redirectUrl}}({ id: comment.ID })" class=m-l>{{comment.ID}}</a></div><div ng-bind=comment.comments class="col-md-2 col-xs-1 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind=comment.customerName class="col-md-3 col-xs-2 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind=comment.actingUser class="col-md-2 col-xs-2 wrapper-sm text-ellipsis m-t-xs"></div><div class="col-md-3 col-xs-2 wrapper-sm text-ellipsis m-t-xs"><span class=text-success>{{comment.created_at | date:\'MMM d, y\'}} IST {{comment.created_at | date:\'h:mm a\'}}</span></div></div></div><!--    a.btn.active.m-t-xs(ng-if="$ctrl.ui.loading")--><!--      i.fa.fa-circle-o-notch.fa-spin--><!--      strong &nbsp;Loading--><!--    a.btn.btn-primary.m-t-xs(ng-if="$ctrl.ui.lazyLoad" ng-click="$ctrl.loadPackages()")--><!--      i.fa.fa-plus-circle--><!--      strong &nbsp;Load More--></scrollable-table></div></div>'),
a.put("app/routes/notifications/index/index.html",'<div><div class=hbox><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr><th class=col-xs-1>ID</th><th class=col-xs-3>Type</th><th class=col-xs-4>Date</th><th class=col-xs-2>View</th><th class=col-xs-2>Mark</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.notifications.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Orders</h1></td></div><div ng-repeat="notification in $ctrl.notifications" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><span>{{notification.id}}</span></div><div class="col-xs-3 wrapper-sm m-t-xs"><span ng-if="notification.type === 1">Package</span><span ng-if="notification.type === 2">Shipment</span><span ng-if="notification.type === 4">Order</span></div><div class="col-xs-4 wrapper-sm text-ellipsis m-t-xs"><span>{{notification.created_at | date:\'MMM d, y\'}} IST {{notification.created_at | date:\'h:mm a\'}}</span></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><a ng-if="notification.is_admin_read === 1"><span ng-click="$ctrl.showComment(notification.object_id, notification.type)" class="badge bg-success m-l-xs">Viewed</span></a><a ng-if="notification.is_admin_read === 0"><span ng-click="$ctrl.showComment(notification.object_id, notification.type)" class="badge bg-danger m-l-xs">View</span></a></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><a ng-if="notification.is_admin_read === 1"><span ng-click="$ctrl.markRead(notification.object_id, notification.type)" class="badge bg-success m-l-xs">ReadDone</span></a><a ng-if="notification.is_admin_read === 0"><span ng-click="$ctrl.markRead(notification.object_id, notification.type)" class="badge bg-danger m-l-xs">MarkRead</span></a></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadNotifications() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div></div>'),a.put("app/routes/orders/index/index.html",'<div><div class=hbox><div><div class="wrapper-md bg-white-only"><ul role=tablist class="nav nav-tabs"><li ng-class="$ctrl.ps ? &quot;order-menu-active&quot; : &quot;&quot;"><a ng-class="$ctrl.ps ? &quot;order-menu-active&quot; : &quot;&quot;" ui-sref="orders.index({ bucket: bucket, type: &quot;assisted_purchased&quot; })">Assisted Purchase</a></li><li ng-class="$ctrl.cod ? &quot;order-menu-active&quot; : &quot;&quot;"><a ng-class="$ctrl.cod ? &quot;order-menu-active&quot; : &quot;&quot;" ui-sref="orders.index({ bucket: bucket, type: &quot;self_purchased&quot; })">Self Purchase</a></li></ul><div class=clearfix></div></div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="orders.index({ bucket: bucket })" ng-bind=bucket ng-hide="bucket == \'Bookmarked\' &amp;&amp; App.app.settings.isAdmin"></a></li></ul></div><div style="position: fixed; right: 0;background: #fff; z-index: 3;width:30%" class="wrapper-xs bg-light"><div ng-if=$ctrl.orders.length class="pull-right col m-r-xs m-t-xs">{{$ctrl.orders.length}} of {{$ctrl.total}} orders(s)</div><div ng-click=$ctrl.ExcelDownload.download($ctrl.params) class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default hide"><span class="fa fa-file-excel-o"></span></button></div><div ng-click=$ctrl.openOrderFilter() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-filter"></span></button></div><div class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm btn-default">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></div><div ng-if="$ctrl.$stateParams.sid == $ctrl.orders[0].state_id &amp;&amp; $ctrl.totalSelectedOrders" class="pull-right col pointer m-r-xs"><div ng-class="{&quot;col-xs-3&quot;: !$ctrl.isAdmin}" class="col-xs-3 m-t-xs"><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=w-full><button uib-dropdown-toggle="" style="text-align:left;padding: 2px 8px;width:auto" ng-disabled="App.orderStates[$ctrl.orders[0].state_id].Actions.length===0 || ($ctrl.orders[0].state_id === 43 &amp;&amp; !!$ctrl.prescreen)" title={{$ctrl.orders[0].state_name}} class="text-ellipsis btn bg-white-only b-{{App.orderStates[$ctrl.orders[0].state_id].config.color || &quot;gray&quot;}} text-{{App.orderStates[$ctrl.orders[0].state_id].config.color || &quot;gray&quot;}}"><span ng-bind=App.orderStates[$ctrl.orders[0].state_id].action class=m-r-xs></span><span ng-if="App.orderStates[$ctrl.orders[0].state_id].Actions.length &gt; 0" class=caret></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.orderStates[$ctrl.orders[0].state_id].Actions" ng-if=App.orderStates[state.state_id].action><a href="" ng-click="$ctrl.proceedToStateChange($ctrl.orders, state.state_id)" ng-bind=::App.orderStates[state.state_id].action></a></li></ul></div></div></div></div></div><div style="padding-bottom: 4px" class=m-t-xl></div><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr><th class=col-xs-1><div ng-if=$ctrl.$stateParams.sid class="checkbox no-margin"><label class=i-checks><input type=checkbox ng-model=all ng-checked=$ctrl.allChecked ng-click=$ctrl.selectAllOrders(all)><i></i></label></div></th><th class=col-xs-1>ID</th><th class=col-xs-2>Store</th><th class=col-xs-2>Name</th><th class=col-xs-1>Locker</th><th class=col-xs-2>Updated</th><th class=col-xs-3>Status</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.orders.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Orders</h1></td></div><div ng-repeat="order in $ctrl.orders" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><div ng-if=$ctrl.$stateParams.sid class="checkbox no-margin"><label class=i-checks><input type=checkbox ng-model=order.isChecked ng-change=$ctrl.selectOrders()><i></i></label></div></div><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><a ui-sref="order.show({ id: order.order_code, profilePhotoUrl: order.Customer.profile_photo_url })" target=_blank>{{order.id}}</a></div><div class="col-xs-2 wrapper-sm m-t-xs"><a ui-sref="order.show({ id: order.order_code, profilePhotoUrl: order.Customer.profile_photo_url })" target=_blank>{{order.Store.name}}<!--span.badge.bg-success.m-l-xs(ng-if=\'order.content_type === "2"\') SPECIAL--><!--span.badge.bg-danger.m-l-xs(ng-if=\'order.damaged\') DAMAGED--></a></div><div ng-bind=order.Customer.name title={{order.Customer.name}} class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"></div><div title="{{order.Customer.virtual_address_code + \' (\'+order.Customer.Locker.short_name+ \')\'}}" class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><span ng-bind=order.Customer.virtual_address_code></span></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><span>{{order.updated_at | date:\'MMM d, y\'}} IST {{order.updated_at | date:\'h:mm a\'}}</span></div><div ng-class="{&quot;col-xs-3&quot;: !$ctrl.isAdmin}" class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=w-full><button uib-dropdown-toggle="" style="text-align:left;padding: 2px 8px;width:auto" ng-disabled="App.orderStates[order.state_id].Actions.length===0 || (order.state_id === 43 &amp;&amp; !!$ctrl.prescreen)" title={{order.state_name}} class="text-ellipsis btn bg-white-only b-{{App.orderStates[order.state_id].config.color || &quot;gray&quot;}} text-{{App.orderStates[order.state_id].config.color || &quot;gray&quot;}}"><span ng-bind=App.orderStates[order.state_id].action class=m-r-xs></span><span ng-if="App.orderStates[order.state_id].Actions.length &gt; 0" class=caret></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.orderStates[order.state_id].Actions" ng-if=App.orderStates[state.state_id].action><a href="" ng-click="$ctrl.ChangeOrderState.open(order, (order._root_.is_drive &amp;&amp; order.state_id === 44) ? 12 : state.state_id, order._root_.id)" ng-bind=::App.orderStates[state.state_id].action></a></li></ul></div></div><div ng-if=$ctrl.isAdmin class="col-xs-1 wrapper-sm m-t-xs"><div class=w-full><span style="border: 1px solid #aaa" ng-bind=order.owner_name title={{order.owner_name_full}} class="b-a m-r-xs pointer pull-left text-xs text-center btn-circle m-b-xs m-l-sm"></span></div></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadOrders() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div></div>'),a.put("app/routes/orders/show/show.html",'<div id=packageShow class="hbox accounts"><div class="col bg-white-only w-md b-r"><div style="width: 93%" class="wrapper-xs m-sm"><div class=pull-right><a style="width: 2em" class="col v-middle"></a><a ng-show="-1 !== $ctrl.editAllowedStates.indexOf($ctrl.data.state_id)" ui-sref="order.update({ id: $ctrl.data.order_code })" style="width: 2em" class="col v-middle"><i title="Edit Order" class="m-t-sm wrapper-xs fa fa-edit"></i></a><div uib-dropdown="" class="col hide v-middle"><a href="" style="width: 2em"><i uib-dropdown-toggle="" class="m-t-sm wrapper-xs fa fa-ellipsis-v"></i></a><ul uib-dropdown-menu="" role=menu aria-labelledby=single-button style="right: -35px; left: auto" class="m-r-xl dropdown-menu"><li role=menuitem title="Send package details to customer"><a ng-click=$ctrl.sendNotificaton() target=_blank class="col v-middle">Send Notification</a></li></ul></div></div><div class="wrapper-xs v-middle"><div title={{$ctrl.data.Store.name}} class="h4 wrapper-xs text-ellipsis text-dark"><i name=package_confirm title="Package Confirm" ng-if="1 || $ctrl.data.package_confirmed" class="fa fa-check-circle-o m-r-xs text-success"></i><span ng-bind=$ctrl.data.Store.name></span></div></div><div class=m-l-sm><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=hbox><button uib-dropdown-toggle="" ng-disabled="App.orderStates[$ctrl.data.state_id].Actions.length===0" class="btn btn-sm padder rounded btn-{{App.orderStates[$ctrl.data.state_id].config.color}}"><span ng-bind=App.orderStates[$ctrl.data.state_id].action class=m-r-xs></span><span ng-if=App.orderStates[$ctrl.data.state_id].Actions.length&gt;0 class=caret></span></button><ul uib-dropdown-menu=uib-dropdown-menu role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.orderStates[$ctrl.data.state_id].Actions" ng-if=App.orderStates[state.state_id].action><a href="" ng-click="$ctrl.ChangeOrderState.open($ctrl.data, state.state_id, $ctrl.data.Customer.id)" ng-bind=::App.orderStates[state.state_id].action></a></li></ul></div></div><div title="Interview Time" ng-if="$ctrl.data._root_.is_drive &amp;&amp; $ctrl.data.interview_time" class="m-l-sm m-t-xs"><i class="fa fa-calendar m-r-sm"></i><span ng-bind="$ctrl.data.created_at | date : \'MMM d, yyyy\'" class="text-md text-primary"></span></div></div><div ng-if=$ctrl.data.comments ng-show=$ctrl.data.summary class="wrapper-xs m-l-sm"><div style="width: 97%" class=hbox><div class=row><div class="wrapper-xs sticky-note"><div style="width: 97%" class="wrapper-xs sticky-heading"><div ng-bind=$ctrl.data.summary ng-class="{ &quot;show&quot;: !$ctrl.ui.show }"></div><a ng-click="$ctrl.ui.show = !$ctrl.ui.show" ng-bind="$ctrl.ui.show ? &quot;Show Less&quot; : &quot;Show More&quot;" ng-show="$ctrl.data.summary.length &gt; 100" class="pull-right wrapper-xs"></a></div></div></div></div></div><div class="wrapper-xs m-l-sm m-t-sm b-t"><uib-tabset active=activeTab><uib-tab index=0 heading=Info><div class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-cubes text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Number of Items</a><div ng-bind="$ctrl.data.OrderItems.length ||0"></div></div></div><div class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-cubes text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Total Quantity</a><div ng-bind=$ctrl.data.total_quantity></div></div></div><div ng-if=$ctrl.data.price_amount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Total Price</a><div><span ng-bind=$ctrl.data.price_amount></span></div></div></div><div ng-if=$ctrl.data.personal_shopper_cost class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Personal Shopper Fee</a><div><span ng-bind=$ctrl.data.personal_shopper_cost></span></div></div></div><div ng-if=$ctrl.data.delivery_charge class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Delivery Charges</a><div><span ng-bind=$ctrl.data.delivery_charge></span></div></div></div><div ng-if=$ctrl.data.sales_tax class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Sales Tax</a><div><span ng-bind=$ctrl.data.sales_tax></span></div></div></div><div ng-if=$ctrl.data.amount_paid class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Amount Paid To The Website</a><div><span ng-bind=$ctrl.data.amount_paid></span></div></div></div><div ng-if=$ctrl.data.buy_if_price_changed class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">If Price Changed</a><div><span ng-bind=$ctrl.data.buy_if_price_changed></span></div></div></div><div ng-if=$ctrl.data.is_cod_payment class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Is Cod Payment</a><div><span ng-if="$ctrl.data.is_cod_payment === true">YES</span><span ng-if="$ctrl.data.is_cod_payment === false">NO</span></div></div></div><div ng-if=$ctrl.transactions[0].PaymentGateway.value class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-money text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Payment Method</a><div><span ng-bind=$ctrl.transactions[0].PaymentGateway.value></span></div></div></div><div ng-if="$ctrl.transactions[0].payment_gateway_fee_amount &amp;&amp; [&quot;success&quot;, &quot;pending&quot;].includes($ctrl.transactions[0].payment_status)" class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Payment Gateway Fee</a><div><span ng-bind=$ctrl.transactions[0].payment_gateway_fee_amount></span></div></div></div><div ng-if="$ctrl.transactions[0].final_amount &amp;&amp; [&quot;success&quot;, &quot;pending&quot;].includes($ctrl.transactions[0].payment_status)" class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Final Amount</a><div><span ng-bind=$ctrl.transactions[0].final_amount></span></div></div></div><div ng-if="$ctrl.data.transaction_id &amp;&amp; [&quot;success&quot;, &quot;pending&quot;].includes($ctrl.transactions[0].payment_status)" class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Transaction Id</a><div><span ng-bind=$ctrl.data.transaction_id></span></div></div></div><div ng-if="$ctrl.transactions[0].wallet_amount &amp;&amp; [&quot;success&quot;, &quot;pending&quot;].includes($ctrl.transactions[0].payment_status)" class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Wallet Amount</a><div><span ng-bind=$ctrl.transactions[0].wallet_amount></span></div></div></div><div ng-if=$ctrl.transactions[0].discount_amount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-money text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Discount Amount</a><div><span ng-bind=$ctrl.transactions[0].discount_amount></span></div></div></div><div ng-if="$ctrl.transactions[0].object_id &amp;&amp; [&quot;success&quot;, &quot;pending&quot;].includes($ctrl.transactions[0].payment_status)" class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">ObjectId</a><div><span ng-bind=$ctrl.transactions[0].object_id></span></div></div></div><div class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">OrderPackageId</a><div><span ng-bind=$ctrl.data.id></span></div></div></div><div uib-tooltip="{{$ctrl.data.created_at | date:\'MMM d, y\'}} IST {{$ctrl.data.created_at | date:\'h:mm a\'}}" tooltip-placement=right tooltip-append-to-body=true class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-clock-o text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Date & Time of Created</a><div><span ng-bind=$ctrl.moment($ctrl.data.created_at).fromNow()></span></div></div></div></uib-tab><uib-tab index=1 heading="Promo details"><div ng-if=$ctrl.data.promo_code class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Promo Code</a><div><span ng-bind=$ctrl.data.promo_code></span></div></div></div><div ng-if=$ctrl.data.promo_discount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Promo Discount</a><div><span ng-bind=$ctrl.data.promo_discount></span></div></div></div><div ng-if=$ctrl.data.promo_info class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Promo Info</a><div><span ng-bind=$ctrl.data.promo_info></span></div></div></div><div ng-if=$ctrl.data.instruction class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Instruction</a><div><span ng-bind=$ctrl.data.instruction></span></div></div></div><div ng-if=$ctrl.data.if_promo_unavailable class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">If Promo Unavailable</a><div><span ng-bind=$ctrl.data.if_promo_unavailable></span></div></div></div></uib-tab><uib-tab index=2 heading=Docs><div ng-show=$ctrl.data.seller_invoice class=col-md-6><h4>Order invoice</h4><a href={{$ctrl.data.seller_invoice}} target=_blank><img ng-src={{$ctrl.data.seller_invoice}} style="height: 80px;width: 80px" class="pull-left m-r"></a></div></uib-tab></uib-tabset></div></div><div class=col><div><div class=hbox><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="orders.index({ bucket: bucket })" ng-bind=bucket ng-hide="bucket == \'Bookmarked\' &amp;&amp; App.app.settings.isAdmin"></a></li></ul></div><div style="position: fixed; right: 0;background: #fff; z-index: 3;width:30%" class="wrapper-xs bg-light"><div ng-if=$ctrl.orders.length class="pull-right col m-r-xs m-t-xs">{{$ctrl.orders.length}} of {{$ctrl.total}} Orders(s)</div><div ng-click=$ctrl.ExcelDownload.download($ctrl.params) class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-file-excel-o"></span></button></div><div ng-click=$ctrl.openPackageFilter() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-filter"></span></button></div><div class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm btn-default">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></div></div><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"></customer-header></div></div><div style="padding-top: 35px" class="m-t-l m-b-md"><div style="width: 125%" class=wrapper-md><div ng-repeat="orderItem in $ctrl.orderItems" class="m-t-sm hbox"><div ng-class="orderItem.status === &quot;addedtopackage&quot; ? &quot;bg-grey&quot; : &quot;&quot;" class="col bg-white b-a"><div class="col-xs-12 col-md-8 no-padder"><div class="tl-content padder w-full w-auto-xs"><div class=row><div class="col-xs-3 text-ellipsis"><i></i><strong class=text-primary-lt>SN-</strong><a ng-href={{orderItem.url}} ng-bind=$index target=_blank class=text-danger></a></div><div class="col-xs-9 text-ellipsis"><i></i><strong class=text-primary-lt>{{$ctrl.data.order_code}}-{{orderItem.id}}</strong></div><div class="col-xs-6 text-ellipsis"><i></i><strong class=text-primary-lt>URL -</strong><a ng-href="{{$ctrl.URLS.WWW}}/cuelink?product_id={{orderItem.id}}" ng-bind=orderItem.url target=_blank class=text-danger></a></div><div ng-if=orderItem.received_date class="col-xs-6 text-ellipsis"><i></i><strong class=text-primary-lt>{{orderItem.received_date | date:\'MMM d, y\'}} &nbsp; &nbsp; {{orderItem.received_date | date:\'h:mm a\'}}</strong></div></div><div class=m-b-sm></div><div class="panel-body pull-in b-t wrapper-xs"><div ng-show=orderItem.name class="col-xs-12 text-ellipsis"><span class=text-blue>Name - &nbsp;</span><strong>{{orderItem.name}}</strong></div><div ng-show=orderItem.price_amount class="col-xs-6 text-ellipsis"><span class=text-blue>Price Amount - &nbsp;</span><strong>Rs. {{orderItem.price_amount}}</strong></div><div ng-show=orderItem.total_amount class="col-xs-6 text-ellipsis"><span class=text-blue>Total Amount - &nbsp;</span><strong>Rs. {{orderItem.total_amount}}</strong></div><div ng-show=orderItem.quantity class="col-xs-4 text-ellipsis"><span class=text-blue>Quantity - &nbsp;</span><strong>{{orderItem.quantity}}</strong></div><div ng-show=orderItem.color class="col-xs-4 text-ellipsis"><span class=text-blue>Color - &nbsp;</span><strong>{{orderItem.color}}</strong></div><div ng-show=orderItem.size class="col-xs-4 text-ellipsis"><span class=text-blue>Size - &nbsp;</span><strong>{{orderItem.size}}</strong></div><div ng-show=orderItem.if_item_unavailable class="col-xs-12 text-ellipsis"><span class=text-blue>If Item Unavailable - &nbsp;</span><strong>{{orderItem.if_item_unavailable}}</strong></div><div ng-show=orderItem.note class="col-xs-12 text-ellipsis"><span class=text-blue>Note - &nbsp;</span><strong>{{orderItem.note}}</strong></div><div ng-if="orderItem.status === &quot;addedtopackage&quot;" class="col-xs-5 text-ellipsis"><span class=text-blue>Track Package - &nbsp;<a ui-sref="package.show({ id: orderItem.package_reference_id })" target=_blank class=text-danger>{{orderItem.package_reference_id}}</a></span></div><div ng-show=orderItem.ps_total_quantity class="col-xs-3 text-ellipsis"><span class=text-blue>CQty - &nbsp;</span><strong>{{orderItem.ps_total_quantity}}</strong></div><div ng-show=orderItem.ps_total_price class="col-xs-4 text-ellipsis"><span class=text-blue>CPrice - &nbsp;</span><strong>{{orderItem.ps_total_price}}</strong></div><div ng-show=orderItem.PackageItemCategory.name class="col-xs-5 text-ellipsis"><span class=text-blue>Category - &nbsp;</span><strong>{{orderItem.PackageItemCategory.name}}</strong></div></div></div></div><div class="col-xs-12 col-md-2 no-padder"><div class="m-none wrapper-lg w-full w-auto-xs"><div class=clearfix><label ng-if="orderItem.status !== &quot;addedtopackage&quot;"><select ng-model=orderItem.status name=itemStatus.name ng-options="itemStatus.id as itemStatus.name for itemStatus in $ctrl.itemStatus"></select></label><label ng-if="orderItem.status === &quot;addedtopackage&quot;"><select ng-model=orderItem.status name=status.name ng-options="status.id as status.name for status in $ctrl.status" ng-disabled="orderItem.status === &quot;addedtopackage&quot;"></select></label></div></div><div class=m-b-sm><div class="col-xs-12 text-ellipsis"><label class="col-xs-12 input-group">Item Category<span class=text-danger>*</span><input id=PackageItemCategory name=store_id ng-model=$ctrl.PackageItemCategory.model placeholder="eg: Jeans" uib-typeahead="packageItemCategory.name for packageItemCategory in $ctrl.PackageItemCategory.get($viewValue)" typeahead-loading=$ctrl.PackageItemCategory.loadingStore typeahead-no-results=$ctrl.PackageItemCategory.noResults typeahead-on-select=$ctrl.PackageItemCategory.select($item) ng-blur=$ctrl.PackageItemCategory.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><i ng-show=$ctrl.PackageItemCategory.loadingStore class="fa fa-refresh fa-spin m-l-xs"></i><div ng-show=$ctrl.PackageItemCategory.noResults><i class="fa fa-remove"></i> No Results Found</div></label></div></div><div class=m-b-sm><div class="panel-body pull-in wrapper-xs"><div ng-if="orderItem.status === &quot;pricechanged&quot;" class="col-xs-12 text-ellipsis"><label class="col-xs-12 input-group">Price Change Amount<span class=text-danger>*</span><input type=number name=item_price_change placeholder="eg. 900" ng-model=$ctrl.data.item_price_change class="form form-control"></label></div><div ng-show=orderItem.item_price_change class="col-xs-12 text-ellipsis"><span class=text-blue>PC: &nbsp;</span><strong>{{orderItem.item_price_change}}</strong></div></div></div></div><div class="col-xs-12 col-md-2 no-padder"><div class="m-none wrapper-lg w-full w-auto-xs"><button type=submit ng-click="$ctrl.updateItem(orderItem.id, orderItem.status, $ctrl.data.item_price_change, $ctrl.data.category_id)" class="col-xs-12 btn btn-sm btn-success m-b-xs text-u-c">Save</button><div ng-if="orderItem.status === &quot;recieved&quot;" class="checkbox no-margin col-xs-5"><label class=i-checks><input type=checkbox ng-model=orderItem.isChecked ng-change=$ctrl.selectItems() ng-checked=all><i></i></label></div></div></div></div></div><div class=clearfix><form name=createForm novalidate ng-submit=$ctrl.createItem(createForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class="col-xs-12 col-md-12 text-ellipsis"><label class="col-xs-6 col-md-2 input-group m-r pull-right">Barcode Number {{$ctrl.barcodeNumber}}<span class=text-danger>*</span><input name=barcode_number placeholder="eg. 900" ng-model=$ctrl.data.barcode_number required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; createForm.barcode_number.$dirty &amp;&amp; createForm.barcode_number.$invalid" class="wrapper-xs text-xs text-danger">Please enter barcode</span></label></div><div style="padding-top: 10px" class="col-xs-12 col-md-12 text-ellipsis pull-right"><button type=submit ng-disabled="$ctrl.submitting || $ctrl.totalSelectedItems === 0" class="col-xs-6 col-md-2 btn btn-sm btn-success m-b-xs text-u-c m-r pull-right"><span ng-if=!$ctrl.submitting class=text-white>Create Package</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></form><div class=clearfix></div></div></div></div></div><div class=col-md-3><div class="nav-comment col-md-4 bg-white-only no-padder"><span style="padding: 10px;z-index:1; position:absolute; right:0" title={{$ctrl.chatHoverText()}} ng-click=App.initiateChat($ctrl.data) class=bg-info><img src=assets/images/chat.32985cff.png height=20px width="20px"></span><comments id={{$ctrl.data.id}} data=$ctrl.data type=&quot;order&quot;></comments></div></div></div>'),a.put("app/routes/orders/update/update.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class=m-t-lg></div><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3">Edit Order<ul class="nav nav-pills nav-sm pull-right"><li class="m-r-xs pull-right"><a ui-sref="order.show({ id: $ctrl.$stateParams.id })" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span class="fa fa-backward"></span><span>Go Back</span></a></li></ul></div></div><form name=orderForm novalidate ng-submit=$ctrl.update(orderForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=col-md-7><div class=row><div class=col-md-12><input type=hidden ng-bind="$ctrl.data.store_id &amp;&amp; $ctrl.data.store_id"><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Seller Name<span class=text-danger>*</span><input name=store_id ng-model=$ctrl.data.Store.name placeholder="eg. amazon" disabled class="form form-control"></label></div><input type=hidden ng-bind="$ctrl.data.price_amount &amp;&amp; $ctrl.data.price_amount"><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Total Price<span class=text-danger>*</span><input type=number name=price_amount placeholder="eg. 900" ng-model=$ctrl.data.price_amount disabled class="form form-control"></label></div></div></div><div class=row><div class=col-md-12><input type=hidden ng-bind="$ctrl.data.sales_tax &amp;&amp; $ctrl.data.sales_tax"><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Sales Tax<span class=text-danger>*</span><input type=number name=sales_tax placeholder="eg. 900" ng-model=$ctrl.data.sales_tax disabled class="form form-control"></label></div><input type=hidden ng-bind="$ctrl.data.delivery_charge &amp;&amp; $ctrl.data.delivery_charge"><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Delivery Charge<span class=text-danger>*</span><input type=number name=delivery_charge placeholder="eg. 900" ng-model=$ctrl.data.delivery_charge disabled class="form form-control"></label></div></div></div><div class=row><div class=col-md-12><input type=hidden ng-bind="$ctrl.data.personal_shopper_cost &amp;&amp; $ctrl.data.personal_shopper_cost"><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Personal Shopper Fee<span class=text-danger>*</span><input type=number name=personal_shopper_cost placeholder="eg. 900" ng-model=$ctrl.data.personal_shopper_cost disabled class="form form-control"></label></div><input type=hidden ng-bind="$ctrl.data.sub_total &amp;&amp; $ctrl.data.sub_total"><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Sub Total<span class=text-danger>*</span><input type=number name=sub_total placeholder="eg. 900" ng-model=$ctrl.data.sub_total disabled class="form form-control"></label></div></div></div><div class=row><div class=col-md-12><input type=hidden ng-bind="$ctrl.data.total_quantity &amp;&amp; $ctrl.data.total_quantity"><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Total Quantity<span class=text-danger>*</span><input type=number name=total_quantity placeholder="eg. 900" ng-model=$ctrl.data.total_quantity disabled class="form form-control"></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Amount Paid To The Website<span class=text-danger>*</span><input type=number name=amount_paid placeholder="eg. 900" ng-model=$ctrl.data.amount_paid required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; orderForm.amount_paid.$dirty &amp;&amp; orderForm.amount_paid.$invalid" class="wrapper-xs text-xs text-danger">Please Amount Paid To The Website.row</span></label></div></div><div class=col-md-12><input type=hidden ng-bind="$ctrl.data.website_charges_price_change &amp;&amp; $ctrl.data.website_charges_price_change"><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Website Charges Price Change<span class=text-danger>*</span><input type=number name=website_charges_price_change placeholder="eg. 900" ng-model=$ctrl.data.website_charges_price_change disabled class="form form-control"></label></div><input type=hidden ng-bind="$ctrl.data.ps_fee_price_change &amp;&amp; $ctrl.data.ps_fee_price_change"><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">PS Fee Price Change<span class=text-danger>*</span><input type=number name=ps_fee_price_change placeholder="eg. 900" ng-model=$ctrl.data.ps_fee_price_change disabled class="form form-control"></label></div><div class="col-md-4 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Credit & Coupon Benifits<span class=text-danger>*</span><input type=number name=credit_coupon_benifits placeholder="eg. 900" ng-model=$ctrl.data.credit_coupon_benifits class="form form-control"></label></div></div></div><div class=row><div class=col-md-12><div class="col-md-5 col-sm-5 col-xs-12"><div class=hbox><label style="cursor: pointer" class=col>Upload Invoice<span class=text-danger>*</span><div ng-class="orderForm.file.$touched &amp;&amp; orderForm.file.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="(orderForm.file.$touched &amp;&amp; orderForm.file.$valid) || $ctrl.data.file"><span ng-bind=$ctrl.file.name class=text-muted></span></span><p ng-hide="(orderForm.file.$touched &amp;&amp; orderForm.file.$valid) || $ctrl.data.file" class=no-margin></p><span ng-hide="(orderForm.file.$touched &amp;&amp; orderForm.file.$valid) || $ctrl.data.file" class=file-support>Supported Formats: .png, .jpeg, .jpg, .bmp, .pdf\'</span><input type=file ng-model=$ctrl.file ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.startInvoiceUpload($ctrl, $ctrl.file)" onclick="this.value = null" ctrl=$ctrl class="form-control"></div></div><span ng-show="$ctrl.clickUpload &amp;&amp; !$ctrl.data.file &amp;&amp; !orderForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose file</span><span ng-show="$ctrl.clickUpload &amp;&amp; orderForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span><span ng-show="$ctrl.clickUpload &amp;&amp; orderForm.file.$dirty &amp;&amp; orderForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span></label></div></div><div class="col-xs-1 wrapper-sm m-t-xs"><img ng-if=$ctrl.data.object_invoice ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.data.object_invoice}}" style="height: 85px;width: 80px" class="pull-left m-r"></div><div style="padding-top: 25px" class="col-md-4 col-sm-5 col-xs-12"><a class=h4>Is Cod Payment</a><br><label><h5>No &nbsp;</h5></label><label class=switch><input type=checkbox ng-model="$ctrl.data.is_cod_payment"><div class="slider round"></div></label><label><h5>&nbsp; Yes</h5></label></div></div></div><div class=row><div class=col-md-8><div ng-if=orderForm.file.$error.maxSize class="text-danger font-bold">Please select file less than 5MB</div></div><div class="col-md-12 col-xs-12"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled="$ctrl.uploadingPhotos || $ctrl.submitting || orderForm.$pristine" class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>Save</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></div></div></div></form></div><div class=clearfix></div></div></div>'),
a.put("app/routes/packages/bulk/bulk.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class="wrapper-md bg-white-only"><form name=newPackageForm novalidate ng-submit=$ctrl.create(newPackageForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=col-md-12><div ng-if="$ctrl.Session.read(\'searchType\') != \'order_code\'" class=row><div class=col-md-12><div class="col-md-4 col-sm-4 col-xs-12"><h4>E-Commerce Site:</h4></div><div class="col-md-5 col-sm-5 col-xs-12"><input name=store_id ng-model=$ctrl.Store.model placeholder="eg: Flipkart" uib-typeahead="store.name for store in $ctrl.Store.get($viewValue)" typeahead-loading=$ctrl.Store.loadingStore typeahead-no-results=$ctrl.Store.noResults typeahead-on-select=$ctrl.Store.select($item) ng-blur=$ctrl.Store.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.store_id.$dirty &amp;&amp; newPackageForm.store_id.$invalid" class="wrapper-xs text-xs text-danger">Please select Store</span><i ng-show=$ctrl.Store.loadingStore class="fa fa-refresh fa-spin m-l-xs"></i><div ng-show=$ctrl.Store.noResults><i class="fa fa-remove"></i> No Results Found</div></div></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><br><div ng-repeat="pkg in $ctrl.data" class=row><div class=col-md-12><div class="col-md-2 col-sm-4"><label>Name</label><input name=name placeholder="eg. Aloak Jawali" ng-model=pkg.name autocomplete=off autofocus disabled class="form form-control"></div><div ng-if="$ctrl.Session.read(\'searchType\') === \'virtual_address_code\'" class="col-md-2 col-sm-4"><label>Virtual Address Code</label><span class=text-danger>*</span><input name=virtual_address_code ng-model=pkg.virtual_address_code placeholder=SHPR20-416 uib-typeahead="customer.virtual_address_code for customer in $ctrl.Customer.get($viewValue)" typeahead-loading=$ctrl.Customer.loadingStore typeahead-no-results=$ctrl.Customer.noResults typeahead-on-select="$ctrl.Customer.select($item, $index)" ng-blur=$ctrl.Customer.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.virtual_address_code.$dirty &amp;&amp; newPackageForm.virtual_address_code.$invalid" class="wrapper-xs text-xs text-danger">Please select Locker</span><div ng-show=$ctrl.Customer.noResults><i class="fa fa-remove"></i> No Results Found</div></div><div ng-if="$ctrl.Session.read(\'searchType\') === \'id\'" class="col-md-2 col-sm-4"><label>Customer Id</label><span class=text-danger>*</span><input name=customer_id ng-model=pkg.customer_id placeholder=2509 uib-typeahead="customer.id for customer in $ctrl.Customer.get($viewValue, $index)" typeahead-loading=$ctrl.Customer.loadingStore typeahead-no-results=$ctrl.Customer.noResults typeahead-on-select="$ctrl.Customer.select($item, $index)" ng-blur=$ctrl.Customer.blur($index) typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.customer_id.$dirty &amp;&amp; newPackageForm.customer_id.$invalid" class="wrapper-xs text-xs text-danger">Please select Customer Id</span><div ng-show=$ctrl.Customer.noResults><i class="fa fa-remove"></i> No Results Found</div></div><div ng-if="$ctrl.Session.read(\'searchType\') === \'order_code\'" class="col-md-2 col-sm-4"><label>PS Order Code</label><span class=text-danger>*</span><input name=order_code ng-model=pkg.order_code placeholder="PS20200517085447 or COD20200517085448" uib-typeahead="order.order_code for order in $ctrl.Order.get($viewValue, $index)" typeahead-loading=$ctrl.Order.loadingStore typeahead-no-results=$ctrl.Order.noResults typeahead-on-select="$ctrl.Order.select($item, $index)" ng-blur=$ctrl.Order.blur($index) typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.order_code.$dirty &amp;&amp; newPackageForm.order_code.$invalid" class="wrapper-xs text-xs text-danger">Please select OrderCode</span><div ng-show=$ctrl.Order.noResults><i class="fa fa-remove"></i> No Results Found</div></div><div class="col-md-2 col-sm-4"><label>Barcode<span class=text-danger>*</span><input name=barcode_number placeholder="eg. 4345622986" ng-model=pkg.barcode_number autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.barcode_number.$dirty &amp;&amp; newPackageForm.barcode_number.$invalid" class="wrapper-xs text-xs text-danger">Please enter valid Barcode Number</span></label></div><div class="col-md-2 col-sm-4"><label>Reference Code<span class=text-danger>*</span><input name=invoice_code placeholder="eg. 7643298N" ng-model=pkg.invoice_code required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.invoice_code.$dirty &amp;&amp; newPackageForm.invoice_code.$invalid" class="wrapper-xs text-xs text-danger">Please enter Invoice Code</span></label></div><div class="col-md-2 col-sm-4"><label>Weight<span class=text-danger>*</span><input type=number name=weight placeholder="eg. 2 or 3" ng-model=pkg.weight required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageForm.weight.$dirty &amp;&amp; newPackageForm.weight.$invalid" class="wrapper-xs text-xs text-danger">Please enter Weight</span></label></div><div style="padding-top: 2%" class=col-md-1-col-sm-2><a ng-click=$ctrl.addItemSame($index)><i style=font-size:25px class="fa fa-plus text-danger"></i></a><a ng-click=$ctrl.removeItem($index) class=m-l><i style=font-size:25px class="fa fa-trash text-danger"></i></a></div></div></div><div class=row><br><div class=col-md-12><span ng-bind=$ctrl.invalidBarcodes ng-if=$ctrl.invalidBarcodes class=text-danger></span></div><div class=col-md-12><div style="padding:10px 0 0 15px" class="col-md-4 col-xs-6"><a ng-click=$ctrl.addItem() class="btn btn-success">Add More Package</a></div><div class="col-md-4 col-xs-6"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled=$ctrl.submitting class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>Update</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></div></div></div></div></form></div><div class=clearfix></div></div></div>'),a.put("app/routes/packages/charges/charges.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class=m-t-lg></div><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3">Update Package Charges<ul class="nav nav-pills nav-sm pull-right"><li class="m-r-xs pull-right"><a ui-sref="package.show({ id: $ctrl.$stateParams.id })" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span class="fa fa-backward"></span><span>Go Back</span></a></li></ul></div></div><form name=chargesForm novalidate ng-submit=$ctrl.updateCharges(chargesForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=col-md-12><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-3 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Additional Storage<span class=text-danger>*</span><input type=number name=storage_amount placeholder="eg. 300" ng-model=$ctrl.data.storage_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.storage_amount.$dirty &amp;&amp; chargesForm.storage_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Storage Amount</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Wrong Address<span class=text-danger>*</span><input type=number name=wrong_address_amount placeholder="eg. 300" ng-model=$ctrl.data.wrong_address_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.wrong_address_amount.$dirty &amp;&amp; chargesForm.wrong_address_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Wrong Address Amount</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Special Item Handling<span class=text-danger>*</span><input type=number name=special_handling_amount placeholder="eg. 300" ng-model=$ctrl.data.special_handling_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.special_handling_amount.$dirty &amp;&amp; chargesForm.special_handling_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Special Items Handling Amount</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Pickup<span class=text-danger>*</span><input type=number name=pickup_amount placeholder="eg. 300" ng-model=$ctrl.data.pickup_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.pickup_amount.$dirty &amp;&amp; chargesForm.pickup_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Pickup Charge Amount</span></label></div></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-3 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Recieve Email<span class=text-danger>*</span><input type=number name=receive_mail_amount placeholder="eg. 300" ng-model=$ctrl.data.receive_mail_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.receive_mail_amount.$dirty &amp;&amp; chargesForm.receive_mail_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Recieve Email Amount</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Basic Photos<span class=text-danger>*</span><input type=number name=standard_photo_amount placeholder="eg. 300" ng-model=$ctrl.data.standard_photo_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.standard_photo_amount.$dirty &amp;&amp; chargesForm.standard_photo_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Basic Photo Amount</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Advanced Photos<span class=text-danger>*</span><input type=number name=advanced_photo_amount placeholder="eg. 300" ng-model=$ctrl.data.advanced_photo_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.advanced_photo_amount.$dirty &amp;&amp; chargesForm.advanced_photo_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Advanced Photo Amount</span></label></div><div class="col-md-3 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Split Package<span class=text-danger>*</span><input type=number name=split_package_amount placeholder="eg. 300" ng-model=$ctrl.data.split_package_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.split_package_amount.$dirty &amp;&amp; chargesForm.split_package_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Split Package Amount</span></label></div></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-3 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Scan Document<span class=text-danger>*</span><input type=number name=scan_document_amount placeholder="eg. 300" ng-model=$ctrl.data.scan_document_amount required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; chargesForm.scan_document_amount.$dirty &amp;&amp; chargesForm.scan_document_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Scan Document Amount</span></label></div></div></div><div class=row><div class="col-md-12 col-xs-12"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled=$ctrl.submitting class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>Update</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div></div></div></div></form></div><div class=clearfix></div></div></div><!--div(ng-show=\'$ctrl.submitting\')--><!--  span(ng-include="\'app/routes/jobs/cv-uploading/cv-uploading.html\'")-->'),a.put("app/routes/packages/index/index.html",'<div><div class=hbox><div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="packages.index({ jobId: $ctrl.job.id, bucket: bucket })" ng-bind=bucket ng-hide="bucket == \'Bookmarked\' &amp;&amp; App.app.settings.isAdmin"></a></li></ul></div><div style="position: fixed; right: 0;background: #fff; z-index: 3;width:30%" class="wrapper-xs bg-light"><div ng-if=$ctrl.packages.length class="pull-right col m-r-xs m-t-xs">{{$ctrl.packages.length}} of {{$ctrl.total}} Packages(s)</div><div ng-click=$ctrl.ExcelDownload.download($ctrl.params) class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default hide"><span class="fa fa-file-excel-o"></span></button></div><div ng-click=$ctrl.openPackageFilter() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-filter"></span></button></div><div class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm btn-default">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></div><div class="pull-right col pointer m-r-xs"><a ui-sref=packages.bulk class="btn btn-sm btn-success"><span>Add Packages</span></a></div><div ng-if="$ctrl.$stateParams.sid == $ctrl.packages[0].state_id &amp;&amp; $ctrl.totalSelectedPackages" class="pull-right col pointer m-r-xs"><div ng-class="{&quot;col-xs-3&quot;: !$ctrl.isAdmin}" class="col-xs-3 m-t-xs"><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=w-full><button uib-dropdown-toggle="" style="text-align:left;padding: 2px 8px;width:auto" ng-disabled="App.states[package.state_id].Actions.length===0 || (package.state_id === 43 &amp;&amp; !!$ctrl.prescreen)" title={{$ctrl.packages[0].state_name}} class="text-ellipsis btn bg-white-only b-{{App.states[$ctrl.packages[0].state_id].config.color || &quot;gray&quot;}} text-{{App.states[$ctrl.packages[0].state_id].config.color || &quot;gray&quot;}}"><span ng-bind=App.states[$ctrl.packages[0].state_id].action class=m-r-xs></span><span ng-if="App.states[$ctrl.packages[0].state_id].Actions.length &gt; 0" class=caret></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.states[$ctrl.packages[0].state_id].Actions" ng-if=App.states[state.state_id].action><a href="" ng-click="$ctrl.proceedToStateChange($ctrl.packages, state.state_id)" ng-bind=::App.states[state.state_id].action></a></li></ul></div></div></div></div></div><div style="padding-bottom: 4px" class=m-t-xl></div><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr><th class=col-xs-1><div ng-if=$ctrl.$stateParams.sid class="checkbox no-margin"><label class=i-checks><input type=checkbox ng-model=all ng-checked=$ctrl.allChecked ng-click=$ctrl.selectAllPackages(all)><i></i></label></div></th><th class=col-xs-1>ID</th><th class=col-xs-2>Store</th><th class=col-xs-2>Name</th><th class=col-xs-1>Locker</th><th class=col-xs-2>Received</th><th class=col-xs-3>Status</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.packages.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Packages</h1></td></div><div ng-repeat="package in $ctrl.packages" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><div ng-if=$ctrl.$stateParams.sid class="checkbox no-margin"><label class=i-checks><input type=checkbox ng-model=package.isChecked ng-change=$ctrl.selectPackages()><i></i></label></div></div><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><a ui-sref="package.show({ id: package.id, profilePhotoUrl: package.Customer.profile_photo_url })" target=_blank>{{package.id}}</a></div><div class="col-xs-2 wrapper-sm m-t-xs"><a ui-sref="package.show({ id: package.id, profilePhotoUrl: package.Customer.profile_photo_url })" target=_blank>{{package.Store.name}}<span ng-if="package.content_type === &quot;2&quot;" class="badge bg-success m-l-xs">SPECIAL</span><span ng-if=package.damaged class="badge bg-danger m-l-xs">DAMAGED</span></a></div><div ng-bind=package.Customer.name title={{package.Customer.name}} class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"></div><div title="{{package.Customer.virtual_address_code + \' (\'+package.Customer.Locker.short_name+ \')\'}}" class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><span ng-bind=package.Customer.virtual_address_code></span></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><span ng-if="package.state_id !== $ctrl.packageStateId.ADDED_SHIPMENT" title="{{package.totalDays}} days" ng-class="package.totalDays &gt; 20 ? \'text-danger\' : \'text-success\'">{{package.created_at | date:\'MMM d, y\'}} IST {{package.created_at | date:\'h:mm a\'}}</span><span ng-if="package.state_id === $ctrl.packageStateId.ADDED_SHIPMENT" title="{{package.totalDays}} days" class=text-success>{{package.created_at | date:\'MMM d, y\'}} IST {{package.created_at | date:\'h:mm a\'}}</span></div><div ng-class="{&quot;col-xs-3&quot;: !$ctrl.isAdmin}" class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=w-full><button uib-dropdown-toggle="" style="text-align:left;padding: 2px 8px;width:auto" ng-disabled="App.states[package.state_id].Actions.length===0 || (package.state_id === 43 &amp;&amp; !!$ctrl.prescreen)" title={{package.state_name}} class="text-ellipsis btn bg-white-only b-{{App.states[package.state_id].config.color || &quot;gray&quot;}} text-{{App.states[package.state_id].config.color || &quot;gray&quot;}}"><span ng-bind=App.states[package.state_id].action class=m-r-xs></span><span ng-if="App.states[package.state_id].Actions.length &gt; 0" class=caret></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.states[package.state_id].Actions" ng-if=App.states[state.state_id].action><a href="" ng-click="$ctrl.ChangeState.open(package, (package._root_.is_drive &amp;&amp; package.state_id === 44) ? 12 : state.state_id, package._root_.id)" ng-bind=::App.states[state.state_id].action></a></li></ul></div></div><div ng-if=$ctrl.isAdmin class="col-xs-1 wrapper-sm m-t-xs"><div class=w-full><span style="border: 1px solid #aaa" ng-bind=package.owner_name title={{package.owner_name_full}} class="b-a m-r-xs pointer pull-left text-xs text-center btn-circle m-b-xs m-l-sm"></span></div></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadPackages() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div></div>'),a.put("app/routes/packages/items/items.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class=m-t-lg></div><div class="wrapper-md bg-white-only"><div><div class="h1 m-l-md font-thin h3">{{$ctrl.EDIT ? \'Edit\' : \'Create\'}} Package Item</div></div><form name=newPackageItemForm novalidate ng-submit=$ctrl.create(newPackageItemForm) autocomplete=off class="form form-validation form-horizontal wrapper-md"><div class=row><div class="col-md-12 col-sm-12 col-xs-12"><div class=col-md-7><div ng-if=!$ctrl.EDIT class="row hide"><div class=col-md-12><ul class=nav><li><label class="i-checks i-checks-sm"><input type=checkbox ng-model=$ctrl.quickMode ng-change="$ctrl.changeMode()"><i></i><div class=hide></div>Quick Mode<div uib-popover="By selecting this Barcode Scanner will with automatically save" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class="col-md-3 col-sm-3 col-xs-3 no-padder-right"><div class=hbox><label class=col>Photo<span class=text-danger>*</span><div ng-class="newPackageItemForm.file.$touched &amp;&amp; newPackageItemForm.file.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="(newPackageItemForm.file.$touched &amp;&amp; newPackageItemForm.file.$valid) || $ctrl.data.file"><span ng-bind=$ctrl.file.name class=text-muted></span></span><p ng-hide="(newPackageItemForm.file.$touched &amp;&amp; newPackageItemForm.file.$valid) || $ctrl.data.file" class=no-margin><span class=text-bold>Choose a file</span> or Drag it here.</p><span ng-hide="(newPackageItemForm.file.$touched &amp;&amp; newPackageItemForm.file.$valid) || $ctrl.data.file" class=file-support>Supported Formats: .png, .jpeg, .jpg, .bmp, .pdf\'</span><input accept=image/* type=file ng-model=$ctrl.file name=file ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.uploadingPhotos=true;" onclick="this.value = null" ng-image-compress=ng-image-compress image=myAwesomeImage ctrl=$ctrl upload-fn=$ctrl.startUpload resize-max-height=1000 resize-max-width=1000 resize-quality=0.7 resize-type=image/jpg required class="form-control"></div></div><span ng-show="$ctrl.clickUpload &amp;&amp; !$ctrl.data.file &amp;&amp; !newPackageItemForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.file.$dirty &amp;&amp; newPackageItemForm.file.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span></label></div></div><div class="col-xs-1 wrapper-sm m-t-xs"><img ng-if=$ctrl.data.object ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.data.object}}" style="height: 85px;width: 80px" class="pull-left m-r"></div><div class="col-md-3 col-sm-3 col-xs-3 no-padder-right"><div class=hbox><label class=col>Advanced Photo<div ng-class="newPackageItemForm.advancedFile.$touched &amp;&amp; newPackageItemForm.advancedFile.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="(newPackageItemForm.advancedFile.$touched &amp;&amp; newPackageItemForm.advancedFile.$valid) || $ctrl.data.advancedFile"><span ng-bind=$ctrl.advancedFile.name class=text-muted></span></span><p ng-hide="(newPackageItemForm.advancedFile.$touched &amp;&amp; newPackageItemForm.advancedFile.$valid) || $ctrl.data.advancedFile" class=no-margin><span class=text-bold>Choose a file</span> or Drag it here.</p><span ng-hide="(newPackageItemForm.advancedFile.$touched &amp;&amp; newPackageItemForm.advancedFile.$valid) || $ctrl.data.advancedFile" class=file-support>Supported Formats: .png, .jpeg, .jpg, .bmp, .pdf\'</span><input accept=image/* type=file ng-model=$ctrl.advancedFile name=advancedFile ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.uploadingPhotos=true;" onclick="this.value = null" ng-image-compress=ng-image-compress image=myAwesomeImage ctrl=$ctrl upload-fn=$ctrl.startAdvancedUpload resize-max-height=1000 resize-max-width=1000 resize-quality=0.7 resize-type=image/jpg class="form-control"></div></div><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.advancedFile.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.advancedFile.$dirty &amp;&amp; newPackageItemForm.advancedFile.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span></label></div></div><div class="col-xs-1 wrapper-sm m-t-xs"><img ng-if=$ctrl.data.object_advanced ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.data.object_advanced}}" style="height: 85px;width: 80px" class="pull-left m-r"></div><div class="col-md-3 col-sm-3 col-xs-3 no-padder-right"><div class=hbox><label class=col>PackageItem Invoice<div ng-class="newPackageItemForm.invoiceFile.$touched &amp;&amp; newPackageItemForm.invoiceFile.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="(newPackageItemForm.invoiceFile.$touched &amp;&amp; newPackageItemForm.invoiceFile.$valid) || $ctrl.data.invoiceFile"><span ng-bind=$ctrl.invoiceFile.name class=text-muted></span></span><p ng-hide="(newPackageItemForm.invoiceFile.$touched &amp;&amp; newPackageItemForm.invoiceFile.$valid) || $ctrl.data.invoiceFile" class=no-margin><span class=text-bold>Choose a file</span> or Drag it here.</p><span ng-hide="(newPackageItemForm.invoiceFile.$touched &amp;&amp; newPackageItemForm.invoiceFile.$valid) || $ctrl.data.invoiceFile" class=file-support>Supported Formats: .png, .jpeg, .jpg, .bmp, .pdf\'</span><input type=file ng-model=$ctrl.invoiceFile ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.startInvoiceUpload($ctrl, $ctrl.invoiceFile)" onclick="this.value = null" ctrl=$ctrl class="form-control"></div></div><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.invoiceFile.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.invoiceFile.$dirty &amp;&amp; newPackageItemForm.invoiceFile.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span></label></div></div><div class="col-xs-1 wrapper-sm m-t-xs"><img ng-if=$ctrl.data.object_invoice ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.data.object_invoice}}" style="height: 85px;width: 80px" class="pull-left m-r"></div></div><div style="margin: 5px 0" ng-if=!$ctrl.EDIT class="line line-dashed b-b line-lg pull-in"></div><div ng-if=!$ctrl.EDIT class=row><div class=col-md-12><label class="col-xs-12 input-group"><div>Categories</div><div ng-repeat="packageItemCategory in $ctrl.packageItemCategories" ng-click="$ctrl.data.package_item_category_id = packageItemCategory.id; $ctrl.PackageItemCategory.model = packageItemCategory.name;$ctrl.focus(&quot;name&quot;);" class="pull-left text-info-dker b-a b-info m-t-xs m-r-xs pointer"><span ng-bind=packageItemCategory.name class=wrapper-xs></span></div></label></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Package Category<span class=text-danger>*</span><input id=PackageItemCategory name=store_id ng-model=$ctrl.PackageItemCategory.model placeholder="eg: Jeans" uib-typeahead="packageItemCategory.name for packageItemCategory in $ctrl.PackageItemCategory.get($viewValue)" typeahead-loading=$ctrl.PackageItemCategory.loadingStore typeahead-no-results=$ctrl.PackageItemCategory.noResults typeahead-on-select=$ctrl.PackageItemCategory.select($item) ng-blur=$ctrl.PackageItemCategory.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.package_category_id.$dirty &amp;&amp; newPackageItemForm.package_category_id.$invalid" class="wrapper-xs text-xs text-danger">Please select PackageItemCategory</span><i ng-show=$ctrl.PackageItemCategory.loadingStore class="fa fa-refresh fa-spin m-l-xs"></i><div ng-show=$ctrl.PackageItemCategory.noResults><i class="fa fa-remove"></i> No Results Found</div></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Name<span class=text-danger>*</span><input name=name placeholder="eg. Blue Saree" ng-model=$ctrl.data.name required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.name.$dirty &amp;&amp; newPackageItemForm.name.$invalid" class="wrapper-xs text-xs text-danger">Please enter name</span></label></div></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-4 col-sm-4 col-xs-12 no-padder"><label class="col-xs-12 input-group">Quantity<span class=text-danger>*</span><input type=number name=quantity placeholder="eg. 3" ng-model=$ctrl.data.quantity required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.quantity.$dirty &amp;&amp; newPackageItemForm.quantity.$invalid" class="wrapper-xs text-xs text-danger">Please enter quantity</span></label></div><div class="col-md-4 col-sm-4 col-xs-12"><label class="col-xs-12 input-group">Size<input name=size placeholder="eg. XS,L" ng-model=$ctrl.data.size class="form form-control"></label></div><div class="col-md-4 col-sm-4 col-xs-12"><label class="col-xs-12 input-group">HSN CODE<input name=hsn_code placeholder="eg. 13245" ng-model=$ctrl.data.hsn_code class="form form-control"></label></div></div></div><div style="margin: 5px 0" class="line line-dashed b-b line-lg pull-in"></div><div class=row><div class=col-md-12><div class="col-md-6 col-sm-5 col-xs-12 no-padder"><label class="col-xs-12 input-group">Price Per Unit<span class=text-danger>*</span><input type=number name=price_amount placeholder="eg. 300" ng-model=$ctrl.data.price_amount ng-change=$ctrl.amount(&quot;price&quot;) required class="form form-control"><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.price_amount.$dirty &amp;&amp; newPackageItemForm.price_amount.$invalid" class="wrapper-xs text-xs text-danger">Please enter Price</span></label></div><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Total Price<span class=text-danger>*</span><input type=number name=total_amount placeholder="eg. 900" ng-model=$ctrl.data.total_amount ng-change=$ctrl.amount(&quot;total&quot;) required class="form form-control"></label></div></div></div><div class=row><div class="col-md-6 col-sm-5 col-xs-12"><label class="col-xs-12 input-group">Ecommerce Link<span></span><input name=ecommerce_link placeholder="eg. https://www.amazon.in/Redmi-Note-Pro-Black-Storage" ng-model=$ctrl.data.ecommerce_link class="form form-control"></label></div><div class="col-md-5 col-sm-5 col-xs-5 no-padder-right"><div class=hbox><label class=col>Ecommerce Photo<span><input accept=image/* type=file ng-model=$ctrl.ecommerceFile name=ecommerceFile ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.uploadingPhotos=true;" onclick="this.value = null" ng-image-compress=ng-image-compress image=myAwesomeImage ctrl=$ctrl upload-fn=$ctrl.startEcommerceUpload resize-max-height=1000 resize-max-width=1000 resize-quality=0.7 resize-type=image/jpg class="form-control"></span><span ng-show="$ctrl.clickUpload &amp;&amp; !$ctrl.data.ecommerceFile &amp;&amp; !newPackageItemForm.ecommerceFile.$invalid" class="wrapper-xs text-xs text-danger">Please choose file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.ecommerceFile.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span><span ng-show="$ctrl.clickUpload &amp;&amp; newPackageItemForm.ecommerceFile.$dirty &amp;&amp; newPackageItemForm.ecommerceFile.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span></label></div></div><div class="col-xs-1 wrapper-sm m-t-xs"><img ng-if=$ctrl.data.object_ecommerce ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.data.object_ecommerce}}" style="height: 85px;width: 80px" class="pull-left m-r"></div></div><div ng-if=!$ctrl.EDIT class=row><div class=col-md-12><ul class=nav><li><label class="i-checks i-checks-sm"><input type=checkbox ng-model=$ctrl.isPrint ng-change="$ctrl.changePrintMode()"><i></i><div class=hide></div>Do You want Print</label></li></ul></div></div><div class=row><div class=col-md-8><div ng-if=newPackageItemForm.file.$error.maxSize class="text-danger font-bold">Please select file less than 5MB</div></div><div class="col-md-12 col-xs-12"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled="$ctrl.uploadingPhotos || $ctrl.submitting || newPackageItemForm.$pristine" class="btn btn-success"><span class="fa fa-forward m-r-sm"></span><span ng-if=!$ctrl.submitting class=text-white>{{$ctrl.uploadingPhotos ? \'Uploading Photo...\' : \'Save\' }}</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button><button type=button ng-click=$ctrl.personalShopperPrint() ng-if=$ctrl.EDIT ng-disabled=newPackageItemForm.$pristine class="btn btn-success m-l"><span class="fa fa-forward m-r-sm"></span><span class=text-whitePrint>Print Barcode</span></button><a ng-click=$ctrl.open() class="btn btn success">Create Category</a></div></div></div></div></div></form></div><div class=clearfix></div></div></div><!--div(ng-show=\'$ctrl.submitting\')--><!--  span(ng-include="\'app/routes/jobs/cv-uploading/cv-uploading.html\'")-->'),
a.put("app/routes/packages/packageVerification/packageVerification.html",'<div class="hbox m-t"><div style="min-height: 500px" class="bg-white-only b-b container"><div class="row m-l m-t"><h2 class=text-center><u>Package Verification</u></h2></div><div class="row m-l m-t"><h4>Date:&nbsp;<span ng-bind="$ctrl.moment($ctrl.packages[0].created_at).format(&quot;DD-MM-YYYY HH:mm:ss&quot;)"></span></h4><h4>From:&nbsp;<span>{{$ctrl.packages[0].Store.name}}</span></h4></div><div class="row m-ls"><table style=width:100%><thead><tr><th class=text-md>PackageId</th><th class=text-md>Customer Name</th><th class=text-md>Locker Number</th><th class=text-md>Reference Number</th></tr></thead><tbody><tr ng-repeat="pkg in $ctrl.packages"><td class=text-md>{{ pkg.id }}</td><td class=text-md>{{ pkg.Customer.first_name }} {{ pkg.Customer.last_name }}</td><td class=text-md>{{ pkg.Customer.virtual_address_code }}</td><td class=text-md>{{ pkg.invoice_code }}</td></tr></tbody></table></div><div class="row pull-right m-r m-b"><h4><strong>Signature</strong><h4>(Delivery Boy)</h4></h4></div></div></div>'),a.put("app/routes/packages/show/show.html",'<div id=packageShow class="hbox accounts"><div class="col bg-white-only w-md b-r"><div style="width: 93%" class="wrapper-xs m-sm"><div class=pull-right><a style="width: 2em" class="col v-middle"></a><a ng-show="-1 !== $ctrl.editAllowedStates.indexOf($ctrl.data.state_id)" ui-sref="customer.package.update({ id: $ctrl.data.Customer.id, packageId: $ctrl.data.id })" style="width: 2em" class="col v-middle"><i title="Edit Package" class="m-t-sm wrapper-xs fa fa-edit"></i></a><a ng-show="-1 !== $ctrl.editAllowedStates.indexOf($ctrl.data.state_id)" ng-click=$ctrl.deletePackage($ctrl.$stateParams.id) style="width: 2em" class="col v-middle"><i title="Delete Package" class="m-t-sm wrapper-xs fa fa-trash"></i></a><div uib-dropdown="" class="col hide v-middle"><a href="" style="width: 2em"><i uib-dropdown-toggle="" class="m-t-sm wrapper-xs fa fa-ellipsis-v"></i></a><ul uib-dropdown-menu="" role=menu aria-labelledby=single-button style="right: -35px; left: auto" class="m-r-xl dropdown-menu"><li role=menuitem title="Send package details to customer"><a ng-click=$ctrl.sendNotificaton() target=_blank class="col v-middle">Send Notification</a></li></ul></div></div><div class="wrapper-xs v-middle"><div title={{$ctrl.data.Store.name}} class="h4 wrapper-xs text-ellipsis text-dark"><i name=package_confirm title="Package Confirm" ng-if="1 || $ctrl.data.package_confirmed" class="fa fa-check-circle-o m-r-xs text-success"></i><span ng-bind=$ctrl.data.Store.name></span></div></div><div class=m-l-sm><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=hbox><button uib-dropdown-toggle="" ng-disabled="App.states[$ctrl.data.state_id].Actions.length===0" class="btn btn-sm padder rounded btn-{{App.states[$ctrl.data.state_id].config.color}}"><span ng-bind=App.states[$ctrl.data.state_id].action class=m-r-xs></span><span ng-if=App.states[$ctrl.data.state_id].Actions.length&gt;0 class=caret></span></button><ul uib-dropdown-menu=uib-dropdown-menu role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.states[$ctrl.data.state_id].Actions" ng-if=App.states[state.state_id].action><a href="" ng-click="$ctrl.ChangeState.open($ctrl.data, state.state_id, $ctrl.data.Customer.id)" ng-bind=::App.states[state.state_id].action></a></li></ul></div></div><div style="text-align: center" class="wrapper-xs v-middle m-t-xs"><a style="color:#ffffff;padding: 5px;border-radius: 10px" ng-click=$ctrl.printPackageBarcode($ctrl.data) class=bg-success>Print Package Label</a></div><div title="Interview Time" ng-if="$ctrl.data._root_.is_drive &amp;&amp; $ctrl.data.interview_time" class="m-l-sm m-t-xs"><i class="fa fa-calendar m-r-sm"></i><span ng-bind="$ctrl.data.created_at | date : \'MMM d, yyyy\'" class="text-md text-primary"></span></div></div><div ng-if=$ctrl.data.comments ng-show=$ctrl.data.summary class="wrapper-xs m-l-sm"><div style="width: 97%" class=hbox><div class=row><div class="sticky-note wrapper-xs"><div style="width: 97%" class="wrapper-xs sticky-heading"><div ng-bind=$ctrl.data.summary ng-class="{ &quot;show&quot;: !$ctrl.ui.show }"></div><a ng-click="$ctrl.ui.show = !$ctrl.ui.show" ng-bind="$ctrl.ui.show ? &quot;Show Less&quot; : &quot;Show More&quot;" ng-show="$ctrl.data.summary.length &gt; 100" class="pull-right wrapper-xs"></a></div></div></div></div></div><div class="wrapper-xs m-l-sm m-t-sm b-t"><uib-tabset active=activeTab><uib-tab index=0 heading=Info><div ng-if=$ctrl.data.invoice_code class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-barcode text-muted fa-lg"></i></a><div><a class="text-xs text-muted">Invoice Code</a><div ng-bind=$ctrl.data.invoice_code></div></div></div><div ng-if=$ctrl.data.weight class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-balance-scale text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Weight</a><div ng-bind=$ctrl.data.weight></div></div></div><div ng-if=$ctrl.data.is_doc class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i ng-class="$ctrl.data.is_doc ? \'fa-book\' : \'fa-archive\'" class="fa text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Consignment Type</a><div ng-bind="$ctrl.data.is_doc ? \'Document\' : \'Non Document\'"></div></div></div><div ng-if=$ctrl.data.is_wrong_item class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa text-muted fa-lg fa-tint"></i></a><div><a class="text-muted font-thin">Item Type</a><div ng-if="$ctrl.data.is_wrong_item === true" class=text-danger>Wrong Item</div></div></div><div ng-if=$ctrl.data.is_medicine class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa text-muted fa-lg fa-tint"></i></a><div><a class="text-muted font-thin">Item Content</a><div ng-if="$ctrl.data.is_medicine === true" class=text-danger>Medicine</div></div></div><div ng-if=$ctrl.data.content_type class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa text-muted fa-lg fa-tint"></i></a><div><a class="text-muted font-thin">Content Type</a><div ng-bind="$ctrl.data.content_type === \'1\' ? \'Normal\' : \'Special\'"></div></div></div><div ng-if=$ctrl.data.Barcode.barcode_number class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa text-muted fa-lg fa-tint"></i></a><div><a class="text-muted font-thin">Barcode Number</a><div ng-bind=$ctrl.data.Barcode.barcode_number></div></div></div><div class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-cubes text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Number of Items</a><div ng-bind="$ctrl.data.PackageItems.length ||0"></div></div></div><div ng-if=$ctrl.data.price_amount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Price</a><div><span ng-bind=$ctrl.data.price_amount></span></div></div></div><div ng-if=$ctrl.data.splitting_directions class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Split Message</a><div><span ng-bind=$ctrl.data.splitting_directions></span></div></div></div><div ng-if=$ctrl.data.exchange_directions class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Exchange Message</a><div><span ng-bind=$ctrl.data.exchange_directions></span></div></div></div><div ng-if=$ctrl.data.return_send class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-comment text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Return to Sender</a><div><span ng-bind=$ctrl.data.return_send></span></div></div></div><div ng-if=$ctrl.data.order_code class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-barcode text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Order Code</a><div><a ui-sref="order.show({ id: $ctrl.data.order_code })" target=_blank class=text-danger>{{$ctrl.data.order_code}}</a></div></div></div><div ng-if=$ctrl.packageItems[0].package_order_code class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-barcode text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Order Code</a><div><a ui-sref="order.show({ id: $ctrl.packageItems[0].package_order_code })" target=_blank class=text-danger>{{$ctrl.packageItems[0].package_order_code}}</a></div></div></div><div uib-tooltip="{{$ctrl.data.created_at | date:\'MMM d, y\'}} IST {{$ctrl.data.created_at | date:\'h:mm a\'}}" tooltip-placement=right tooltip-append-to-body=true class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-clock-o text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Date & Time of Receive</a><div><span ng-bind=$ctrl.moment($ctrl.data.created_at).fromNow()></span></div></div></div></uib-tab><uib-tab index=1 heading=Charges(₹) select=$ctrl.getCharges()><a ui-sref="package.charges({ id: $ctrl.data.id, customerId: $ctrl.$stateParams.id })" style="width: 2em" class=pull-right><i title="Edit Package Charges" class="m-t-sm wrapper-xs fa fa-edit"></i></a><div ng-if=charge.chargeAmount ng-repeat="charge in $ctrl.charges" class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i ng-class=$ctrl.chargesIcon[charge.key] class="fa text-muted fa-lg"></i></a><div><a ng-bind=charge.label class="text-muted font-thin"></a><div><span ng-bind="&quot;₹&quot; + charge.chargeAmount"></span></div></div></div></uib-tab><uib-tab index=2 heading=Docs><form name=photoForm novalidate ng-submit=$ctrl.submitInvoice() autocomplete=off class="form form-validation form-horizontal m-t"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 no-padder-right"><div class=hbox><label style="cursor: pointer" class=col>Upload Invoice<span class=text-danger>*</span><div ng-class="photoForm.document.$touched &amp;&amp; photoForm.document.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="(photoForm.document.$touched &amp;&amp; photoForm.document.$valid) || $ctrl.data.document"><span ng-bind=$ctrl.document.name class=text-muted></span></span><p ng-hide="(photoForm.document.$touched &amp;&amp; photoForm.document.$valid) || $ctrl.data.document" class=no-margin></p><span ng-hide="(photoForm.document.$touched &amp;&amp; photoForm.document.$valid) || $ctrl.data.document" class=file-support>Supported Formats: .png, .jpeg, .jpg, .bmp, .pdf\'</span><input type=file ng-model=$ctrl.Invoicefile name=Invoicefile ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select=$ctrl.startUploadInvoice($ctrl.Invoicefile) onclick="this.value = null" ctrl=$ctrl required class="form-control"></div></div><!--span.wrapper-xs.text-xs.text-danger(ng-show=\'$ctrl.clickUpload && !$ctrl.invoice && !photoForm.invoice.$invalid\') Please choose file--><!--span.wrapper-xs.text-xs.text-danger(ng-show=\'$ctrl.clickUpload && photoForm.invoice.$invalid\') Please choose supported file--><!--span.wrapper-xs.text-xs.text-danger(ng-show=\'$ctrl.clickUpload && photoForm.invoice.$dirty && photoForm.invoice.$invalid\') Please choose supported file--></label></div><div ng-if=$ctrl.data.object_invoice class="col-xs-12 wrapper-sm m-t-xs"><img ng-src={{$ctrl.data.object_invoice}} style="height: 85px;width: 80px" class="pull-left m-r"></div></div></div><br><div class=row><div class="col-md-6 col-xs-12"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled=$ctrl.submitting class="btn btn-info"><i class="fas fa-save m-r-sm"></i><span ng-if=!$ctrl.submitting class=text-white>Submit</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div><hr><div class=row><div class=col-xs-12><ul class=nav><li class=inline><label class="i-checks i-checks-sm"><input ng-click=$ctrl.submitFullInvoiceReceived() type=checkbox ng-model="$ctrl.data.is_full_invoice_received"><i></i><div class=hide></div>Full Invoice Received<div uib-popover="Check if invoice is received" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="fa fa-info-circle m-l-xs"></div></label></li></ul></div></div><br><h4 class=hide>Uploaded Invoice<div class="col-xs-12 col-md-12 wrapper-sm m-t-xs"><div><a href="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.shipment.invoice_object}}" target=_blank class=col-md-10><img ng-if="$ctrl.shipment.invoice_object &amp;&amp; $ctrl.data.invoiceExtension != \'pdf\'" ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.shipment.object}}" style="height: 85px;width: 80px" class="pull-left m-r m-t-xs"><img ng-if="$ctrl.shipment.invoice_object &amp;&amp; $ctrl.data.invoiceExtension == \'pdf\'" ng-src=assets/images/pdf-icon.88fecfdb.png style="height: 85px;width: 80px" class="m-r m-t-xs"></a></div></div></h4></form><div ng-show=$ctrl.data.invoice class=col-md-6><h4>Customer invoice</h4><a ng-if=$ctrl.data.invoice href={{$ctrl.data.invoice}} target=_blank><img ng-src={{$ctrl.data.invoice}} style="height: 80px;width: 80px" class="pull-left m-r"></a></div><div ng-show=$ctrl.data.ops_invoice class=col-md-6><h4>Ops invoice</h4><a ng-if=$ctrl.data.ops_invoice href={{$ctrl.data.ops_invoice}} target=_blank><img ng-src={{$ctrl.data.ops_invoice}} style="height: 80px;width: 80px" class="pull-left m-r"></a></div><div ng-repeat="packageItem in $ctrl.packageItems" class=col-md-6><h4 ng-if=packageItem.object_invoice>Item invoice {{packageItem.id}}</h4><a ng-if=packageItem.object_invoice href={{packageItem.object_invoice}} target=_blank><img ng-src={{packageItem.object_invoice}} style="height: 80px;width: 80px" class="pull-left m-r"></a></div></uib-tab></uib-tabset></div></div><div class=col><div><div class=hbox><div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="packages.index({jobId:$ctrl.job.id, bucket: bucket })" ng-bind=bucket ng-hide="bucket == \'Bookmarked\' &amp;&amp; App.app.settings.isAdmin"></a></li></ul></div><div style="position: fixed; right: 0;background: #fff; z-index: 3;width:30%" class="wrapper-xs bg-light"><div ng-if=$ctrl.packages.length class="pull-right col m-r-xs m-t-xs">{{$ctrl.packages.length}} of {{$ctrl.total}} Packages(s)</div><div ng-click=$ctrl.ExcelDownload.download($ctrl.params) class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-file-excel-o"></span></button></div><div ng-click=$ctrl.openPackageFilter() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-filter"></span></button></div><div class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm btn-default">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></div></div><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"></customer-header><directive-header options=$ctrl buttons="{packageCreate: $ctrl.packageItemsAdditionAllowedStateIds.includes($ctrl.data.state_id)}" app=App></directive-header></div><div style="padding-bottom: 4px" class=m-t-xl></div><div class=row><div class="col-md-8 no-padder-right"><scrollable-table table-offset=110 class="no-padder col-md-11"><table class="table m-b-none"><thead><tr><th class=col-xs-1><!--.checkbox.no-margin(ng-if="$ctrl.packageItems.length")label.i-checks\n  input(type=\'checkbox\', ng-model="all", ng-checked=\'$ctrl.allChecked\', ng-click=\'$ctrl.selectAllPackageItems(all)\' value=\'\')\n  i--></th><th class=col-xs-2>Name</th><th class=col-xs-2>Category</th><th class=col-xs-1>Qty</th><th class=col-xs-2>Price</th><th class=col-xs-2>Total Amount</th><th class=col-xs-2>Delete</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.packageItems.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Items in Package</h1><div class=text-center><ul class="nav nav-pills nav-sm center-pills"><li class=m-r-xs><a ui-sref="package.items({ id: $ctrl.$stateParams.id })" popover-trigger="\'mouseenter\'" popover-placement=bottom popover-append-to-body=true class="h5 font-bold b-a btn-addon btn-success text-white-only b-success imp"><span>Start Adding Items</span></a></li></ul></div></td></div><div ng-repeat="packageItem in $ctrl.packageItems" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><div ng-if="$ctrl.packageItems.length &amp;&amp; packageItem.PackageItemState.state_id &amp;&amp; packageItem.PackageItemState.state_id != $ctrl.advancedPhotoItemState.ADVANCED_PHOTO_REQUESTED &amp;&amp; packageItem.PackageItemState.state_id != $ctrl.advancedPhotoItemState.ADVANCED_PHOTO_COMPLETED" class="checkbox no-margin"><label class=i-checks><input type=checkbox ng-model=packageItem.isChecked ng-change=$ctrl.selectPackageItems()><i></i></label></div></div><div class="col-xs-2 wrapper-sm m-t-xs"><img ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + packageItem.object.replace(&quot;.&quot;, &quot;-thumb.&quot;)}}" style="height: 30px;width: 30px;border-radius: 50%" ng-click=$ctrl.openPhoto(packageItem.object) class="pull-left m-r"><a ui-sref="package.item.edit({ id: $ctrl.$stateParams.id , packageItemId: packageItem.id })" target=_blank>{{packageItem.name}} ({{packageItem.id}})</a></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><span>{{packageItem.PackageItemCategory.name}}</span><br><span>size - {{packageItem.size}}</span></div><div title={{packageItem.quantity}} ng-bind=packageItem.quantity class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"></div><div title={{packageItem.price_amount}} class="col-xs-2 wrapper-sm text-ellipsis m-t-xs">₹{{packageItem.price_amount | number: 2}}</div><div title={{packageItem.total_amount}} class="col-xs-2 wrapper-sm text-ellipsis m-t-xs">₹{{packageItem.total_amount | number: 2}}</div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><div ng-click="$ctrl.deletePackageItem($ctrl.$stateParams.id, packageItem.id, $index, packageItem.total_amount)" class="col-xs-4 wrapper-sm text-ellipsis m-t-xs fa fa-trash"></div><div class="col-xs-8 wrapper-sm text-ellipsis m-t-xs"><a style="color:#ffffff;padding: 2px" ng-click="$ctrl.printBarcode(packageItem, $ctrl.data.allPackageItemIds)" class=bg-info>Print</a></div></div><div class="col-md-12 col-xs-12 col-lg-12 col-sm-12"><div class="col-md-3 col-sm-3 col-lg-3 col-xs-3"><span>HSNCODE - {{packageItem.hsn_code}}</span></div><div ng-if=packageItem.PackageItemState.state_id class="col-md-6 col-sm-6 col-lg-6 col-xs-6 text-center"><div class=m-l-sm><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=hbox><button uib-dropdown-toggle="" ng-disabled="App.itemStates[packageItem.PackageItemState.state_id].Actions.length===0" class="btn btn-sm padder btn-{{App.itemStates[packageItem.PackageItemState.state_id].config.color}}"><span ng-bind=App.itemStates[packageItem.PackageItemState.state_id].action class=m-r-xs></span><span ng-if=App.itemStates[packageItem.PackageItemState.state_id].Actions.length&gt;0 class=caret></span></button><ul uib-dropdown-menu=uib-dropdown-menu role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.itemStates[packageItem.PackageItemState.state_id].Actions" ng-if=App.itemStates[state.state_id].action><a href="" ng-click="$ctrl.ChangeItemState.open(packageItem, state.state_id, $ctrl.data.Customer.id)" ng-bind=::App.itemStates[state.state_id].action></a></li></ul></div></div></div><div class="col-md-3 col-sm-3 col-lg-3 col-xs-3"></div></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadPackages() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div><div class=clearfix><form name=createForm novalidate ng-submit=$ctrl.createPackage() autocomplete=off class="form form-validation form-horizontal wrapper-md"><div style="padding-top: 10px" class="col-xs-12 col-md-12 text-ellipsis pull-right"><button type=submit ng-hide="$ctrl.submitting || $ctrl.totalSelectedItems === 0" class="col-lg-3 col-xs-6 col-md-3 col-sm-3 btn btn-success m-b-xs pull-right"><span ng-if=!$ctrl.submitting class=text-white>Create Package</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div><div class=clearfix></div></form></div></div></scrollable-table></div><div class=col-md-3><div class="nav-comment col-md-4 bg-white-only no-padder"><span style="padding: 10px;z-index:1; position:absolute; right:0" title={{$ctrl.chatHoverText()}} ng-click=App.initiateChat($ctrl.data) class=bg-info><img src=assets/images/chat.32985cff.png height=20px width="20px"></span><comments id={{$ctrl.$stateParams.id}} data=$ctrl.data type=&quot;package&quot;></comments></div></div></div></div></div></div></div>'),a.put("app/routes/proformaInvoice/dhl/dhl.html",'<div class=hbox><div style="text-align: -webkit-center" class="bg-white-only b-b container"><br><table style="border: 1px solid ;width:100%"><tbody><tr ng-show=!$ctrl.personalUse><td colspan=8 style="border: 1px"><br><img src=/assets/images/wordmark.5b0b1374.png style="height:60px"></td></tr><tr><td colspan=3 style="border: 1px solid"><p>CONSIGNER</p></td><td colspan=2 style="border: 1px solid"><p class=text-center>Date</p></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=2 style="border: 1px solid"><p ng-bind=$ctrl.moment().format(&quot;DD-MM-YYYY&quot;) class=text-center></p></td></tr><tr><td colspan=3 style="border: 1px solid"><p>{{$ctrl.address.name}}</p><p>{{$ctrl.address.line1}}</p><p>{{$ctrl.address.line2}}</p><p>{{$ctrl.address.line3}}</p><p>Ph No {{$ctrl.address.phone}}</p></td><td colspan=2 style="border: 1px solid"></td><td colspan=1 style="border: 1px solid"></td><td colspan=2 style="border: 1px solid; vertical-align: bottom" class=text-center><span><input style="text-align: center; border: 0px" value="SHPR"></span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=1 style="border: 1px solid; width: 15%"><h1 class=blank></h1></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=1 style="border: 1px solid;width: 15%"></td><td colspan=1 style="border: 1px solid;width: 15%"></td></tr><tr><td colspan=3 style="border: 1px solid"><p>{{$ctrl.shipments.customer_name}}</p><p>{{$ctrl.shipments.address}}</p><p>{{$ctrl.shipments.phone}}</p></td><td colspan=5 style="border: 1px solid; vertical-align: bottom" ng-click=$ctrl.personalUseData() class=text-center><span>GST NO : 29AAGFI4861F1Z7</span></td></tr><tr><td colspan=2 style="border: 1px solid; width: 30%"><p>CONSIGNEE</p></td><td colspan=1 style="border: 1px solid"></td><td colspan=5 style="border: 1px solid"></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"><span>AI</span></td><td colspan=2 style="border: 1px solid; width: 30%"></td><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=1 style="border: 1px solid;width: 15%"></td><td colspan=1 style="border: 1px solid;width: 15%"></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=2 style="border: 1px solid; width: 30%"></td><td colspan=2 style="border: 1px solid; width: 15%"><span>Country of origin goods</span></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=2 style="border: 1px solid;width: 15%" class=text-center><span>Country of final Destination</span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"><span>Vessel \\ Flight No</span></td><td colspan=2 rowspan=2 style="border: 1px solid; width: 30%; vertical-align: bottom"><span>Place of Receipt by Pre-carrie</span></td><td colspan=2 style="border: 1px solid; width: 15%" class=text-center><span>INDIA</span></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=2 style="border: 1px solid;width: 15%" class="text-uppercase text-center"><span>{{$ctrl.shipments.Country.name}}</span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"><h1 class=blank></h1></td><td colspan=5 rowspan=3 style="border: 1px solid; vertical-align: bottom" class=text-center><span><input style="text-align: center; border: 0px" value="Personal use"></span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=2 style="border: 1px solid; width: 30%"><span>Port of Loading</span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=2 style="border: 1px solid; width: 30%" class=text-center><span>final Destination</span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=2 style="border: 1px solid; width: 30%" class="text-uppercase text-center"><span>{{$ctrl.shipments.Country.name}}</span></td><td colspan=5 style="border: 1px solid"><span><input style="text-align: center; border: 0px; width: 100%"></span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=1 style="border: 1px solid; width: 15%"><p>Sl No.</p></td><td colspan=3 style="border: 1px solid"><p>DISCRIPTION OF GOODS</p></td><td colspan=1 style="border: 1px solid; width: 5%"><p class=text-center>Total Qty</p></td><td colspan=1 style="border: 1px solid;width: 15%"><p class=text-center>Per Qty</p></td><td colspan=1 style="border: 1px solid;width: 15%"><p class=text-center>Value in INR</p></td></tr><tr ng-repeat="item in $ctrl.PackItems"><td ng-click=$ctrl.removeRow($index) colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=1 style="border: 1px solid; width: 15%" class=text-center><span>{{$index+1}}</span></td><td colspan=3 style="border: 1px solid"><span ng-if="$ctrl.type === \'category\'"><span ng-show=$ctrl.personalUse>Personal use - &nbsp</span><!--| {{ item.PackageItemCategory.name}}--><span><input style="text-align: center; border: 0px;text-align:left" ng-model="item.PackageItemCategory.name"></span></span><span ng-if="$ctrl.type === \'item\'">{{item.name}}</span></td><td colspan=1 style="border: 1px solid; width: 5%" class=text-center><span><input style="text-align: center; border: 0px" ng-model="item.quantity"></span></td><td colspan=1 style="border: 1px solid;width: 15%"><span><input style="text-align: center; border: 0px" ng-model="item.price_amount"></span></td><td colspan=1 style="border: 1px solid;width: 15%"><span><input style="text-align: center; border: 0px" ng-model="item.total_amount"></span></td></tr><tr><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=1 style="border: 1px solid; width: 15%"></td><td colspan=3 style="border: 1px solid"></td><td colspan=1 style="border: 1px solid; width: 5%"></td><td colspan=1 style="border: 1px solid;width: 15%"></td><td colspan=1 style="border: 1px solid;width: 15%"><span><input style="text-align: center; border: 0px" ng-model="$ctrl.Charges.total_amount"></span></td></tr><tr><td colspan=4 style="border: 1px solid; width: 60%"><span>Amount in words :<input style="text-align: center; border: 0px; width: 100%" ng-model="$ctrl.amountWords"></span></td><td colspan=4 rowspan=4 style="border: 1px solid; width: 40%; vertical-align: bottom" class=text-center><span>Seal & singnature</span></td></tr><tr><td colspan=4 style="border: 1px solid; width: 60%"><h1 class=blank></h1></td></tr><tr><td colspan=4 style="border: 1px solid; width: 60%"><span>We declaration that invoice show the actual price of goods</span></td></tr><tr><td colspan=4 style="border: 1px solid; width: 60%"><span>described and that all particulars are true & correct</span></td></tr><tr><td colspan=3 class="text-center font-bold"><p>#182 2nd cross Rd, Koramangala 1st Block</p><p>Bengaluru - 560034</p></td><td colspan=1 class=font-bold><p>serviceteam@shoppre.com</p><p>Tel : +91 8040944077</p></td><td colspan=4 class=text-info><p class=text-center>Shoppre.com</p></td></tr></tbody></table><br></div></div>'),a.put("app/routes/shipments/index/index.html",'<div><div class=hbox><div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="shipments.index({jobId:$ctrl.job.id,bucket: bucket})" ng-bind=bucket></a></li></ul></div><div style="position: fixed; right: 0;background: #fff; z-index: 3;width:30%" class="wrapper-xs bg-light"><div ng-if=$ctrl.shipments.length class="pull-right col m-r-xs m-t-xs">{{$ctrl.shipments.length}} of {{$ctrl.total}} Shipments(s)</div><div ng-click=$ctrl.ExcelDownload.download($ctrl.params) class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-file-excel-o"></span></button></div><div ng-click=$ctrl.openShipmentFilter() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-filter"></span></button></div><div ng-click=$ctrl.ExpressShipping() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-file-text"></span></button></div><div class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm btn-default">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></div><div ng-if="$ctrl.$stateParams.sid == $ctrl.shipments[0].state_id &amp;&amp; $ctrl.totalSelectedShipments" class="pull-right col pointer m-r-xs"><div class="col-xs-3 m-t-xs"><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=w-full><button uib-dropdown-toggle="" style="text-align:left;padding: 2px 8px;width:auto" ng-disabled="App.shipmentStates[shipment.state_id].Actions.length===0" title={{$ctrl.shipments[0].state_name}} class="text-ellipsis btn bg-white-only b-{{App.shipmentStates[$ctrl.shipments[0].state_id].config.color || &quot;gray&quot;}} text-{{App.shipmentStates[$ctrl.shipments[0].state_id].config.color || &quot;gray&quot;}}"><span ng-bind=App.shipmentStates[$ctrl.shipments[0].state_id].action class=m-r-xs></span><span ng-if="App.shipmentStates[$ctrl.shipments[0].state_id].Actions.length &gt; 0" class=caret></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.shipmentStates[$ctrl.shipments[0].state_id].Actions" ng-if=App.shipmentStates[state.state_id].action><a href="" ng-click="$ctrl.proceedToStateChange($ctrl.shipments, state.state_id)" ng-bind=::App.shipmentStates[state.state_id].action></a></li></ul></div></div></div></div></div><div style="padding-bottom: 4px" class=m-t-xl></div><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr><th class=col-xs-1><div ng-if=$ctrl.$stateParams.sid class="checkbox no-margin"><label class=i-checks><input type=checkbox ng-model=all ng-checked=$ctrl.allChecked ng-click=$ctrl.selectAllShipments(all)><i></i></label></div></th><th class=col-xs-2>Customer Name</th><th class=col-xs-1>Shipment ID</th><th class=col-xs-1>Weight</th><th class=col-xs-1>Final Amount</th><th class=col-xs-2>Created Date</th><th class=col-xs-1>Locker</th><th class=col-xs-3>Status</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.shipments.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Shipments</h1></td></div><div ng-repeat="shipment in $ctrl.shipments" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><div ng-if=$ctrl.$stateParams.sid class="checkbox no-margin"><label class=i-checks><input type=checkbox ng-model=shipment.isChecked ng-change=$ctrl.selectShipments()><i></i></label></div></div><div class="col-xs-2 wrapper-sm m-t-xs"><img ng-if=shipment.Customer.profile_photo_url ng-src={{shipment.Customer.profile_photo_url}} style="height: 30px;width: 30px;border-radius: 50%" class="pull-left"><a ui-sref="shipment.show({ id: shipment.id })" target=_blank class=m-l>{{shipment.Customer.name}}</a></div><div class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><span>{{shipment.id}} &nbsp;</span><span ng-if="shipment.payment_gateway_id ===&quot;1&quot;" class="text-danger font-bold">(WIRE)</span><span ng-if="shipment.payment_gateway_id ===&quot;2&quot;" class="text-danger font-bold">(CASH)</span><span ng-if="shipment.payment_gateway_id ===&quot;5&quot;" class="text-info font-bold">(PAYPAL)</span><span ng-if="shipment.payment_gateway_id ===&quot;6&quot;" class="text-info font-bold">(WALLET)</span><span ng-if="shipment.payment_gateway_id ===&quot;7&quot;" class="text-info font-bold">(RAZOR)</span></div><span ng-if=shipment.preference class="badge bg-danger pull-right text-white">Express Shipping</span><div ng-bind="shipment.final_weight + \'Kg\'" title={{shipment.final_weight}} class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind="\'₹\'+shipment.final_amount" title={{shipment.final_amount}} class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"></div><div class="col-xs-2 wrapper-sm text-ellipsis m-t-xs"><span ng-if="shipment.state_id === $ctrl.shipmentStateId.PAYMENT_REQUESTED" title="{{shipment.totalDays}} days" ng-class="shipment.totalDays &gt; 7 ? \'text-danger\' : \'text-success\'">{{shipment.created_at | date:\'MMM d, y\'}} IST {{shipment.created_at | date:\'h:mm a\'}}</span><span ng-if="shipment.state_id !== $ctrl.shipmentStateId.PAYMENT_REQUESTED" title="{{shipment.totalDays}} days" class=text-success>{{shipment.created_at | date:\'MMM d, y\'}} IST {{shipment.created_at | date:\'h:mm a\'}}</span></div><div title="{{shipment.Customer.virtual_address_code + \' (\'+shipment.Customer.Locker.short_name+ \')\'}}" class="col-xs-1 wrapper-sm text-ellipsis m-t-xs"><span ng-bind=shipment.Customer.virtual_address_code></span><span ng-bind="\' (\'+shipment.Customer.Locker.short_name+ \')\'" class="text-small text-muted"></span></div><div class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=w-full><button uib-dropdown-toggle="" style="text-align:left;padding: 2px 8px;width:auto" ng-disabled="App.shipmentStates[shipment.state_id].Actions.length===0" title={{shipment.state_name}} class="text-ellipsis btn bg-white-only b-{{App.shipmentStates[shipment.state_id].config.color || &quot;gray&quot;}} text-{{App.shipmentStates[shipment.state_id].config.color || &quot;gray&quot;}}"><span ng-bind=App.shipmentStates[shipment.state_id].action class=m-r-xs></span><span ng-if="App.shipmentStates[shipment.state_id].Actions.length &gt; 0" class=caret></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.shipmentStates[shipment.state_id].Actions" ng-if=App.shipmentStates[state.state_id].action><a href="" ng-click="$ctrl.ChangeShipmentState.open(shipment, state.state_id, shipment._root_.id)" ng-bind=::App.shipmentStates[state.state_id].action></a></li></ul><span ng-if=shipment.updated_at uib-tooltip="{{shipment.updated_at | date:\'MMM d, y\'}} IST {{shipment.updated_at | date:\'h:mm a\'}}" tooltip-placement=bottom-center tooltip-append-to-body=true class="pull-right no-padder"><span ng-bind=$ctrl.moment(shipment.updated_at).fromNow()></span></span><span class=pull-right><a href={{shipment.tracking_url}} target=_blank><span class=text-primary-lt>&nbsp; {{shipment.tracking_code}} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></a></span></div></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadShipments() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div></div>'),
a.put("app/routes/shipments/report/report.html",'<div><div class=hbox><div style="padding-bottom: 4px" class=m-t-xl></div><div style="width: 30%" class=col-xs-2><label class=input-group>Date: &nbsp;<input ng-model=$ctrl.data.startDate type=date placeholder=""></label></div><div style="width: 30%" class=col-xs-2><label class=input-group>Date: &nbsp;<input ng-model=$ctrl.data.endDate type=date placeholder=""></label></div><div class=col-xs-2><button ng-click=$ctrl.checkDate()>save</button></div></div></div><div><div class=hbox><div style="padding-bottom: 4px" class=m-t-xl></div><scrollable-table table-offset=110><table class="table m-b-none"><thead><tr><th class=col-xs-3>Customer Name</th><th class=col-xs-3>Shipment ID</th><th class=col-xs-3>Weight</th><th class=col-xs-3>Dispatch date</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.shipments.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Shipments</h1></td></div><div ng-repeat="shipment in $ctrl.shipments" ng-show="shipment.upstream_cost === 0" ng-if="((shipment.dispatch_date | date: &quot;yyyy-MM-dd&quot;) &gt;= ($ctrl.startDate | date: &quot;yyyy-MM-dd&quot;)) &amp;&amp; ((shipment.dispatch_date | date: &quot;yyyy-MM-dd&quot;) &lt;= ($ctrl.endDate | date: &quot;yyyy-MM-dd&quot;))" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-3 wrapper-sm m-t-xs"><a ui-sref="customer.shipment.update({ id: shipment.Customer.id, shipmentId: shipment.id })" target=_blank class=m-l>{{shipment.Customer.first_name + \'\' + shipment.Customer.last_name}}</a></div><div class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><span>{{shipment.id}} &nbsp;</span></div><div class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><span>{{shipment.final_weight}} &nbsp;</span></div><div class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><span>{{shipment.dispatch_date}} &nbsp;</span></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadShipments() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div></div>'),a.put("app/routes/shipments/show/show.html",'<div id=shipmentShow class="hbox accounts"><div class="col bg-white-only w-md b-r"><div style="width: 93%" class="wrapper-xs m-sm"><div class=pull-right><!--a.col.v-middle(style=\'width: 2em;\')--><!--  i.m-t-sm.wrapper-xs.fa(--><!--  name=\'bookmarked\'--><!--  title=\'Bookmark\'--><!--  style="color: darksalmon;"--><!--  ng-class="$ctrl.data.is_bookmarked ? \'fa-star\' : \'fa-star-o\'"--><!--  ng-click="$ctrl.toggleBookmark(!$ctrl.data.is_bookmarked)"--><!--  )--><a ng-show="-1 !== $ctrl.deleteAllowedStates.indexOf($ctrl.data.state_id)" ng-click=$ctrl.deleteShipment($ctrl.$stateParams.id) style="width: 2em" class="col v-middle"><i title="Delete Shipments" class="m-t-sm wrapper-xs fa fa-trash"></i></a><a ng-show="-1 !== $ctrl.editAllowedStates.indexOf($ctrl.data.state_id)" ui-sref="customer.shipment.update({ id: $ctrl.data.Customer.id, shipmentId: $ctrl.data.id })" style="width: 2em" class="col v-middle"><i title="Edit Shipment" class="m-t-sm wrapper-xs fa fa-edit"></i></a><a ng-href="https://pulse.shoppre.com/dashboard/938?object_name=shipment&amp;object_id={{$ctrl.data.order_code}}" target=blank style="width: 2em" class="col v-middle"><i title="View Shipment details" class="wrapper-xs fa fa-eye"></i></a><div uib-dropdown="" class="col v-middle"><a href="" style="width: 2em"><i uib-dropdown-toggle="" class="m-t-sm wrapper-xs fa fa-ellipsis-v"></i></a><ul uib-dropdown-menu="" role=menu aria-labelledby=single-button style="right: -35px; left: auto" class="m-r-xl dropdown-menu"><li role=menuitem title="Send shipment details to customer"><a ng-click=$ctrl.sendNotificaton() target=_blank class="col v-middle">Send Notification</a></li></ul></div></div><div class="wrapper-xs v-middle"><div title={{$ctrl.data.Customer.name}} class="h4 wrapper-xs text-ellipsis text-dark"><i name=shipment_confirm title="Shipment Confirm" ng-if="1 || $ctrl.data.shipment_confirmed" class="fa fa-check-circle-o m-r-xs text-success"></i><span ng-bind=$ctrl.data.Customer.name></span></div></div><div class=m-l-sm><div uib-dropdown="" uib-keyboard-nav="" dropdown-append-to-body=dropdown-append-to-body class=hbox><button uib-dropdown-toggle="" ng-disabled="App.shipmentStates[$ctrl.data.state_id].Actions.length===0" class="btn btn-sm padder rounded btn-{{App.shipmentStates[$ctrl.data.state_id].config.color}}"><span ng-bind=App.shipmentStates[$ctrl.data.state_id].action class=m-r-xs></span><span ng-if=App.shipmentStates[$ctrl.data.state_id].Actions.length&gt;0 class=caret></span></button><ul uib-dropdown-menu=uib-dropdown-menu role=menu aria-labelledby=simple-btn-keyboard-nav class=dropdown-menu><li role=menuitem ng-repeat="state in App.shipmentStates[$ctrl.data.state_id].Actions" ng-if=App.shipmentStates[state.state_id].action><a href="" ng-click="$ctrl.ChangeShipmentState.open($ctrl.data, state.state_id, $ctrl.data.Customer.id)" ng-bind=::App.shipmentStates[state.state_id].action></a></li></ul></div></div><div style="text-align: center" class="wrapper-xs v-middle m-t-xs"><a style="color:#ffffff;padding: 5px;border-radius: 10px" ng-click=$ctrl.shipmentPrint($ctrl.data) class=bg-success>Print Shipment Label</a></div><div title="Interview Time" ng-if="$ctrl.data._root_.is_drive &amp;&amp; $ctrl.data.interview_time" class="m-l-sm m-t-xs"><i class="fa fa-calendar m-r-sm"></i><span ng-bind="$ctrl.data.created_at | date : \'MMM d, yyyy\'" class="text-md text-primary"></span></div></div><div ng-if=$ctrl.data.comments ng-show=$ctrl.data.summary class="wrapper-xs m-l-sm"><div style="width: 97%" class=hbox><div class=row><div class="wrapper-xs sticky-note"><div style="width: 97%" class="wrapper-xs sticky-heading"><div ng-bind=$ctrl.data.summary ng-class="{ &quot;show&quot;: !$ctrl.ui.show }"></div><a ng-click="$ctrl.ui.show = !$ctrl.ui.show" ng-bind="$ctrl.ui.show ? &quot;Show Less&quot; : &quot;Show More&quot;" ng-show="$ctrl.data.summary.length &gt; 100" class="pull-right wrapper-xs"></a></div></div></div></div></div><div class="wrapper-xs m-l-sm m-t-sm b-t"><uib-tabset active=activeTab><uib-tab index=0 heading=Info><div ng-if=$ctrl.data.final_weight class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-balance-scale text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Weight</a><div ng-bind=$ctrl.data.final_weight></div></div></div><div class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-cubes text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Package Count</a><div ng-bind="$ctrl.data.packages_count ||0"></div></div></div><div ng-if=$ctrl.data.address class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-map-signs text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Destination Address</a><div ng-bind=$ctrl.data.address class=text-center></div></div></div><div uib-tooltip="{{$ctrl.data.created_at | date:\'MMM d, y\'}} IST {{$ctrl.data.created_at | date:\'h:mm a\'}}" tooltip-placement=right tooltip-append-to-body=true class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-clock-o text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Shipment Creation Date</a><div><span ng-bind=$ctrl.moment($ctrl.data.created_at).fromNow()></span></div></div></div><div ng-if=$ctrl.transaction[0].PaymentGateway.value class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-money text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Payment Mode</a><div ng-bind=$ctrl.transaction[0].PaymentGateway.value></div></div></div><div ng-if=$ctrl.transaction[0].id class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-money text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Payment Transaction ID</a><div><a href={{$ctrl.URLS.PAY}}/admin/parcel/{{$ctrl.transaction[0].id}} target=_blank ng-bind="&quot;SHIP  &quot;+ $ctrl.transaction[0].id" class=text-danger></a></div></div></div><div ng-if=$ctrl.data.price_amount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-inr text-muted fa-lg"></i></a><div><a class="text-muted font-thin">Price</a><div><span ng-bind=$ctrl.data.price_amount></span></div></div></div><div ng-if=$ctrl.data.ShipmentMetum.gift_note_text class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-gift text-muted fa-lg"></i></a><div class=text-danger><a class="text-muted font-thin">Gift Note</a><div><span ng-bind=$ctrl.data.ShipmentMetum.gift_note_text></span></div></div></div><div ng-if=$ctrl.data.ShipmentMetum.mark_personal_use class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-gift text-muted fa-lg"></i></a><div class="text-danger m-t"><a class="text-danger font-thin">Items Are For Personal Use</a></div></div><div ng-if=$ctrl.data.ShipmentMetum.original class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-gift text-muted fa-lg"></i></a><div class="text-danger m-t"><a class="text-danger font-thin">Keep in original box</a></div></div><div ng-if=$ctrl.data.ShipmentMetum.invoice_tax_id class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-gift text-muted fa-lg"></i></a><div class=text-danger><a class=font-thin>Tax ID</a><div><span ng-bind=$ctrl.data.ShipmentMetum.invoice_tax_id></span></div></div></div><div ng-if=$ctrl.transaction[0].amount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-gift text-muted fa-lg"></i></a><div class=text-danger><a class=font-thin>Final Amount</a><div><span ng-bind=$ctrl.transaction[0].amount></span></div></div></div><div ng-if=$ctrl.transaction[0].payment_gateway_fee_amount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-gift text-muted fa-lg"></i></a><div class=text-danger><a class=font-thin>Payment Gateway Fee</a><div><span ng-bind=$ctrl.transaction[0].data.payment_gateway_fee_amount></span></div></div></div><div ng-if=$ctrl.transaction[0].coupon_amount class="clear wrapper-xs"><a class="h4 text-center m-r-xs pull-left thumb-xs no-border m-t-sm"><i class="fa fa-gift text-muted fa-lg"></i></a><div class=text-danger><a class=font-thin>Coupon Rewards</a><div><span ng-bind=$ctrl.transaction[0].coupon_amount></span></div></div></div></uib-tab><uib-tab index=1 heading=Charges(₹)><div class="clear wrapper-xs"><div ng-if="$ctrl.data.ShipmentMetum.repacking_charge_amount &gt; 0"><a class="text-muted font-thin">Discard Shoe Options</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.repacking_charge_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.extra_packing_charge_amount &gt; 0"><a class="text-muted font-thin">Extra Packing Charge</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.extra_packing_charge_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.sticker_charge_amount &gt; 0"><a class="text-muted font-thin">Sticker Charge Amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.sticker_charge_amount"></span></div></div><div ng-if=$ctrl.data.ShipmentMetum.original><a class="text-muted font-thin">Keep Original Box</a><div><span ng-bind="&quot;₹ 0&quot;"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.consolidation_charge_amount &gt; 0"><a class="text-muted font-thin">Consolidation Charge</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.consolidation_charge_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.gift_wrap_charge_amount &gt; 0"><a class="text-muted font-thin">Gift Wrap Amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.gift_wrap_charge_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.gift_note_charge_amount &gt; 0"><a class="text-muted font-thin">Gift Note Charge amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.gift_note_charge_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.express_processing_charge_amount &gt; 0"><a class="text-muted font-thin">Express Processing amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.express_processing_charge_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.insurance_amount &gt; 0"><a class="text-muted font-thin">Insurence Amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.insurance_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.liquid_charge_amount &gt; 0"><a class="text-muted font-thin">Lilquid Charge Amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.liquid_charge_amount"></span></div></div><div ng-if="$ctrl.data.ShipmentMetum.overweight_charge_amount &gt; 0"><a class="text-muted font-thin">Over Weight Charge Amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.ShipmentMetum.overweight_charge_amount"></span></div></div><div ng-if=$ctrl.data.pick_up_charge_amount><a class="text-muted font-thin">Pick Up charge Amount</a><div><span ng-bind="&quot;₹&quot; + $ctrl.data.pick_up_charge_amount"></span></div></div></div></uib-tab><uib-tab index=2 heading=Docs><form name=photoForm novalidate ng-submit=$ctrl.shipmentPhotoCreate(photoForm) autocomplete=off class="form form-validation form-horizontal m-t"><div class=row><div class="col-md-12 col-sm-12 col-xs-12 no-padder-right"><div class=hbox><label style="cursor: pointer" class=col>Upload Shipment Photos<span class=text-danger>*</span><div ng-class="photoForm.document.$touched &amp;&amp; photoForm.document.$invalid ? \'input-file-danger\':\'\'" drag-drop-toggle=drag-drop-toggle class=btn-file-wrapper><div class=btn-file><span ng-show="(photoForm.document.$touched &amp;&amp; photoForm.document.$valid) || $ctrl.data.document"><span ng-bind=$ctrl.document.name class=text-muted></span></span><p ng-hide="(photoForm.document.$touched &amp;&amp; photoForm.document.$valid) || $ctrl.data.document" class=no-margin></p><span ng-hide="(photoForm.document.$touched &amp;&amp; photoForm.document.$valid) || $ctrl.data.document" class=file-support>Supported Formats: .png, .jpeg, .jpg, .bmp, .pdf\'</span><input type=file ng-model=$ctrl.shipmentFile name=shipmentFile ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.startUploadShipmentPhoto($ctrl, $ctrl.shipmentFile)" onclick="this.value = null" ctrl=$ctrl required class="form-control"></div></div><span ng-show="$ctrl.clickUpload &amp;&amp; !$ctrl.invoice &amp;&amp; !photoForm.invoice.$invalid" class="wrapper-xs text-xs text-danger">Please choose file</span><span ng-show="$ctrl.clickUpload &amp;&amp; photoForm.invoice.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span><span ng-show="$ctrl.clickUpload &amp;&amp; photoForm.invoice.$dirty &amp;&amp; photoForm.invoice.$invalid" class="wrapper-xs text-xs text-danger">Please choose supported file</span></label></div><div class="col-xs-12 wrapper-sm m-t-xs"><a ng-repeat="photo in $ctrl.data.shipmentItemSignedPhotos " href={{photo.shipmentItemSignedPhotos}} target=_blank><img ng-src={{photo.shipmentItemSignedPhotos}} style="height: 85px;width: 80px" class="pull-left m-r"></a></div></div></div><br><div class=row><div class="col-md-6 col-xs-12"><h4 ng-bind=$ctrl.error.message style=color:red></h4><button type=submit ng-disabled=$ctrl.submitting class="btn btn-info"><i class="fas fa-save m-r-sm"></i><span ng-if=!$ctrl.submitting class=text-white>Submit</span><span ng-if=$ctrl.submitting><i class="fa fa-spin fa-circle-o-notch"></i><span class=text-white>&nbsp;&nbsp;Submitting...</span></span></button></div></div><hr><br><h4 class=hide>Uploaded Invoice<div class="col-xs-12 col-md-12 wrapper-sm m-t-xs"><div><a href="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.shipment.invoice_object}}" target=_blank class=col-md-10><img ng-if="$ctrl.shipment.invoice_object &amp;&amp; $ctrl.data.invoiceExtension != \'pdf\'" ng-src="{{$ctrl.URLS.CDN + &quot;/shoppre/&quot; + $ctrl.shipment.object}}" style="height: 85px;width: 80px" class="pull-left m-r m-t-xs"><img ng-if="$ctrl.shipment.invoice_object &amp;&amp; $ctrl.data.invoiceExtension == \'pdf\'" ng-src=assets/images/pdf-icon.88fecfdb.png style="height: 85px;width: 80px" class="m-r m-t-xs"></a></div></div></h4></form></uib-tab><uib-tab index=3 heading=Proforma><button class="btn btn-md btn-default"><a ui-sref="proformaInvoice.dhl({ orderCode: $ctrl.data.order_code,type: &quot;item&quot; })" target=_blank>Item &nbsp;&nbsp;&nbsp;&nbsp;</a></button><button class="btn btn-md btn-default"><a ui-sref="proformaInvoice.dhl({ orderCode: $ctrl.data.order_code,type: &quot;category&quot; })" target=_blank>Category</a></button></uib-tab><uib-tab index=4 heading=Finance ng-if=$ctrl.data.invoice_id><button ng-click=$ctrl.generateFinanceInvoice($ctrl.data.order_code) class="btn btn-md btn-default">Generate Invoice</button></uib-tab></uib-tabset></div><div ng-if=$ctrl.data.skills.length&gt;0 class="wrapper-xs m-l-sm m-t-sm b-t"><div class="wrapper-xs h4 text-muted">Skills</div><div class="wrapper-xs h6 clear"><div ng-repeat="skill in $ctrl.data.skills" style="padding: 2px" ng-if="$ctrl.data.showAllSkill || $index &lt; 6" class="wrapper-xs pull-left text-info-dker r m-t-xs m-r-xs">&nbsp;{{skill}}&nbsp;</div><a ng-click="$ctrl.data.showAllSkill = !$ctrl.data.showAllSkill" class=pull-left><span ng-if=$ctrl.data.showAllSkill class="wrapper-xs pull-left font-bold h5"><span class=text-info-dker>– Less</span></span><span ng-if=!$ctrl.data.showAllSkill class="wrapper-xs pull-left font-bold h5"><span class=text-info-dker>+ More</span></span></a></div></div></div><div class=col><div><div class=hbox><div><div style="position: fixed;width: 100%; height: 44px" class="bg-white-only b-b"><ul class="nav nav-pills nav-sm m-t-xs"><li ng-repeat="bucket in $ctrl.buckets" ui-sref-active=active><a ui-sref="shipments.index({jobId:$ctrl.job.id,bucket: bucket})" ng-bind=bucket ng-hide="bucket == \'Bookmarked\' &amp;&amp; App.app.settings.isAdmin"></a></li></ul></div><div style="position: fixed; right: 0;background: #fff; z-index: 3;width:30%" class="wrapper-xs bg-light"><div ng-if=$ctrl.shipments.length class="pull-right col m-r-xs m-t-xs">{{$ctrl.shipments.length}} of {{$ctrl.total}} Shipments(s)</div><div ng-click=$ctrl.ExcelDownload.download($ctrl.params) class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-file-excel-o"></span></button></div><div ng-click=$ctrl.openShipmentFilter() class="pull-right col pointer m-r-xs"><button class="btn btn-sm btn-default"><span class="fa fa-filter"></span></button></div><div class="pull-right col pointer m-r-xs"><uib-dropdown><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-sm btn-default">{{ ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name !== \'Default\' ? ($ctrl.sorts | filter:{ key: $ctrl.params.sort }: true)[0].name+\'&nbsp;&nbsp;\' : \'\' }}<span class="fa fa-sort-alpha-asc"></span></button><ul uib-dropdown-menu="" role=menu aria-labelledby=btn-append-to-body class="dropdown-menu pull-right"><li ng-repeat="sort in $ctrl.sorts"><a href=# ng-bind=sort.name ng-click=$ctrl.sort(sort.key)></a></li></ul></uib-dropdown></div></div><customer-header customer=$ctrl.customer style="position: fixed;z-index: 6;height: 40px" class="bg-white-only w-full b-b"></customer-header><directive-header options=$ctrl page={customerShipments:true} buttons="{shipmentCreate: $ctrl.shipmentItemsAdditionAllowedStateIds.includes($ctrl.data.state_id)}" app=App></directive-header></div><div style="padding-bottom: 4px" class=m-t-xl></div><div class=row><div class="col-md-8 no-padder-right"><scrollable-table table-offset=110 class="no-padder col-md-11"><table class="table m-b-none"><thead><tr><th class=col-xs-3>Name</th><th class=col-xs-3>Package Id</th><th class=col-xs-3>Total Value</th><th class=col-xs-3>Weight</th></tr></thead></table><div style="padding: 10px" class=col-xs-12><div ng-show="$ctrl.data.Packages.length === 0 &amp;&amp; !$ctrl.ui.loading" class=col-xs-12><td colspan=5><h1 class="text-center text-muted">No Items in Shipment</h1></td></div><div ng-repeat="packageItems in $ctrl.data.Packages" class="col-xs-12 no-padder bg-white b-a m-b-sm"><div class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"><a ui-sref="package.show({ id: packageItems.id })" target=_blank ng-bind=packageItems.Store.name></a></div><div title={{packageItems.id}} ng-bind=packageItems.id class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind="\'₹\' + packageItems.price_amount" title={{packageItems.price_amount}} class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"></div><div ng-bind=packageItems.weight title={{packageItems.weight}} class="col-xs-3 wrapper-sm text-ellipsis m-t-xs"></div></div><div class="col-xs-12 text-center"><a ng-if=$ctrl.ui.loading class="btn active m-t-xs"><i class="fa fa-circle-o-notch fa-spin"></i><strong>&nbsp;Loading</strong></a><a ng-if=$ctrl.ui.lazyLoad ng-click=$ctrl.loadShipments() class="btn btn-primary m-t-xs"><i class="fa fa-plus-circle"></i><strong>&nbsp;Load More</strong></a></div></div></scrollable-table></div><div class=col-md-3><div class="nav-comment col-md-4 bg-white-only no-padder"><span style="padding: 10px;z-index:1; position:absolute; right:0" title={{$ctrl.chatHoverText()}} ng-click=App.initiateChat($ctrl.data) class=bg-info><img src=assets/images/chat.32985cff.png height=20px width="20px"></span><comments id={{$ctrl.$stateParams.id}} data=$ctrl.data type=&quot;shipment&quot;></comments></div></div></div></div></div></div></div>'),a.put("app/routes/vision/create/vision.html",'<div class="m-t-xl no-margin"><div id=applicantNewdiv class=hbox><div class="wrapper-md bg-white-only"><div class=row><div class="col-md-5 col-sm-5 col-xs-12"></div><form name=newPackageForm novalidate ng-submit=$ctrl.updatePackage(newPackageForm) autocomplete=off class="form form-validation form-horizontal"><input id=fileup accept=image/* type=file ng-model=$ctrl.imageFile name=ecommerceFile ngf-pattern="\'.png,.jpeg,.jpg,.bmp,.pdf\'" ngf-max-size=15MB ngf-max-files=1 ngf-select="$ctrl.uploadingPhotos=true;" onclick="this.value = null" ng-image-compress=ng-image-compress image=myAwesomeImage upload-fn=$ctrl.startUpload ctrl=$ctrl resize-max-height=1000 resize-max-width=1000 resize-quality=0.7 resize-type=image/jpg class="form-control"><br><br><span class=col-md-4><label class=input-group></label>Locker Code<span class=text-danger>*</span><input ng-model=$ctrl.data.vision.virtual_address_code name=virtual_address_code placeholder=SHPR20-416 uib-typeahead="customer.virtual_address_code for customer in $ctrl.Customer.get($viewValue)" typeahead-loading=$ctrl.Customer.loadingStore typeahead-no-results=$ctrl.Customer.noResults typeahead-on-select="$ctrl.Customer.select($item, $index)" ng-blur=$ctrl.Customer.blur() required class="form form-control"></span><span class=col-md-4><label>Name</label><input name=name placeholder="eg. Aloak Jawali" ng-model=$ctrl.data.vision.name autocomplete=off autofocus disabled class="form form-control"></span><span class="col-md-12 no-padder"><span class=col-md-4><label class="col-xs-5 input-group"></label>Barcode Number<span class=text-danger>*</span><input name=barcode_number ng-model=$ctrl.data.vision.barcode_number required class="form form-control"><label class="col-xs-5 input-group"></label>Store Name<span class=text-danger>*</span><input name=store_name ng-model=$ctrl.data.vision.store_name placeholder="eg: Flipkart" uib-typeahead="store.name for store in $ctrl.Store.get($viewValue)" typeahead-loading=$ctrl.Store.loadingStore typeahead-no-results=$ctrl.Store.noResults typeahead-on-select=$ctrl.Store.select($item) ng-blur=$ctrl.Store.blur() typeahead-wait-ms=10 autocomplete=off autofocus required class="form form-control"></span></span><span class=col-md-5><button type=submit ng-disabled=$ctrl.submitting class="btn btn-success m-t-md"><span ng-if=!$ctrl.submitting class=text-white>Update</span><span ng-if=$ctrl.submitting class=text-white>Updating....</span></button></span><span ng-if=$ctrl.packIds class="col-md-12 m-t-md">Package Id: &nbsp;<span ng-bind=$ctrl.packIds class=text-danger></span></span></form></div></div></div></div>'),a.put("components/aside/aside.html",'<div class=aside-wrap><div class="navi-wrap bg-info"><!-- user--><nav ui-nav="" ng-include="\'components/navigation/navigation.html\'" class=navi></nav><!-- aside footer--></div></div>'),a.put("components/comment/comment.html",'<div style="border-left:1px solid #ddd;padding-top: 48px; position: relative; height: 83%; width: 100%; top: 0; bottom: 50px; overflow-x: hidden;overflow-wrap: break-word" scroll-to-bottom=$ctrl.ui.scrollToBottom class="list-group list-group-sp"><div class=padder-md><div ng-if=$ctrl.followers.length class="m-t-sm text-md">Followers<i ng-click=$ctrl.loadFollowers() class="m-l fa fa-refresh pointer"></i></div><ul ng-if=$ctrl.followers.length class="list-group no-bg no-borders pull-in m-t-sm m-b-xs"><li ng-repeat="follower in $ctrl.followers" title={{follower.name}} class="list-group-item inline no-padder m-l"><a ui-sref="customer.view({ id: follower.id })" class="pull-left thumb-sm avatar no-padder"><img src={{follower.profile_photo_url}} alt=... class="img-circle"><i ng-class="follower.online ? &quot;on&quot; : &quot;away&quot;" title="{{follower.online ? &quot;Online&quot; : &quot;Offline&quot;}}" class="b-white bottom"></i></a></li></ul><!-- streamline--><div class="m-b text-md clearfix">Recent Activity</div><div class="streamline b-l m-b"><div ng-repeat="comment in $ctrl.data.comments | orderBy: &quot;-created_at&quot;" ng-class="comment.User.id !== $ctrl.user.id  ? \'b-success.b-l\' : \'\'" class=sl-item><div class=m-l><div ng-bind="&quot; &quot; + $ctrl.moment(comment.created_at).fromNow()" uib-tooltip="{{comment.created_at | date:\'MMM d, y\'}} IST {{comment.created_at | date:\'h:mm a\'}}" tooltip-placement=left tooltip-append-to-body=true class=text-muted></div><p><a ui-sref="customer.view({ id: comment.User.id })" ng-bind=comment.User.name class=text-info></a><span ng-if=comment.comments ng-class="comment.User.group_id === 2 ? &quot;text-orange&quot; : &quot;text-success&quot;">&nbsp;commented {{comment.comments}}</span></p></div></div><div class="hide bg-info wrapper-sm m-l-n m-r-n m-b r r-2x">Create tasks for the team</div></div><!-- / streamline--><div style="max-width: 90%" class=clear><div ng-if="$ctrl.data.comments[$index-1].User.id !== comment.User.id" class=text-sm><a class=text-info-dker></a><span>&nbsp;updated to &nbsp;</span><span ng-if=$ctrl.states[comment.state_id].action ng-bind=$ctrl.states[comment.state_id].action class="text-danger-dker text-md"></span><span style="color: #333"></span></div><div class=bg-white-only><p ng-if=comment.comments class=m-n><i class="fa fa-discourse"></i><span ng-bind=comment.comments></span></p></div></div></div><div style="height: 80px" class=m-b-lg></div></div><form style="position: fixed;border-width: 2px !important" name=commentForm ng-submit=$ctrl.insert() class="b-a form form-validation wrapper-xs bg-white col-xs-4"><textarea elastic=elastic name=comments ng-model=$ctrl.post.comments autocomplete=off tabindex=-1 placeholder="Enter your comment.." required style="width: 100%;resize: none;min-height: 30px;border: none" ng-keypress="$event.keyCode === 13 ? $ctrl.insert($event) : &quot;&quot;;" ng-focus="$ctrl.showCommentBtn = true" ng-blur=$ctrl.hideCommentButton()></textarea><quick-state-change data=$ctrl.data type=$ctrl.type ng-show=!$ctrl.showCommentBtn></quick-state-change><div ng-show=$ctrl.showCommentBtn><hr class="m-n"><button type=submit ng-disabled=commentForm.$invalid class="btn-info m-t-xs btn btn-sm b-r pull-right"><i class="fa fa-paper-plane m-r-xs"></i><span>Comment</span></button></div><i>Powered by SILKBOARD Chat</i></form>'),a.put("components/customer-nav/customer-nav.html",'<div style="position: relative"><div style="position: fixed; z-index: 3" class="w-md bg-white-only b-b b-r"><div class=wrapper-xs><div><buttonb ui-sref=jobs.suggestions style="width: 220px" ng-class="{&quot;text-gray bg-light&quot;: $ctrl.DISABLE_MANAGE}" ng-disabled=$ctrl.DISABLE_MANAGE class="font-bold btn m-l-xs text-white btn-danger hide">Create Package</buttonb></div><div class=wrapper-xs><div class="input-group rounded"><div uib-dropdown="" class="input-group-btn dropdown"><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false class="btn btn-default dropdown-toggle"><span ng-class="$ctrl.ui.loading ? &quot;text-danger&quot;: &quot;&quot;" class="fa m-r-sm fa-{{$ctrl.searchTypes[$ctrl.searchType].icon}}"></span><span class=caret></span></button><ul style="min-width:55px !important" class=dropdown-menu><li ng-if="$ctrl.searchType!==key" ng-repeat="(key, searchType) in $ctrl.searchTypes"><a ng-click=$ctrl.changeSearchType(key)><span ng-class="&quot;fa-&quot; + searchType.icon" class="fa m-r-sm"></span><span ng-bind=searchType.label></span></a></li></ul></div><input name=customerSearch placeholder="🔎 Search" ng-model=$ctrl.params[$ctrl.searchType] ng-change=$ctrl.search($ctrl.searchType) ng-model-options="{debounce: 600}" autofocus class="rounded form-control padder text-no-glow"><i ng-if=$ctrl.params[$ctrl.searchType] ng-click="$ctrl.params[$ctrl.searchType] = &quot;&quot;; $ctrl.search($ctrl.searchType)" style="position: absolute; right: 12px; z-index: 10; top: 10px; font-size: 16px" class="fa fa-times-circle pointer"></i></div></div></div></div><br><br><br><br><br><br><div style="top: 7.3em" ng-class="{&quot;m-t-xl&quot;: $ctrl.isAdmin}" class="w-md nav-job bg-light b-r bg-white-only"><div style="position: relative;  overflow-y: auto; overflow-x: hidden; height: 100%; width: 249px" when-scrolled=$ctrl.getList() class=w-md><!--"orders":"text-warning-dk"--><div class=m-b-md><div ng-repeat="(type, color) in {&quot;shipments&quot;:&quot;text-info-dker&quot;,&quot;packages&quot;:&quot;text-info-dk&quot;,&quot;orders&quot;:&quot;text-info-dker&quot;,&quot;customers&quot;:&quot;text-danger&quot;}" class=m-t-sm><a><div ng-class="{\'{{color}}\': !$ctrl.collapse[type], \'text-gray\': $ctrl.collapse[type]}" ng-click="$ctrl.collapse[type] = !$ctrl.collapse[type]; !$ctrl.collapse[&quot;inactive&quot;] &amp;&amp; $ctrl.getList(false, true)" class=m-l-xs><i ng-if=$ctrl.collapse[type] class="fa fa-plus-square"></i><i ng-if=!$ctrl.collapse[type] class="fa fa-minus-square"></i><span ng-bind=type class="m-l-xs text-u-c"></span><span class="pull-right text-xs text-gray m-t-xs"></span></div></a><ul uib-collapse=$ctrl.collapse[type] class="m-t-xs nav w-md"><li ng-if=!$ctrl.customers[type].length class="text-center text-muted">No Users</li><li ng-repeat="customer in $ctrl.customers[type]" ng-class="{&quot;text-primary b-primary&quot;: customer.id == $ctrl.$state.params.id}" ng-mouseenter="customer.showtoactive = (type === &quot;passive&quot;)" ng-mouseleave="customer.showtoactive = false" class="b-l b-3x"><div ng-if=customer.error style=padding-left:20px class=bg-white><span ng-bind=customer.error class="text-sm text-danger"></span></div><a ng-href="{{$ctrl.getLink(customer.id, type)}}" style="padding:8px 10px 8px 20px" ng-class="{                &quot;font-bold text-primary&quot;: customer.id == $ctrl.$state.params.id,                &quot;text-muted&quot;: customer.id != $ctrl.$state.params.id}" uib-tooltip={{customer.tooltip}} tooltip-placement=right tooltip-append-to-body=true class=text-ellipsis><div ng-bind=customer.name class=text-sm></div><div ng-bind=customer.virtual_address_code style="width: 100%;float: left" class="text-sm text-ellipsis"></div><small ng-bind=customer.rating style="right:5px;padding:0 2px" class="pull-right bg-white text-gray pos-abt m-t-n-md"></small></a></li></ul></div></div></div></div></div>'),
a.put("components/footer/footer.html","<p><small class=text-muted>ShoppRe.com<br>&copy; 2015</small></p>"),a.put("components/light-box/light-box.html",'<div id=light-box-fade><div id=light-box><a id=boxclose ng-click=lightboxClose(); class=boxclose></a><video id=lightBoxVideo width=1000 controls preload=metadata height=500><source ng-src={{data}} type=video/{{type}} ng-repeat="type in [&quot;mp4&quot;, &quot;webm&quot;]">Your browser does not support this video format.</video></div></div><div style=width:200px class="pos-rlt text-center"><div style="background: #ebf0f1" class=w-full><video width=200 no-controls="" preload=auto height=100><source src={{data}} type=video/{{type}} ng-repeat="type in [&quot;mp4&quot;, &quot;webm&quot;]"></video><a ng-click=lightboxOpen(); style="top: 40px;left: 80px" class="pos-abt lightboxOpenButton"><i title="Play Video" class="fa fa-2x fa-play-circle text-white"></i></a></div></div>'),a.put("components/list-modal/list-modal.html",'<div class="modal-header bg-primary"><span ng-bind=$ctrl.data.title class="font-bold text-md"></span><span style="font-size: 1.5em" ng-click=$ctrl.$uibModalInstance.dismiss(false) class="fa fa-times-circle pull-right pointer"></span></div><div class="modal-body bg-white-only"><div ng-if="$ctrl.type === &quot;payment&quot;" class="wrapper-xs text-center"><div style="background: #c7ebfb;border-radius: 2px;box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);color: #222;padding: 10px 5px !important;font-family: arial,sans-serif" class="hbox text-left"><div class="col v-middle thumb-md text-center"><i class="fa fa-info-circle fa-2x text-primary-dker"></i></div><div class="col wrapper-xs text-xs"><ul style="margin-bottom: 0;padding-left: 10px"><li>Please check latest commercials & replacement period before working on JD</li><li>You will directly service Client for all activities on that JD including feedback till joining</li><li>No ShoppRe CV screening or relationship manager</li></ul></div></div></div><div class=wrapper-xs><div ng-bind=$ctrl.data.description class="wrapper-sm text-lg m-b-xs {{$ctrl.type === &quot;popup&quot; ? &quot;text-black&quot; : &quot;text-primary-dker&quot;}}"></div><table style="margin-bottom: 0" class="table table-striped"><tr ng-repeat="item in $ctrl.items"><td ng-bind=item.name style="padding: 8px"></td><td ng-bind=item.val style="padding: 8px"></td></tr></table></div><div ng-if=$ctrl.data.notes class=wrapper-xs><div class=font-bold>Note:</div><div ng-repeat="note in $ctrl.data.notes" ng-bind=note class="padder-xs text-sm"></div></div><div class=clear><div ng-if=!$ctrl.data.modalButtons class="pull-right wrapper-xs"><button ng-click=$ctrl.$uibModalInstance.close(true) class="btn btn-success btn-sm m-r-xs">ACCEPT</button><a ng-click=$ctrl.$uibModalInstance.dismiss(false) class="btn btn-default btn-sm">CANCEL</a></div><div ng-if=$ctrl.data.modalButtons class="pull-right wrapper-xs"><button ng-repeat="button in $ctrl.data.modalButtons" ng-bind=button.name ng-click=$ctrl.$uibModalInstance.close(button.bool) class="btn m-r-xs btn-{{button.type}}"></button></div></div></div>'),a.put("components/navbar/navbar.html",'<div class="app-header navbar"><div class="navbar-header {{App.app.settings.navbarHeaderColor}}"><button ng-click="App.app.settings.mobileHeader = !App.app.settings.mobileHeader" ng-if="App.$state.current.name !== &quot;extension&quot;" class="pull-right visible-xs dk"><i class="fa fa-cog"></i></button><button ng-click=App.hideExt() ng-if="App.$state.current.name === &quot;extension&quot;" class="pull-right visible-xs dk"><i class="fa fa-times"></i></button><a style="line-height: 44px;width: 258px" ng-class="{\'company-logo\' : App.app.settings.isAdmin, \'consultant-logo\': !App.app.settings.isAdmin}" ui-sref="{{App.$state.current.name !== &quot;extension&quot; ? &quot;feeds&quot; : &quot;&quot;}}" class="navbar-brand text-lt bg-dark"><img style="width: 30px;margin-top: 5px" src=assets/images/logo.beba3fea.png alt={{App.app.name}} class="pull-left"><span style="margin-left: -122px;font-weight: 400;font-size: 18px" title={{App.app.name}}>{{App.app.name}}</span></a></div><div ng-class="{ show: App.app.settings.mobileHeader, \'company-header\' : App.app.settings.isAdmin}" style="margin-left: 53px" class="collapse pos-rlt navbar-collapse box-shadow {{App.app.settings.navbarCollapseColor}}"><div class="nav navbar-nav hidden-xs hide"><a href="" ng-click="App.app.settings.asideFolded = !App.app.settings.asideFolded" class="btn no-shadow navbar-btn"><i class="fa fa-fw {{App.app.settings.asideFolded ? \'fa-indent\' : \'fa-dedent\'}}"></i></a><a href="" ui-toggle-class=show target=#aside-user class="btn no-shadow navbar-btn"><i class="icon-user fa-fw"></i></a></div><!--ng-focus="App.openSearchCandidate($event)"--><aside></aside><div class="col-sm-5 col-md-2"><form role=search ng-if=!App.adminUserinfo.isBlocked class="w-full navbar-form no-padder hide"><div class="form-group w-full"><div ng-hide="App.fullPage==true" class="input-group w-full"><span style="width: 1%" ng-class="{&quot;b-b&quot;: NavBar.isSearchOpen}" ng-click="NavBar.isSearchOpen=!NavBar.isSearchOpen;NavBar.ui.setfocus();" class="input-group-btn b-white"><a class="btn btn-xs"><i class="fa fa-search"></i></a></span><input ng-class="{\'search-animate\': NavBar.isSearchOpen, \'company-header\': App.app.settings.isAdmin}" ng-model=App.Applicants.searchText uib-typeahead="applicant.name for applicant in App.Applicants.get($viewValue)" typeahead-on-select=App.Applicants.select($item) placeholder="Search candidate" style="font-size: 14px" search-focus=search-focus ui=NavBar.ui class="search input-sm no-border text-white text-md b-b b-white"></div></div></form></div><ul class="nav navbar-nav navbar-right"><li class=hide><a uib-popover-template=&quot;components/navbar/popover.html&quot; popover-trigger=&quot;outsideClick&quot; popover-placement=bottom-right popover-is-open=NavBar.isOpen class=n-hv><i class="fa fa-lg fa-th text-white th-scale-y"></i></a></li><li class="hide nav-menu-item"><a ui-sref=notifications title=Notifications href=/notifications class=n-hv><notify-count></notify-count></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><div class=hv><i style="display: block !important; font-size: 20px;margin-top: 15px" class="fa fa-bell text-white"><span style="font-size: 55px;color: darkorange;font-size: 20px;font-weight: 700;color: #ffffff;border-radius: 10px;background-color: darkorange;padding: 4px">{{NavBar.totalCount.length}}</span></i></div><div style="right: 0px !important;min-width: 233px !important" class=dropdown-content><a ng-click="NavBar.showComment(item.object_id, item.type, $index)" target=_blank style="color: green;font-weight: 700" ng-repeat="item in NavBar.totalNotification">New Message<br><span ng-if="item.type === 1">Pkg ID: {{item.object_id}}</span><span ng-if="item.type === 2">Shipment ID: {{item.object_id}}</span><span ng-if="item.type === 3">Order ID: {{item.object_id}}</span><!--span(style=\'float: right;margin-right: 30px;background-color: darkorange;border-radius: 20px;padding: 2px 12px;color:#ffffff\') View--></a><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref=notifications.index() class="badge bg-success m-l-xs">View More Comments</a></div></li><li><a uib-popover-template=&quot;components/navbar/profile-popover.html&quot; popover-trigger=&quot;outsideClick&quot; popover-placement=bottom-right popover-is-open=NavBar.isProfPopOpen style="padding: 0 10px" class="no-hv m-t-sm m-r-sm"><div style="height: 30px;width: 30px;border-radius: 50%" class="bg-light b-info b-a text-center avatar"><span ng-if=!NavBar.user.profile_photo_url style="color: #4675b6;line-height: 1.7em" ng-bind=NavBar.userInitial class="text-md text-u-c"></span><img ng-if=NavBar.user.profile_photo_url ng-src={{NavBar.user.profile_photo_url}} style="height: 30px;width: 30px;border-radius: 50%"><i class="on md b-white bottom"></i></div></a></li></ul></div></div>'),a.put("components/navbar/popover.html",'<div style="height: 230px" class=wrapper-sm><a target=_blank ng-href={{App.URLS.HELP}} style="width: 73px;margin: 4px" ng-click="$ctrl.isOpen = !$ctrl.isOpen" class="col-xs-4 text-center no-padder hv-border-info m-b-sm padder-v m-t-n-sm m-b-sm"><div style="padding: 5px 4px"><img src=/assets/images/help.faa75f2f.svg style="width: 60px"></div><div style="font-size: 12px;line-height: 1.15em" class="text-center text-black m-b-sm">Help</div></a></div>'),a.put("components/navbar/profile-popover.html",'<div class=wrapper-xs><div class=hbox><div class="col thumb-lg"><div style="border-radius: 50%;width:40px;height: 40px" class="b-a bg-light text-center m-l-md m-t b-primary"><a style="color: #5585B9;font-size: 26px" ng-click="$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen" ng-bind=$ctrl.userInitial class="m-t-lg font-lg text-u-c"></a></div></div><div class=col><div ng-click="$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen" ng-bind=App.adminUserinfo.name title={{App.adminUserinfo.name}} class="w-full m-t-xs text-md text-black text-ellipsis"></div><div ng-click="$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen" ng-bind=App.adminUserinfo.email title={{App.adminUserinfo.email}} class="w-full m-t-xs text-black text-ellipsis"></div></div></div><div class=hbox><div class="col w-full m-t-xs"><div ng-controller="LogoutController as logout" class=w-full><span style="color: #333" ng-click="logout.$onInit();$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen;" class="pull-right btn btn-sm bg-gray b-a b-gray">Logout</span></div></div></div></div>'),a.put("components/navigation/navigation.html",'<ul class="nav navbar-nav navbar-left"><li class="hidden-folded padder m-t m-b-sm text-muted text-xs">Navigation</li><div class="dropdown m-t">MENU<div class=dropdown-content><a ui-sref="feeds.index({bucket: &quot;PACKAGE&quot;})" class=hv><i class="fa fa-dashboard"><span class=font-bold>DASHBOARD</span></i></a><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref=shipments.report() class=hv><i class="fa fa-list-alt"></i><span class=font-bold>REPORT</span></a><a ng-controller="CampaignController as $ctrl" uib-dropdown-toggle=uib-dropdown-toggle ng-click=$ctrl.accessApp(&quot;campaign&quot;) class=hv><i class="fa fa-list-alt"></i><span class=font-bold>CAMPAIGNS</span></a><a ng-controller="CampaignController as $ctrl" uib-dropdown-toggle=uib-dropdown-toggle ng-click=$ctrl.accessApp(&quot;peacock&quot;) class=hv><i class="fa fa-list-alt"></i><span class=font-bold>Peacock</span></a></div></div><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref="orders.index({bucket: &quot;All&quot;, type: &quot;assisted_purchased&quot;})" class=hv><i class="fa fa-list-alt text-white"></i><span>ORDERS</span></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown ng-controller="OrderController as $ctrl" class="nav-menu-item hide"><a uib-dropdown-toggle=uib-dropdown-toggle ng-click=$ctrl.accessOrder() class=hv><i class="fa fa-list-alt text-white"></i><span>ORDERS</span></a></li><li ui-sref-active=active class=nav-menu-item><a ui-sref="packages.index({ bucket: &quot;All&quot;})" class=hv><i class="fa fa-users text-white"></i><span>PACKAGES</span></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref="shipments.index({ bucket: &quot;All&quot;})" class=hv><i class="fa fa-list-alt text-white"></i><span>SHIPMENTS</span></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref="customers.list({status: &quot;All&quot;})" class=hv><i class="fa fa-list-alt text-white"></i><span>CUSTOMERS</span></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref=vision.index() class=hv><i class="fa fa-list-alt text-white"></i><span>OCR</span></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref=barcode.create() class=hv><i class="fa fa-list-alt"></i><span>BARCODES</span></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown ng-controller="CampaignController as $ctrl" class=nav-menu-item><a ng-click="$ctrl.accessApp(\'pay\')" class=hv><i class="fa fa-list-alt text-white"></i><span>ACCOUNT</span></a></li></ul>'),a.put("components/quick-state-change/quick-state-change.html",'<div ng-if=$ctrl.states[$ctrl.data.state_id].Actions.length><button ng-repeat="state in $ctrl.states[$ctrl.data.state_id].Actions track by $index" ng-bind=$ctrl.states[state.state_id].action ng-if="$index &lt; 2" type=button ng-click="$ctrl.StateChange[$ctrl.type].open($ctrl.data, ($ctrl.data._root_.is_drive &amp;&amp; $ctrl.data.state_id === 44) ? 12 : state.state_id, $ctrl.data._root_.id)" style="margin-left: 2px" class="btn btn-sm bg-white-only b-a rounded {{&quot;b-&quot;+$ctrl.states[state.state_id].config.color + &quot; text-&quot;+$ctrl.states[state.state_id].config.color}}"></button><div uib-dropdown="" ng-if="$ctrl.states[$ctrl.data.state_id].Actions.length &gt; 2" class="inline btn-group dropup"><button type=button uib-dropdown-toggle="" aria-haspopup=true aria-expanded=false style="margin-left: 2px;padding: 3px 15px" class="btn bg-white-only dropdown-toggle rounded b-a padder-lg m-t-xs btn-sm m-b-xs"><i class="fa fa-ellipsis-h"></i></button><ul uib-dropdown-menu="" role=menu aria-labelledby=single-button style="right: 0; left: auto" class=dropdown-menu><li role=menuitem ng-repeat="state in $ctrl.states[$ctrl.data.state_id].Actions track by $index" ng-if="$index &gt; 1"><a ng-click="$ctrl.StateChange[$ctrl.type].open($ctrl.data, ($ctrl.data._root_.is_drive &amp;&amp; $ctrl.data.state_id === 44) ? 12 : state.state_id, $ctrl.data._root_.id)" ng-bind=::$ctrl.states[state.state_id].action class={{&quot;text-&quot;+$ctrl.states[state.state_id].config.color}}></a></li></ul></div></div>')}]);