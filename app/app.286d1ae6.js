"use strict";function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}angular.module("qui.components",[]),angular.module("qui.core",["qui.components","http-auth-interceptor"]).constant("MODULE_VERSION","0.0.1"),angular.module("uiGenApp",["qui.core","ngAnimate","ui.router","ui.bootstrap","ngFileUpload","angular-loading-bar","toaster","ngSanitize","angular-fullscreen-toggle"]).config(["$urlRouterProvider","$locationProvider",function(a,b){a.when("/","/access/404"),a.otherwise(function(a){return a.get("$state").go("access.404")}),b.html5Mode(!0)}]),angular.module("qui.core").factory("moment",["$window",function(a){return a.moment}]),function(a,b){a.module("uiGenApp.constants",[]).constant("appConfig",{2:{PACKAGE_STATES:["READY_TO_SEND","IN_REVIEW","ACTION_REQUIRED","MY_ORDERS","ALL"],SHIPMENT_STATE_IDS:{PACKAGING_REQUESTED:16,SCANNING_COMPLETED:17,PAYMENT_REQUESTED:18,PAYMENT_INITIATED:19,PAYMENT_COMPLETED:20,PAYMENT_FAILED:21,PAYMENT_CONFIRMED:22,UPSTREAM_SHIPMENT_REQUEST_CREATED:23,SHIPMENT_HANDED:24,SHIPMENT_IN_TRANSIT:25,SHIPMENT_MANUAL_FOLLOW_UP:26,SHIPMENT_LOST:27,CUSTOM_ON_HOLD:28,WRONG_ADDRESS:29,SHIPMENT_REJECTED_BY_CUSTOMER:30,RTO_REQUESTED:31,RAISE_SHIPMENT_LOST_CLAIM:32,PENALTY_PAYMENT_REQUESTED:33,RETURN_TO_ORIGIN:34,AMOUNT_RECEIVED_FROM_UPSTREAM:35,PENALTY_PAYMENT_DONE:36,WRONG_ADDRESS_FOLLOW_UP:37,CLAIM_PROCESSED_TO_CUSTOMER:38,CUSTOMER_ACKNOWLEDGEMENT_RECEIVED:39,SHIPMENT_DELIVERED:40,SHIPMENT_CANCELLED:41,SHIPMENT_DELETED:55,CUSTOMER_DOCUMENT_RESOLVED:60,SHIPMENT_ABANDON:61,PAYMENT_DELAY_EXCEEDED:1e3,PAYMENT_DELAY:1001,SHIPMENT_IN_ACTIVE:72,RETURNED_AND_SENT_TO_DOMESTIC:74,PAYMENT_AUTHORISED:79,INVOICE_UPLOAD_PENDING:100,INVOICE_UPLOAD_COMPLETED:101},PAYMENT_GATEWAY:{WIRE:1,CASH:2,CARD:3,PAYTM:4,PAYPAL:5,WALLET:6,RAZOR:7},PACKAGE_STATE_IDS:{PS_RETURN_REQUESTED:9,PS_REFUND_RECIEVED:10,PACKAGE_ITEMS_UPLOAD_PENDING:1,AWAITING_VERIFICATION:2,CUSTOMER_INPUT:3,IN_REVIEW:4,READY_TO_SHIP:5,DAMAGED:6,RETURN_REQUESTED_BY_CUSTOMER:7,RETURN_COMPLETED:8,SPLIT_PACKAGE_REQUESTED_BY_CUSTOMER:11,READY_FOR_SPLIT_INTERNALLY:12,DISCARD_COMPLETED:13,ADDED_SHIPMENT:14,CUSTOMER_REQUESTED_FOR_DISCARD:15,STANDARD_PHOTO_REQUEST:52,ADVANCED_PHOTO_REQUEST:53,UPLOAD_INVOICE_REQUESTED:54,INCOMING_PACKAGE:59,PACKAGE_STORAGE:1002,PACKAGE_STORAGE_EXCEEDED:1003,INACTIVE_LOCKER:71,PACKAGE_DELETED:73,EXCHANGE_REQUEST:75,EXCHANGE_DONE:76,PICKUP_NOT_DONE:78,READY_FOR_DISCARD_INTERNALLY:89,READY_FOR_RETURN_INTERNALLY:90,SPLIT_PACKAGE_COMPLETED:95},ORDER_STATE_IDS:{ORDER_CREATED:42,ORDER_CANCELLED:43,PAYMENT_INITIATED:44,PAYMENT_FAILED:45,PAYMENT_COMPLETED:46,AWAITING_PACKAGE:47,ORDER_PLACED:48,OUT_OF_STOCK:49,REFUNDED_TO_WALLET:50,REFUNDED_TO_BANK_ACCOUNT:51,ORDER_DELETED:62,PAYMENT_CONFIRMED:63,ORDER_PROCEED:64,PRICE_CHANGED:65,IN_TRANSIT:66,AWAITING_FOR_STOCK:67,ORDER_COMPLETED:68,OTHER_ITEMS_PROCEED:69,AWAITING_FOR_ORDER:70,ORDER_CANCELLED_BY_SELLER:77,PAYMENT_AUTHORISED:80,CUSTOMER_INPUT:81},PACKAGE_ITEM_STATE_IDS:{CUSTOMER_REQUESTED_FOR_DISCARD:82,READY_TO_DISCARD_INTERNALLY:83,ITEM_SOLD:84,REMOVED_FROM_WAREHOUSE:85,RETURN_REQUESTED_BY_CUSTOMER:86,RETURN_COMPLETED:87,READY_FOR_RETURN_INTERNALLY:88,ADVANCED_PHOTO_REQUESTED:91,ADVANCED_PHOTO_COMPLETED:92,CUSTOMER_CANCELLED_DISCARD:93,CUSTOMER_CANCELLED_RETURN:94,CUSTOMER_REQUESTED_FOR_SPLIT:96,READY_TO_SPLIT_INTERNALLY:97,SPLIT_COMPLETED:98,PICKUP_NOT_DONE:99}}})}(angular),angular.module("uiGenApp").directive("tableOffset",function(){return{link:function(){$(".scrollableContainer").height($(window).height()-($(".scrollableContainer").position().top+85))}}}),angular.module("uiGenApp").directive("ngCropperjs",["S3",function(a){return{restrict:"A",templateUrl:"app/directives/ng-cropperjs/ng-cropperjs.html",replace:!0,scope:{options:"=ngCropperOptions"},link:function(b,c,d){console.log("link called",c),b.upload=function(){console.log(">>>>>>>>>>>>>upload started"),a.uploadCorona($.image).then(function(a){console.log("informing to webhook",{object:a})})},b.done=function(){b.STATUS="PREVIEW",console.log("Preview Loaded"),b.FINISHED=!0,b.src=b.cropper.getCroppedCanvas().toBlob(function(a){b.loadImage(a)})},b.loadImage=function(a){var c=new FileReader;c.onload=function(a){$("#image").attr("src",a.target.result),b.STATUS="PREVIEW",b.$$phase&&b.$apply()},c.readAsDataURL(a)},b.reset=function(){b.STATUS="INIT"},b.startCropping=function(){b.STATUS="CROP",console.log("startCropping");var a=document.getElementById("image"),c=document.getElementById("canvas"),d=a.offsetWidth,e=a.offsetHeight;c.width=d,c.height=e,console.log("image.naturalWidth, image.naturalHeight",a.naturalWidth,a.naturalHeight),c.getContext("2d").drawImage(a,0,0,a.naturalWidth,a.naturalHeight,0,0,d,e),b.cropper=new Cropper(c,{autoCropArea:.9,ready:function(){console.log("banthu"),a.style.display="none"},crop:function(a){console.log(a.detail)}})},b.$init=function(){b.STATUS="INIT",console.log("init");var a=document.getElementById("video");navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&navigator.mediaDevices.getUserMedia({video:!0}).then(function(b){a.srcObject=b,a.play()})},b.$init(),b.snap=function(){console.log("snapppp"),b.canvas=document.getElementById("canvas");var a=b.canvas.getContext("2d"),c=document.getElementById("video");console.log(c.height),b.STATUS="PREVIEW",b.canvas.height=c.videoHeight,b.canvas.width=c.videoWidth,a.drawImage(c,0,0,c.videoWidth,c.videoHeight),b.imageSrc=b.canvas.toDataURL("image/png"),b.canvas.style.display="none"}}}}]),angular.module("uiGenApp").run(["$rootScope","Auth","authService","AUTH_EVENTS","Session","$state","$window","URLS","User","$uibModal",function(a,b,c,d,e,f,g,h,i,j){var k=g.location;return a.$on("$stateChangeStart",function(b,c){return e.isAuthenticated()||"access"===c.name.split(".")[0]?e.isAuthenticated()&&i.adminUserinfo&&i.adminUserinfo.isBlocked&&c.name!==i.adminUserinfo.whatBlocked[0].state?(b.preventDefault(),f.go(i.adminUserinfo.whatBlocked[0].state)):e.isAuthenticated()&&"access.oauth"===c.name?(b.preventDefault(),f.go("packages.index")):a.$broadcast("show-announcement",c):(b.preventDefault(),a.$broadcast(d.notAuthenticated),Object.assign(g.location,{href:h.OAUTH+"&state="+k.pathname}),null)}),a.$on(d.loginSuccess,function(a,b){return angular.noop(a),angular.noop(b)}),a.$on(d.loginRequired,function(){e.isAuthenticated()&&b.refreshToken().then(function(){c.loginConfirmed("success",function(a){var b=a;return b.headers.Authorization="Bearer "+e.getAccessToken(),b})},function(a){return 400===a.status&&j.open({animation:!0,templateUrl:"app/directives/reauth/reauth.html",controller:function(){e.destroy();var a=this;a.href=h.OAUTH+"&state="+k.pathname},controllerAs:"ReAuth",backdrop:"static"})})})}]),angular.module("uiGenApp").factory("QCONFIG",function(){return{PACKAGE_STATES:["TASKS","FEEDBACK","COMPLETED","ALL","INCOMING"],ORDER_STATES:["TASKS","FEEDBACK","COMPLETED","ALL"],USER_GROUPS:[{id:1,name:"ADMINS"},{id:2,name:"CUSTOMERS"}],MANAGE_JD_STATES:["New","Accepted","Hidden","Rejected","ALL"],SHIPMENT_STATES:["IN_REVIEW","IN_QUEUE","SENT","ALL"],PACKAGE_STATE_IDS:{PACKAGE_ITEMS_UPLOAD_PENDING:1,AWAITING_VERIFICATION:2,CUSTOMER_INPUT:3,IN_REVIEW:4,READY_TO_SHIP:5,DAMAGED:6,RETURN_REQUEST_FROM_CUSTOMER:7,RETURN_COMPLETED:8,PS_RETURN_REQUESTED:9,PS_REFUND_RECIEVED:10,SPLIT_PACKAGE_REQUESTED_BY_CUSTOMER:11,READY_FOR_SPLIT_INTERNALLY:12,DISCARD_COMPLETED:13,ADDED_SHIPMENT:14,CUSTOMER_REQUESTED_FOR_DISCARD:15,STANDARD_PHOTO_REQUEST:52,ADVANCED_PHOTO_REQUEST:53,ORDER_CREATED:42,ORDER_CANCELLED:43,PAYMENT_INITIATED:44,PAYMENT_FAILED:45,PAYMENT_COMPLETED:46,ORDER_PLACED:48,OUT_OF_STOCK:49,REFUNDED_TO_WALLET:50,REFUNDED_TO_BANK_ACCOUNT:51,AWAITING_PACKAGE:47,UPLOAD_INVOICE_REQUESTED:54,INCOMING_PACKAGE:59},SHIPMENT_STATE_IDS:{PACKAGING_REQUESTED:16,SCANNING_COMPLETED:17,PAYMENT_REQUESTED:18,PAYMENT_INITIATED:19,PAYMENT_COMPLETED:20,PAYMENT_FAILED:21,PAYMENT_CONFIRMED:22,UPSTREAM_SHIPMENT_REQUEST_CREATED:23,SHIPMENT_HANDED:24,SHIPMENT_IN_TRANSIT:25,SHIPMENT_MANUAL_FOLLOW_UP:26,SHIPMENT_LOST:27,CUSTOM_ON_HOLD:28,WRONG_ADDRESS:29,SHIPMENT_REJECTED_BY_CUSTOMER:30,RTO_REQUESTED:31,RAISE_SHIPMENT_LOST_CLAIM:32,PENALTY_PAYMENT_REQUESTED:33,RETURN_TO_ORIGIN:34,AMOUNT_RECEIVED_FROM_UPSTREAM:35,PENALTY_PAYMENT_DONE:36,WRONG_ADDRESS_FOLLOW_UP:37,CLAIM_PROCESSED_TO_CUSTOMER:38,CUSTOMER_ACKNOWLEDGEMENT_RECEIVED:39,SHIPMENT_DELIVERED:40,SHIPMENT_CANCELLED:41,SHIPMENT_DELETED:55},ORDER_STATE_IDS:{ORDER_CREATED:42,ORDER_CANCELLED:43,PAYMENT_INITIATED:44,PAYMENT_FAILED:45,PAYMENT_COMPLETED:46,AWAITING_PACKAGE:47,ORDER_PLACED:48,OUT_OF_STOCK:49,REFUNDED_TO_WALLET:50,REFUNDED_TO_BANK_ACCOUNT:51,ORDER_DELETED:62,PAYMENT_CONFIRMED:63,ORDER_PROCEED:64,PRICE_CHANGED:65,IN_TRANSIT:66,AWAITING_FOR_STOCK:67,ORDER_COMPLETED:68,OTHER_ITEMS_PROCEED:69,AWAITING_FOR_ORDER:70,ORDER_CANCELLED_BY_SELLER:77},PACKAGE_ITEM_STATE_IDS:{CUSTOMER_REQUESTED_FOR_DISCARD:82,READY_TO_DISCARD_INTERNALLY:83,ITEM_SOLD:84,REMOVED_FROM_WAREHOUSE:85,RETURN_REQUESTED_BY_CUSTOMER:86,RETURN_COMPLETED:87,READY_FOR_RETURN_INTERNALLY:88,ADVANCED_PHOTO_REQUESTED:91,ADVANCED_PHOTO_COMPLETED:92,CUSTOMER_CANCELLED_DISCARD:93,CUSTOMER_CANCELLED_RETURN:94,CUSTOMER_REQUESTED_FOR_SPLIT:96,READY_TO_SPLIT_INTERNALLY:97,SPLIT_COMPLETED:98,PICKUP_NOT_DONE:99},CARTON_BOX:[{amount:14.5,kg:"2.5 - kg"},{amount:23,kg:"5.5 - kg"},{amount:35,kg:"10.5 - kg"},{amount:40.5,kg:"15.5 - kg"},{amount:58.5,kg:"17.5 - kg"},{amount:10,kg:"Other"}]}}),angular.module("uiGenApp").factory("S3",["$http","toaster","URLS",function(a,b,c){return{upload:function(d,e,f){return a.get("/minio/presignedUrl",{params:{filename:d.name.toLowerCase()}}).then(function(g){var h=g.data,i=h.object,j=h.url,k=new XMLHttpRequest;return k.open("PUT",j,!0),k.send(d),k.onload=function(){200===k.status&&(b.pop("success","File uploaded"),Object.assign(e,{object:i}),Object.assign(f,{uploadingPhotos:!1}),a.post("/minio/thumb",{object:i}).then(function(){var a=c.CDN+"/shoppre/"+e.object.replace(".","-thumb.");b.pop("success","Conversion done"),Object.assign(e,{object_thumb:a})})["catch"](function(){return b.pop("error","Error while uploading file")}))},i})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadAdvanced:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(a){var f=a.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d,{object_advanced:g}),Object.assign(e,{uploadingPhotos:!1}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadInvoice:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(a){var f=a.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d,{object_invoice:g}),Object.assign(e,{uploadingPhotos:!1}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadEcommerce:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(a){var f=a.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d,{object_ecommerce:g}),Object.assign(e,{uploadingPhotos:!1}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadOcr:function(d,e,f){return a.get("/minio/presignedUrl",{params:{filename:d.name.toLowerCase()}}).then(function(g){var h=g.data,i=h.object,j=h.url,k=new XMLHttpRequest;return k.open("PUT",j,!0),k.send(d),k.onload=function(){200===k.status&&(b.pop("success","File uploaded"),Object.assign(e,{object:i}),a.get(c.OCR+"/api/visions",{params:{path:i,field:"SA-"}}).then(function(a){var b=a.data;Object.assign(e,{vision:b})})["catch"](function(a){b.pop("error",a.data.message)}),Object.assign(f,{uploadingPhotos:!1}),a.post("/minio/thumb",{object:i}).then(function(){var a=c.CDN+"/shoppre/"+e.object.replace(".","-thumb.");b.pop("success","Conversion done"),Object.assign(e,{object_thumb:a})})["catch"](function(){return b.pop("error","Error while uploading file")}))},i})["catch"](function(){return b.pop("error","Error while uploading file")})},uploadShipmentPhoto:function(c,d,e){return a.get("/minio/presignedUrl",{params:{filename:c.name.toLowerCase()}}).then(function(e){var f=e.data,g=f.object,h=f.url,i=new XMLHttpRequest;return i.open("PUT",h,!0),i.send(c),i.onload=function(){200===i.status&&(b.pop("success","File uploaded"),Object.assign(d.shipmentItemPhotos.push(g)),a.get("/minio/viewObject",{params:{object:g}}).then(function(a){Object.assign(d.shipmentItemSignedPhotos.push({shipmentItemSignedPhotos:a.data.url}))}))},g})["catch"](function(){return b.pop("error","Error while uploading file")})}}}]),angular.module("uiGenApp").factory("URLS",function(){var a=window.location,b=a.host,c=a.protocol,d=c+"//"+(b.includes("staging")?b.substr(0,b.indexOf("-")+1):""),e=""+b.substr(b.indexOf(".")+1),f=(""+e.substr(e.indexOf(".")+1),"parcel"),g="admin",h=f+"-"+g,i=function(a){return""+d+a+"."+e},j=i(f),k=i("login");return{PREFIX:d,PROJECT:f,OAUTH_CLIENT_ID:h,UI_URL:j,DOMAIN:e,LOGIN:k,PARCEL:i("parcel"),PAY:i("pay"),ENGAGE:i("engage"),WWW:i("www"),COURIER:i("courier"),LOGISTICS:i("logistics"),WALLET:i("wallet"),OCR:i("ocr"),CDN:d+"cdn."+e,OAUTH:k+"/authorise?client_id="+h+"&response_type=code&"+("redirect_uri="+j+"/"+g+"/access/oauth"),HELP:"https://ship.shoppre.com"}}),angular.module("uiGenApp").factory("AuthInterceptor",["Session","URLS",function(a,b){return{request:function(c){var d,e=c;"/"===e.url[0]&&(e.url=b.PARCEL+"/api"+e.url);var f="#",g="$",h="~",i="&",j="%",k="*",l=(d={},_defineProperty(d,f,b.ENGAGE),_defineProperty(d,g,b.PAY),_defineProperty(d,h,b.LOGIN),_defineProperty(d,i,b.COURIER),_defineProperty(d,j,b.LOGISTICS),_defineProperty(d,k,b.WALLET),d),m=e.url[0],n=Object.keys(l).reduce(function(a,b){return Object.assign(a,_defineProperty({},b,!0))},{});return"~"===m&&"~"===e.url[0]?e.url=""+b.LOGIN+e.url.substr(2):n[m]&&(e.url=l[m]+"/api"+e.url.substr(1)),c.ignoreAuthModule?c:(a.isAuthenticated()&&(e.headers.Authorization="Bearer "+a.getAccessToken()),e)}}}]).config(["$httpProvider",function(a){return a.interceptors.push("AuthInterceptor")}]),angular.module("qui.core").factory("Auth",["$log","$http","$q","Session","URLS",function(a,b,c,d,e){var f={},g=!1;return f.login=function(a){var e="~~/oauth/token";return b.post(e,a,{ignoreAuthModule:!0,headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}}).then(function(a){return d.create("adminOauth",a.data)})["catch"](function(a){return d.destroy(),c.reject(a.data)})},f.refreshToken=function(){if(g)return a.warn("Refresh token request already sent."),c.reject({warning:"Refresh token request already sent."});g=!0;var e="~~/oauth/token";return b.post(e,{refresh_token:d.read("adminOauth").refresh_token},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")},ignoreAuthModule:!0}).then(function(a){return d.create("adminOauth",a.data),g=!1,c.resolve(a)})["catch"](function(a){return g=!1,c.reject(a)})},f.logout=function(){var a="~~/oauth/revoke";return b.post(a,{access_token:d.getAccessToken()},{headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(a){return Object.keys(a).map(function(b){return encodeURIComponent(b)+"="+encodeURIComponent(a[b])}).join("&")}}).then(function(a){return d.destroy(),a.data},function(a){return d.destroy(),c.reject(a.data)})},f.setSessionData=function(){return c.all([b.get("/users/me").then(function(a){return d.create("adminUserinfo",a.data)}),b.get("/users/states?type=PACKAGE").then(function(a){return d.create("adminStates",a.data)}),b.get("/users/states?type=SHIPMENT").then(function(a){return d.create("adminShipment-states",a.data)}),b.get("/afterShipCarriers").then(function(a){return d.create("afterShipCarriers",a.data)}),b.get("/users/states?type=ORDER").then(function(a){return d.create("adminOrder-states",a.data)}),b.get("/users/states?type=PACKAGE_ITEM").then(function(a){return d.create("adminItem-states",a.data)})])},f}]),angular.module("qui.core").constant("AUTH_EVENTS",{loginConfirmed:"event:auth-loginConfirmed",loginCancelled:"event:auth-loginCancelled",logoutConfirmed:"event:auth-logoutConfirmed",loginRequired:"event:auth-loginRequired",forbidden:"event:auth-forbidden"}),angular.module("qui.core").constant("CURRENCY",{USD:"USD United States Dollars",EUR:"EUR Euro",CAD:"CAD Canada Dollars",GBP:"GBP United Kingdom Pounds",DEM:"DEM Germany Deutsche Marks",FRF:"FRF France Francs",JPY:"JPY Japan Yen",NLG:"NLG Netherlands Guilders",ITL:"ITL Italy Lira",CHF:"CHF Switzerland Francs",DZD:"DZD Algeria Dinars",ARP:"ARP Argentina Pesos",AUD:"AUD Australia Dollars",ATS:"ATS Austria Schillings",BSD:"BSD Bahamas Dollars",BBD:"BBD Barbados Dollars",BEF:"BEF Belgium Francs",BMD:"BMD Bermuda Dollars",BRR:"BRR Brazil Real",BGL:"BGL Bulgaria Lev",CLP:"CLP Chile Pesos",CNY:"CNY China Yuan Renmimbi",CYP:"CYP Cyprus Pounds",CSK:"CSK Czech Republic Koruna",DKK:"DKK Denmark Kroner",XCD:"XCD Eastern Caribbean Dollars",EGP:"EGP Egypt Pounds",FJD:"FJD Fiji Dollars",FIM:"FIM Finland Markka",XAU:"XAU Gold Ounces",GRD:"GRD Greece Drachmas",HKD:"HKD Hong Kong Dollars",HUF:"HUF Hungary Forint",ISK:"ISK Iceland Krona",IDR:"IDR Indonesia Rupiah",IEP:"IEP Ireland Punt",ILS:"ILS Israel New Shekels",JMD:"JMD Jamaica Dollars",JOD:"JOD Jordan Dinar",LBP:"LBP Lebanon Pounds",LUF:"LUF Luxembourg Francs",MYR:"MYR Malaysia Ringgit",MXP:"MXP Mexico Pesos",NZD:"NZD New Zealand Dollars",NOK:"NOK Norway Kroner",PKR:"PKR Pakistan Rupees",XPD:"XPD Palladium Ounces",PHP:"Philippines Pesos",XPT:"XPT Platinum Ounces",PLZ:"PLZ Poland Zloty",PTE:"PTE Portugal Escudo",ROL:"ROL Romania Leu",RUR:"RUR Russia Rubles",SAR:"SAR Saudi Arabia Riyal",XAG:"XAG Silver Ounces",SGD:"SGD Singapore Dollars",SKK:"SKK Slovakia Koruna",ZAR:"ZAR South Africa Rand",KRW:"KRW South Korea Won",ESP:"ESP Spain Pesetas",XDR:"XDR Special Drawing Right (IMF)",SDD:"SDD Sudan Dinar",SEK:"SEK Sweden Krona",TWD:"TWD Taiwan Dollars",THB:"THB Thailand Baht",TTD:"TTD Trinidad and Tobago Dollars",TRL:"TRL Turkey Lira",VEB:"VEB Venezuela Bolivar",ZMK:"ZMK Zambia Kwacha"}),angular.module("uiGenApp").factory("LoginAs",["$http","toaster","$window",function(a,b,c){return{init:function(d){return a.post("~~/api/authorise",{grant_type:"loginAs",username:d,app_id:3}).then(function(a){var b=a.data;c.open(b)})["catch"](function(){return b.pop("error","Unexpercted error")})}}}]);var AppController=function a(b,c,d,e,f,g,h,i,j){var k=this;_classCallCheck(this,a),this.Page=j,this.$stateParams=h,this.Session=i,this.adminUserinfo=this.Session.read("adminUserinfo"),this.states=this.Session.read("adminStates"),this.Math=Math,this.URLS=f,this.app={name:"OPS",version:"0.0.1",settings:{themeID:1,navbarCollapseColor:"bg-info",asideColor:"bg-info bg-gd-dk",showHeader:!0,headerFixed:!0,asideFixed:!0,asideFolded:!0,asideDock:!0,container:!1,offScreen:!1,mobileHeader:!1}},this.updateNavigationBar=function(a,b){var c="bg-primary",d="bg-info",e="bg-info bg-gd-dk";(a.startsWith("candidates.")||a.startsWith("candidate."))&&(c="0"===b.source?"bg-black":"bg-sea-green",d="0"===b.source?"bg-black":"bg-sea-green",e="0"===b.source?"bg-black bg-gd-dk":"bg-sea-green bg-gd-dk"),k.app.settings.navbarHeaderColor=c,k.app.settings.navbarCollapseColor=d,k.app.settings.asideColor=e},e.$on("$stateChangeStart",function(a,b,c,d){Object.assign(e,{previousState:d.name,currentState:b.name}),k.app.settings.offScreen=!1,k.app.settings.mobileHeader=!1,k.updateNavigationBar(e.currentState,c)}),this.Page=j,this.$state=d};AppController.$inject=["$window","$uibModal","$state","$rootScope","URLS","$http","$stateParams","Session","Page"],angular.module("uiGenApp").controller("AppController",AppController),angular.module("uiGenApp").directive("ngImageCompress",["$q","toaster",function(a,b){var c=window.URL||window.webkitURL,d=function(a,b){var c=b.resizeType,d=100*b.resizeQuality||70,e="image/jpeg";void 0!==c&&"png"===c&&(e="image/png");var f=b.resizeMaxHeight||300,g=b.resizeMaxWidth||250,h=a.height,i=a.width;i>h?i>g&&(h=Math.round(h*=g/i),i=g):h>f&&(i=Math.round(i*=f/h),h=f);var j=document.createElement("canvas");j.width=i,j.height=h,j.getContext("2d").drawImage(a,0,0,i,h);var k=j.toDataURL(e,d/100),l=new Image;return l.src=k,l.src},e=function(a,b){var c=new Image;c.onload=function(){b(c)},c.src=a},f=function(b){var c=a.defer(),d=new FileReader;return d.onload=function(a){c.resolve(a.target.result)},d.readAsDataURL(b),c.promise};return{restrict:"A",scope:{image:"=",uploadFn:"=",ctrl:"=",resizeMaxHeight:"@?",resizeMaxWidth:"@?",resizeQuality:"@?",resizeType:"@?"},link:function(a,g,h){var i=function(a,b,c){var d=c||(a.match(/^data:([^;]+);/)||"")[1];return fetch(a).then(function(a){return a.arrayBuffer()}).then(function(a){return new File([a],b,{type:d})})},j=function(b,c){e(b.url,function(e){var f=d(e,a);Object.assign(b,{compressed:{dataURL:f,type:f.match(/:(.+\/.+);/)[1]}}),c(b)})},k=function(c){var d=c.compressed,e=d.type,f=d.dataURL;i(f,c.file.name,e).then(function(b){a.uploadFn(a.ctrl,b)})["catch"](function(){return b.pop("Error while optimising photo")}),a.$apply(function(){h.multiple?a.image.push(c):Object.assign(a,{image:c})})};g.bind("change",function(b){h.multiple&&Object.assign(a,{image:[]});for(var d=b.target.files,e=function(b){var e={file:d[b],url:c.createObjectURL(d[b])};f(d[b]).then(function(a){e.dataURL=a}),a.resizeMaxHeight||a.resizeMaxWidth?j(e,function(a){k(a)}):k(e)},g=0;g<d.length;g++)e(g)})}}}]),angular.module("qui.core").factory("Page",["Session",function(a){var b="",c=a.read("adminUserinfo")?a.read("adminUserinfo").profile_photo_url:"/assets/images/logo.beba3fea.png";return{favicon:function(){return c||"https://www.shoppre.com/img/favicon.png"},setFavicon:function(a){c=a},title:function(){return a.read("adminUserinfo")?a.read("adminUserinfo").name+" - "+b:""},setTitle:function(a){b=a}}}]),angular.module("qui.core").factory("Session",["$window",function(a){var b={};return b.create=function(a,b){localStorage[a]=angular.toJson(b)},b.read=function(b){return angular.fromJson(a.localStorage[b])},b.destroy=function(){a.localStorage.clear()},b.isAuthenticated=function(){return!(!b.read("adminOauth")||!b.read("adminOauth").access_token)},b.getAccessToken=function(){return b.read("adminOauth")&&b.read("adminOauth").access_token},b.isAuthorized=function(a){var c=a;return angular.isArray(c)||(c=[].push(c)),b.isAuthenticated()&&~c.indexOf(b.userRole)},b}]),angular.module("qui.core").factory("User",["Session",function(a){return Object.defineProperties({},{userinfo:{get:function(){return a.read("adminUserinfo")},configurable:!0,enumerable:!0},states:{get:function(){return a.read("states")},configurable:!0,enumerable:!0},shipmentStates:{get:function(){return a.read("shipment-states")},configurable:!0,enumerable:!0},orderStates:{get:function(){return a.read("order-states")},configurable:!0,enumerable:!0},shipmentTypes:{get:function(){return a.read("shipment-types")},configurable:!0,enumerable:!0},orderTypes:{get:function(){return a.read("order-types")},configurable:!0,enumerable:!0},afterShipCarriers:{get:function(){return a.read("afterShipCarriers")},configurable:!0,enumerable:!0}})}]);var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),FourOFourController=function(){function a(b){_classCallCheck(this,a),this.Fullscreen=b}return a.$inject=["Fullscreen"],_createClass(a,[{key:"$onInit",value:function(){console.log("init"),this.isFullScreen=!1}},{key:"goFullscreen",value:function(){this.Fullscreen.isEnabled()?this.Fullscreen.cancel():(console.log("all"),this.Fullscreen.all())}},{key:"goFullScreenViaWatcher",value:function(){this.isFullScreen=!this.isFullScreen}}]),a}();angular.module("uiGenApp").controller("FourOFourController",FourOFourController),angular.module("uiGenApp").config(["$stateProvider",function(a){a.state("access",{"abstract":!0,template:'<div ui-view class="fade-in-right-big smooth"></div>'}).state("access.oauth",{url:"/access/oauth",templateUrl:"app/routes/access/oauth/oauth.html",controller:"oAuthCtrl",controllerAs:"oAuth"}).state("access.404",{templateUrl:"app/routes/access/404/404.html",controller:"FourOFourController",controllerAs:"$ctrl"})}]);var OAuthCtrl=["Auth","$location","$window","$state","URLS","$rootScope","Session","toaster",function b(a,c,d,e,f,g,h,i){var j=this;_classCallCheck(this,b);var k=c.search();return k.error?(this.authErr={error:k.error,error_description:k.error_description,code:k.code},null):(k.code||i.pop("error","Authorization code missing"),a.login({code:k.code}).then(function(){return a.setSessionData().then(function(){j.user=h.read("adminUserinfo");var a=d.location;a.href=k.state?""+a.origin+k.state:e.href("packages.index",{absolute:!0})})})["catch"](function(){var a=d.location;a.href=f.OAUTH}))}];OAuthCtrl.$inject=["Auth","$location","$window","$state","URLS","$rootScope","Session","toaster"],angular.module("uiGenApp").controller("oAuthCtrl",OAuthCtrl),angular.module("uiGenApp").directive("aside",function(){return{templateUrl:"components/aside/aside.html",restrict:"E"}}),angular.module("uiGenApp").directive("footer",function(){return{templateUrl:"components/footer/footer.html",restrict:"E",link:function(a,b){b.addClass("footer")}}});var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),NavbarController=function(){function a(b,c,d,e,f,g,h,i){_classCallCheck(this,a),this.$http=c,this.$timeout=e,this.Auth=g,this.URLS=h,this.$state=d,this.$q=f,this.Session=i,this.$rootScope=b,this.$onInit()}return a.$inject=["$rootScope","$http","$state","$timeout","$q","Auth","URLS","Session"],_createClass(a,[{key:"$onInit",value:function(){this.totalNotification=[],this.user=this.Session.read("adminUserinfo"),this.user&&(this.userInitial=this.user.first_name.substr(0,1),this.ui={count:0},this.getChatNotification())}},{key:"showComment",value:function(a,b,c){this.totalNotification.splice(c,1),1===b?this.$state.go("package.show",{id:a}):2===b?this.$state.go("shipment.show",{id:a}):3===b&&this.$state.go("order.show",{id:a});var d="#/"+b+"/"+a+"/comments?type=admin";this.$http.get(d)}},{key:"getChatNotification",value:function(){var a=this,b="#/chatNotification";this.$http.get(b).then(function(b){var c=b.data;a.totalNotification=c.notifications,a.totalCount=c.count})}}]),a}();angular.module("uiGenApp").controller("NavbarController",NavbarController),angular.module("uiGenApp").directive("navbar",function(){return{templateUrl:"components/navbar/navbar.html",replace:!1,restrict:"E",controller:"NavbarController",controllerAs:"NavBar"}}),angular.module("uiGenApp").directive("navigation",function(){return{templateUrl:"components/navigation/navigation.html",restrict:"E"}}),angular.module("uiGenApp").run(["$templateCache",function(a){a.put("app/directives/ng-cropperjs/ng-cropperjs.html",'<div><!--h1 Image Upload Mobile Friendly/Touch Friendly--><div style=position:relative;display:block;width:100%><div style="background:red;color:red; height:10px"></div><video id=video width=100% autoplay ng-show="STATUS===\'INIT\'"></video><button id=snap ng-click=snap() ng-show="STATUS===\'INIT\'">Snap Photo</button><img id=image style="display: block;max-width: 100%" width=100% ng-src={{imageSrc}} ng-hide="CROP_LOADED"><canvas id=canvas width=100% ng-show="STATUS===\'PREVIEW\'"></canvas></div><input type=file accept="image/*;capture=camera" ng-model=image ngf-select=loadImage($file) ng-show="STATUS ===&quot;START&quot;"><ul><li><button ng-click=done() ng-show="STATUS ===&quot;CROP&quot;">Done</button><button ng-click=upload() ng-show="STATUS ===&quot;PREVIEW&quot;">Upload</button><button ng-click=startCropping() ng-show="STATUS ===&quot;PREVIEW&quot;">Crop</button></li></ul></div>'),a.put("app/routes/access/404/404.html","<div ng-init=\"App.app.settings.container=false;App.app.settings.showHeader=false;App.app.settings.headerFixed=false;\" class=fullscreen><div><div ng-cropperjs=ng-cropperjs></div></div><div class=column><!-- enable/disable fullscreen using the 'Fullscreen' service--><button ng-click=$ctrl.goFullscreen()>Enable/Disable Document Fullscreen</button><!--img(src='imgs/P1030188.jpg' fullscreen='')--><!--button(ng-click='goFullScreenViaWatcher()') Toggle FullScreen--><!--img(src='imgs/P1030293.jpg' fullscreen='$ctrl.isFullScreen' only-watched-property='')--></div><div ngsf-fullscreen=$ctrl class=\"text-center m-b-lg fullscreen\"><!--h1.text-shadow.text-white 404--><!--.h4.text-muted the page that you are looking for does not exist.--></div><div class=\"list-group bg-info auto m-b-sm m-b-lg\"><a ui-sref=packages.index class=list-group-item><i class=\"fa fa-chevron-right text-muted\"></i><i class=\"fa fa-fw fa-mail-forward m-r-xs\"></i>Goto application</a></div><!--.text-center(ng-include=\"'html/blocks/footer.html'\")--></div>"),a.put("app/routes/access/access.html",'<div ng-init="App.app.settings.extra=true">Not used. access.js using inline template</div>'),a.put("app/routes/access/oauth/oauth.html",'<div ng-init="App.app.settings.container = false;" class="container w-xxl w-auto-xs"></div>'),a.put("components/aside/aside.html",'<div class=aside-wrap><div class="navi-wrap bg-info"><!-- user--><nav ui-nav="" ng-include="\'components/navigation/navigation.html\'" class=navi></nav><!-- aside footer--></div></div>'),a.put("components/footer/footer.html","<p><small class=text-muted>ShoppRe.com<br>&copy; 2015</small></p>"),a.put("components/navbar/navbar.html",'<div class="app-header navbar"><div class="navbar-header {{App.app.settings.navbarHeaderColor}}"><button ng-click="App.app.settings.mobileHeader = !App.app.settings.mobileHeader" ng-if="App.$state.current.name !== &quot;extension&quot;" class="pull-right visible-xs dk"><i class="fa fa-cog"></i></button><button ng-click=App.hideExt() ng-if="App.$state.current.name === &quot;extension&quot;" class="pull-right visible-xs dk"><i class="fa fa-times"></i></button><a style="line-height: 44px;width: 258px" ng-class="{\'company-logo\' : App.app.settings.isAdmin, \'consultant-logo\': !App.app.settings.isAdmin}" ui-sref="{{App.$state.current.name !== &quot;extension&quot; ? &quot;feeds&quot; : &quot;&quot;}}" class="navbar-brand text-lt bg-dark"><img style="width: 30px;margin-top: 5px" src=assets/images/logo.beba3fea.png alt={{App.app.name}} class="pull-left"><span style="margin-left: -122px;font-weight: 400;font-size: 18px" title={{App.app.name}}>{{App.app.name}}</span></a></div><div ng-class="{ show: App.app.settings.mobileHeader, \'company-header\' : App.app.settings.isAdmin}" style="margin-left: 53px" class="collapse pos-rlt navbar-collapse box-shadow {{App.app.settings.navbarCollapseColor}}"><div class="nav navbar-nav hidden-xs hide"><a href="" ng-click="App.app.settings.asideFolded = !App.app.settings.asideFolded" class="btn no-shadow navbar-btn"><i class="fa fa-fw {{App.app.settings.asideFolded ? \'fa-indent\' : \'fa-dedent\'}}"></i></a><a href="" ui-toggle-class=show target=#aside-user class="btn no-shadow navbar-btn"><i class="icon-user fa-fw"></i></a></div><!--ng-focus="App.openSearchCandidate($event)"--><aside></aside><div class="col-sm-5 col-md-2"><form role=search ng-if=!App.adminUserinfo.isBlocked class="w-full navbar-form no-padder hide"><div class="form-group w-full"><div ng-hide="App.fullPage==true" class="input-group w-full"><span style="width: 1%" ng-class="{&quot;b-b&quot;: NavBar.isSearchOpen}" ng-click="NavBar.isSearchOpen=!NavBar.isSearchOpen;NavBar.ui.setfocus();" class="input-group-btn b-white"><a class="btn btn-xs"><i class="fa fa-search"></i></a></span><input ng-class="{\'search-animate\': NavBar.isSearchOpen, \'company-header\': App.app.settings.isAdmin}" ng-model=App.Applicants.searchText uib-typeahead="applicant.name for applicant in App.Applicants.get($viewValue)" typeahead-on-select=App.Applicants.select($item) placeholder="Search candidate" style="font-size: 14px" search-focus=search-focus ui=NavBar.ui class="search input-sm no-border text-white text-md b-b b-white"></div></div></form></div><ul class="nav navbar-nav navbar-right"><li class=hide><a uib-popover-template=&quot;components/navbar/popover.html&quot; popover-trigger=&quot;outsideClick&quot; popover-placement=bottom-right popover-is-open=NavBar.isOpen class=n-hv><i class="fa fa-lg fa-th text-white th-scale-y"></i></a></li><li class="hide nav-menu-item"><a ui-sref=notifications title=Notifications href=/notifications class=n-hv><notify-count></notify-count></a></li><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><div class=hv><i style="display: block !important; font-size: 20px;margin-top: 15px" class="fa fa-bell text-white"><span style="font-size: 55px;color: darkorange;font-size: 20px;font-weight: 700;color: #ffffff;border-radius: 10px;background-color: darkorange;padding: 4px">{{NavBar.totalCount.length}}</span></i></div><div style="right: 0px !important;min-width: 233px !important" class=dropdown-content><a ng-click="NavBar.showComment(item.object_id, item.type, $index)" target=_blank style="color: green;font-weight: 700" ng-repeat="item in NavBar.totalNotification">New Message<br><span ng-if="item.type === 1">Pkg ID: {{item.object_id}}</span><span ng-if="item.type === 2">Shipment ID: {{item.object_id}}</span><span ng-if="item.type === 3">Order ID: {{item.object_id}}</span><!--span(style=\'float: right;margin-right: 30px;background-color: darkorange;border-radius: 20px;padding: 2px 12px;color:#ffffff\') View--></a><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref=notifications.index() class="badge bg-success m-l-xs">View More Comments</a></div></li><li><a uib-popover-template=&quot;components/navbar/profile-popover.html&quot; popover-trigger=&quot;outsideClick&quot; popover-placement=bottom-right popover-is-open=NavBar.isProfPopOpen style="padding: 0 10px" class="no-hv m-t-sm m-r-sm"><div style="height: 30px;width: 30px;border-radius: 50%" class="bg-light b-info b-a text-center avatar"><span ng-if=!NavBar.user.profile_photo_url style="color: #4675b6;line-height: 1.7em" ng-bind=NavBar.userInitial class="text-md text-u-c"></span><img ng-if=NavBar.user.profile_photo_url ng-src={{NavBar.user.profile_photo_url}} style="height: 30px;width: 30px;border-radius: 50%"><i class="on md b-white bottom"></i></div></a></li></ul></div></div>'),
a.put("components/navbar/popover.html",'<div style="height: 230px" class=wrapper-sm><a target=_blank ng-href={{App.URLS.HELP}} style="width: 73px;margin: 4px" ng-click="$ctrl.isOpen = !$ctrl.isOpen" class="col-xs-4 text-center no-padder hv-border-info m-b-sm padder-v m-t-n-sm m-b-sm"><div style="padding: 5px 4px"><img src=/assets/images/help.faa75f2f.svg style="width: 60px"></div><div style="font-size: 12px;line-height: 1.15em" class="text-center text-black m-b-sm">Help</div></a></div>'),a.put("components/navbar/profile-popover.html",'<div class=wrapper-xs><div class=hbox><div class="col thumb-lg"><div style="border-radius: 50%;width:40px;height: 40px" class="b-a bg-light text-center m-l-md m-t b-primary"><a style="color: #5585B9;font-size: 26px" ng-click="$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen" ng-bind=$ctrl.userInitial class="m-t-lg font-lg text-u-c"></a></div></div><div class=col><div ng-click="$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen" ng-bind=App.adminUserinfo.name title={{App.adminUserinfo.name}} class="w-full m-t-xs text-md text-black text-ellipsis"></div><div ng-click="$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen" ng-bind=App.adminUserinfo.email title={{App.adminUserinfo.email}} class="w-full m-t-xs text-black text-ellipsis"></div></div></div><div class=hbox><div class="col w-full m-t-xs"><div ng-controller="LogoutController as logout" class=w-full><span style="color: #333" ng-click="logout.$onInit();$ctrl.isProfPopOpen = !$ctrl.isProfPopOpen;" class="pull-right btn btn-sm bg-gray b-a b-gray">Logout</span></div></div></div></div>'),a.put("components/navigation/navigation.html",'<ul class="nav navbar-nav navbar-left"><li class="hidden-folded padder m-t m-b-sm text-muted text-xs">Navigation</li><li ui-sref-active=active uib-dropdown=uib-dropdown class=nav-menu-item><a uib-dropdown-toggle=uib-dropdown-toggle ui-sref="orders.index({bucket: &quot;All&quot;, type: &quot;assisted_purchased&quot;})" class=hv><i class="fa fa-list-alt text-white"></i><span>Scanner</span></a></li></ul>')}]);